(this.webpackJsonpkibuvits=this.webpackJsonpkibuvits||[]).push([[0],{118:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n,a,c,i,o,s=r(18),u=r(6),l=r(12),j=r(13),b=r(22),p=r(4),O=(r(61),r(53)),d=r(17),h=(n=r(47).a.Name("users"),a=Object(d.JsonProperty)(),n((i=function(e){Object(j.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(s.a)(e,"email",o,Object(l.a)(e)),e}return r}(O.a),o=Object(p.a)(i.prototype,"email",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=i))||c)},186:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(6),a=r(11),c=function(){function e(t){Object(n.a)(this,e),this.localStorageService=void 0,this.localStorageService=t}return Object(a.a)(e,[{key:"getToken",value:function(){return this.localStorageService.getItem(e.TOKEN_KEY)||null}},{key:"setToken",value:function(t){this.localStorageService.setItem(e.TOKEN_KEY,t)}},{key:"clearToken",value:function(){this.localStorageService.removeItem(e.TOKEN_KEY)}}]),e}();c.TOKEN_KEY="token"},187:function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var n,a,c,i,o,s,u,l,j,b,p,O,d,h,f,v,g,y,x,m,S,k=r(18),w=r(6),I=r(12),P=r(13),E=r(22),z=r(4),A=(r(61),r(53)),N=r(17),C=(n=r(47).a.Name("organizations"),a=Object(N.JsonProperty)(),c=Object(N.JsonProperty)(),i=Object(N.JsonProperty)(),o=Object(N.JsonProperty)(),s=Object(N.JsonProperty)(),u=Object(N.JsonProperty)(),l=Object(N.JsonProperty)(),j=Object(N.JsonProperty)(),b=Object(N.JsonProperty)(),n((O=function(e){Object(P.a)(r,e);var t=Object(E.a)(r);function r(){var e;Object(w.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(k.a)(e,"name",d,Object(I.a)(e)),Object(k.a)(e,"logo",h,Object(I.a)(e)),Object(k.a)(e,"address",f,Object(I.a)(e)),Object(k.a)(e,"vatNumber",v,Object(I.a)(e)),Object(k.a)(e,"email",g,Object(I.a)(e)),Object(k.a)(e,"phone",y,Object(I.a)(e)),Object(k.a)(e,"registryCode",x,Object(I.a)(e)),Object(k.a)(e,"industry",m,Object(I.a)(e)),Object(k.a)(e,"status",S,Object(I.a)(e)),e}return r}(A.a),d=Object(z.a)(O.prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=Object(z.a)(O.prototype,"logo",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=Object(z.a)(O.prototype,"address",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=Object(z.a)(O.prototype,"vatNumber",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=Object(z.a)(O.prototype,"email",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=Object(z.a)(O.prototype,"phone",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=Object(z.a)(O.prototype,"registryCode",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=Object(z.a)(O.prototype,"industry",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=Object(z.a)(O.prototype,"status",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=O))||p)},254:function(e,t,r){},33:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return y}));var n,a,c,i,o,s,u,l,j=r(18),b=r(6),p=r(12),O=r(13),d=r(22),h=r(4),f=(r(61),r(53)),v=r(17),g=r(47);!function(e){e.POSITION="position",e.TECHNOLOGY="technology",e.PROJECT_TYPE="project_type",e.LOCATION="location",e.LANGUAGE="language"}(l||(l={}));var y=(n=g.a.Name("tags"),a=Object(v.JsonProperty)(),c=Object(v.JsonProperty)(),n((o=function(e){Object(O.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(b.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(j.a)(e,"name",s,Object(p.a)(e)),Object(j.a)(e,"type",u,Object(p.a)(e)),e}return r}(f.a),s=Object(h.a)(o.prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=Object(h.a)(o.prototype,"type",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=o))||i)},39:function(e,t,r){"use strict";r.d(t,"b",(function(){return y})),r.d(t,"a",(function(){return x})),r.d(t,"c",(function(){return T}));var n,a,c,i,o,s,u,l,j,b,p,O,d,h,f,v,g,y,x,m=r(18),S=r(6),k=r(11),w=r(12),I=r(13),P=r(22),E=r(4),z=(r(61),r(53)),A=r(17),N=r(47),C=r(221),R=r.n(C);!function(e){e.PROJECT="project",e.TRAINING="training"}(y||(y={})),function(e){e[e.UPCOMING=0]="UPCOMING",e[e.ONGOING=1]="ONGOING",e[e.ENDED=2]="ENDED"}(x||(x={}));var T=(n=N.a.Name("projects"),a=Object(A.JsonProperty)(),c=Object(A.JsonProperty)(),i=Object(A.JsonProperty)(),o=Object(A.JsonProperty)(),s=Object(A.JsonProperty)(),u=Object(A.JsonProperty)(),l=Object(A.JsonProperty)(),j=Object(A.JsonProperty)(),n((p=function(e){Object(I.a)(r,e);var t=Object(P.a)(r);function r(){var e;Object(S.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(m.a)(e,"name",O,Object(w.a)(e)),Object(m.a)(e,"type",d,Object(w.a)(e)),Object(m.a)(e,"dateStart",h,Object(w.a)(e)),Object(m.a)(e,"dateEnd",f,Object(w.a)(e)),Object(m.a)(e,"organizationId",v,Object(w.a)(e)),Object(m.a)(e,"clientName",g,Object(w.a)(e)),e._image=void 0,e._organization=void 0,e}return Object(k.a)(r,[{key:"organization",get:function(){return this._organization},set:function(e){this._organization=e}},{key:"image",get:function(){return!this._image&&this.id?R.a.generate(this.name).toDataUri():this._image},set:function(e){this._image=e}},{key:"hasStarted",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return!this.dateStart||this.dateStart<e}},{key:"hasEnded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return this.dateEnd&&this.dateEnd<e}},{key:"isOngoing",value:function(){return this.hasStarted()&&!this.hasEnded()}},{key:"state",get:function(){return this.isOngoing()?x.ONGOING:this.hasStarted()?this.hasEnded()?x.ENDED:void 0:x.UPCOMING}}]),r}(z.a),O=Object(E.a)(p.prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=Object(E.a)(p.prototype,"type",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.PROJECT}}),h=Object(E.a)(p.prototype,"dateStart",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=Object(E.a)(p.prototype,"dateEnd",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=Object(E.a)(p.prototype,"organizationId",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=Object(E.a)(p.prototype,"clientName",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(E.a)(p.prototype,"organization",[l],Object.getOwnPropertyDescriptor(p.prototype,"organization"),p.prototype),Object(E.a)(p.prototype,"image",[j],Object.getOwnPropertyDescriptor(p.prototype,"image"),p.prototype),b=p))||b)},40:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return R}));var n,a,c,i,o,s,u,l,j,b,p,O,d,h,f,v,g,y,x,m,S=r(18),k=r(6),w=r(11),I=r(12),P=r(13),E=r(22),z=r(4),A=(r(61),r(53)),N=r(17),C=r(47);!function(e){e[e.ADMIN=0]="ADMIN",e[e.MANAGER=1]="MANAGER",e[e.USER=2]="USER"}(m||(m={}));var R=(n=C.a.Name("persons"),a=Object(N.JsonProperty)(),c=Object(N.JsonProperty)(),i=Object(N.JsonProperty)(),o=Object(N.JsonProperty)(),s=Object(N.JsonProperty)(),u=Object(N.JsonProperty)(),l=Object(N.JsonProperty)(),j=Object(N.JsonProperty)(),n((p=function(e){Object(P.a)(r,e);var t=Object(E.a)(r);function r(){var e;Object(k.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(S.a)(e,"name",O,Object(I.a)(e)),Object(S.a)(e,"position",d,Object(I.a)(e)),Object(S.a)(e,"userId",h,Object(I.a)(e)),Object(S.a)(e,"user",f,Object(I.a)(e)),Object(S.a)(e,"capacity",v,Object(I.a)(e)),Object(S.a)(e,"organizationId",g,Object(I.a)(e)),Object(S.a)(e,"role",y,Object(I.a)(e)),Object(S.a)(e,"image",x,Object(I.a)(e)),e._organization=void 0,e}return Object(w.a)(r,[{key:"subTitle",get:function(){var e;return[this.position,null===(e=this.organization)||void 0===e?void 0:e.name].filter(Boolean).join(" at ")}},{key:"organization",get:function(){return this._organization},set:function(e){this._organization=e}},{key:"hasPermission",value:function(e){var t=this;return!e||e.length<=0||e.some((function(e){return e===t.role}))}},{key:"humanReadableRole",get:function(){switch(this.role){case m.ADMIN:return"Admin";case m.MANAGER:return"Manager";case m.USER:return"User"}return""}}]),r}(A.a),O=Object(z.a)(p.prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=Object(z.a)(p.prototype,"position",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=Object(z.a)(p.prototype,"userId",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=Object(z.a)(p.prototype,"user",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=Object(z.a)(p.prototype,"capacity",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=Object(z.a)(p.prototype,"organizationId",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=Object(z.a)(p.prototype,"role",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=Object(z.a)(p.prototype,"image",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=p))||b)},468:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(54),i=r.n(c),o=(r(254),r(42)),s=r(25),u=r(39),l=a.a.createContext(null);function j(){var e=a.a.useContext(l);if(!e)throw new Error("Store is not provided");return e}var b=r(512),p=r(236),O=r(482),d=r(485),h=r(481),f=r(486),v=r(487),g=r(478),y=r(505);function x(e){return e?"string"===typeof e?Object(g.a)(e):new Date(e):null}function m(e){return e?Object(y.a)(e,"dd.MM.yyyy"):null}var S=r(16),k=r(34),w=r(479),I=r(1),P=function(e){var t=e.children,r=Object(k.a)(e,["children"]);return Object(I.jsx)(w.a,Object(S.a)(Object(S.a)({bg:"white",borderRadius:"md",boxShadow:"lg",p:4,overflow:"hidden"},r),{},{children:t}))},E=r(480),z=function(e){return Object(I.jsx)(E.a,Object(S.a)({borderRadius:"md",textTransform:"unset"},e))},A=r(29),N=r(15),C=r(33),R=r(41),T={android:Object(I.jsx)(R.a,{color:"#85C808"}),angular:Object(I.jsx)(R.b,{color:"#DD0031"}),bootstrap:Object(I.jsx)(R.f,{color:"#563D7C"}),react:Object(I.jsx)(R.t,{color:"#61DBFB"}),java:Object(I.jsx)(R.m,{color:"red"}),php:Object(I.jsx)(R.q,{color:"#474A8A"}),estonian:"\ud83c\uddea\ud83c\uddea",english:"\ud83c\uddec\ud83c\udde7"},U=function(e){var t=e.name,r=e.fallback,n=t?t.toLocaleLowerCase():"";return Object(I.jsx)(I.Fragment,{children:T[n]||r})};U.defaultProps={fallback:Object(I.jsx)(R.k,{})};var D,J=U,M=(D={},Object(N.a)(D,C.a.TECHNOLOGY,Object(I.jsx)(R.j,{})),Object(N.a)(D,C.a.LOCATION,Object(I.jsx)(R.o,{})),Object(N.a)(D,C.a.POSITION,Object(I.jsx)(R.z,{})),Object(N.a)(D,C.a.PROJECT_TYPE,Object(I.jsx)(R.v,{})),Object(N.a)(D,C.a.LANGUAGE,Object(I.jsx)(R.n,{})),D),G=function(e){var t=e.name,r=e.type;return Object(I.jsx)(J,{name:t,fallback:Object(I.jsx)(I.Fragment,{children:M[r]||J.defaultProps.fallback})})},L=function(e){var t=e.children,r=e.name,n=e.type,a=e.icon;return Object(I.jsxs)(b.a,{spacing:2,py:1,children:[Object(I.jsx)("span",{style:{flexShrink:0},children:a||Object(I.jsx)(G,{name:r,type:n})}),Object(I.jsx)(h.a,{fontSize:"xs",children:t||r})]})},F=function(e){var t=e.tags;return Object(I.jsx)(O.a,{columns:2,spacingX:4,children:t.map((function(e){return Object(I.jsx)(L,Object(S.a)({},e),e.name)}))})},B=Object(s.a)((function(e){var t=e.projectId,r=j().projectTagStore;Object(n.useEffect)((function(){r.loadByProject(t)}),[t]);var a=r.getItemsByProject(t),c=a.filter((function(e){var t;return(null===(t=e.tag)||void 0===t?void 0:t.type)===C.a.POSITION})),i=a.filter((function(e){var t;return(null===(t=e.tag)||void 0===t?void 0:t.type)!==C.a.POSITION})).map((function(e){return e.tag||{}})),o=c.reduce((function(e,t){return e+(+t.capacity||1)}),0);return o>0&&i.splice(1,0,{icon:Object(I.jsx)(R.A,{}),name:o.toString()}),Object(I.jsx)(F,{tags:i})})),V=r(483),Y=r(40),q=[Y.a.MANAGER,Y.a.ADMIN],W=function(e){var t=e.roles,r=e.children,n=j().personStore.currentPerson;return n&&n.hasPermission(t)?Object(I.jsx)(I.Fragment,{children:r}):null},H=r(5);var Q=function(e){var t=e.to,r=e.preserveQuery,n=e.external,a=Object(k.a)(e,["to","preserveQuery","external"]),c=Object(o.h)(),i=t;if(r){var s=t.split("?"),u=Object(H.a)(s,2),l=u[0],j=u[1];i="".concat(l||"","?").concat(function(e,t){var r=new URLSearchParams(e||"");return new URLSearchParams(t||"").forEach((function(e,t){r.set(t,e)})),r.toString()}(c.search,j))}return n?Object(I.jsx)("a",Object(S.a)({href:i,target:"_blank"},a)):Object(I.jsx)(A.b,Object(S.a)({to:i},a))},K=function(e){var t=e.to,r=e.scope,n=e.label,a=e.icon,c=Object(k.a)(e,["to","scope","label","icon"]);return Object(I.jsx)(W,{roles:r,children:Object(I.jsx)(V.a,Object(S.a)({variant:"ghost",as:Q,to:t,preserveQuery:!0,"aria-label":n,icon:a},c))})};K.defaultProps={scope:[Y.a.MANAGER,Y.a.ADMIN],label:"Edit",icon:Object(I.jsx)(R.p,{})};var Z=K,X=function(e){var t=e.project,r=e.highlighted,n="/projects/view/".concat(t.id),a=Object(I.jsx)(P,{p:0,children:Object(I.jsxs)(b.b,{spacing:2,children:[Object(I.jsx)(A.b,{to:n,children:Object(I.jsx)(d.a,{width:"100%",height:200,src:t.image,alt:t.name,objectFit:"cover"})}),Object(I.jsxs)(h.a,{fontSize:"lg",textAlign:"center",px:4,children:[t.name,t.clientName&&Object(I.jsx)(z,{ml:2,colorScheme:"purple",size:"xs",children:t.clientName})]}),(t.dateStart||t.dateEnd)&&Object(I.jsxs)(h.a,{fontSize:"xs",fontWeight:"bold",textAlign:"center",color:"gray.500",px:4,children:[m(t.dateStart)||"..."," \u2014 ",m(t.dateEnd)||"..."]}),Object(I.jsx)(b.b,{px:4,alignItems:"center",children:Object(I.jsx)(B,{projectId:t.id})}),Object(I.jsxs)(b.b,{p:4,children:[Object(I.jsx)(f.a,{}),Object(I.jsxs)(b.a,{justifyContent:"flex-end",spacing:2,children:[Object(I.jsx)(Z,{size:"sm",to:"?".concat(t.type,"=").concat(t.id)}),Object(I.jsx)(p.a,{size:"sm",as:A.b,to:n,colorScheme:"purple",children:"Open"})]})]})]})});return r?Object(I.jsx)(v.a,{in:!0,initialScale:.3,children:a}):a},_=r(3),$=r.n(_),ee=r(20),te=r(10),re=r(494),ne=r(78),ae=r(488),ce=r(489),ie=r(57),oe=function(e){var t,r=e.children,n=e.name,c=e.required,i=e.label,o=e.helperText,s=e.defaultValue,u=e.pattern,l=e.validate,j=Object(ie.e)(),b=j.errors,p=j.control,O=j.getValues,d=(null===(t=b[n])||void 0===t?void 0:t.message)||null;if(a.a.Children.count(r)>1)throw new Error("Invalid children count");var h=r&&a.a.Children.only(r);return Object(I.jsx)(ie.a,{control:p,name:n,rules:{required:c,pattern:u,validate:l&&function(e){return l(e,O)}},defaultValue:s,render:function(e){var t=e.onChange,r=e.onBlur,s=e.value;return Object(I.jsxs)(ne.a,{id:"formField__".concat(n),isRequired:c,isInvalid:!!d,children:[i&&Object(I.jsx)(ae.a,{children:i}),h&&a.a.isValidElement(h)&&a.a.cloneElement(h,{name:n,onChange:t,onBlur:r,value:s}),d&&Object(I.jsx)(ce.a,{children:d}),o&&Object(I.jsx)(ne.b,{children:o})]})}})};oe.defaultProps={defaultValue:""};var se=oe,ue=r(507),le=function(e){var t=e.onSubmit,r=e.children,a=e.defaultValues,c=e.successMessage,i=Object(ie.d)({defaultValues:a}),o=i.handleSubmit,s=i.reset,u=i.formState.isSubmitSuccessful,l=Object(ue.a)();return Object(n.useEffect)((function(){u&&c&&l({description:c,status:"success",isClosable:!0})}),[u]),Object(n.useEffect)((function(){u&&s(a)}),[s,a,u]),Object(I.jsx)(ie.b,Object(S.a)(Object(S.a)({},i),{},{children:Object(I.jsx)("form",{onSubmit:o(t),children:"function"===typeof r?r(i):r})}))},je=r(513),be=r(72),pe=function(e){var t=e.children,r=Object(k.a)(e,["children"]);return Object(I.jsx)(je.a,Object(S.a)(Object(S.a)({placement:"right"},r),{},{children:Object(I.jsx)(be.g,{children:Object(I.jsxs)(je.b,{children:[Object(I.jsx)(be.c,{}),t]})})}))},Oe=function(e){var t=e.children,r=Object(ie.e)().formState,n=r.isSubmitting,a=r.isDirty,c=r.isSubmitSuccessful;return Object(I.jsx)(p.a,{type:"submit",colorScheme:"purple",isLoading:n,disabled:!a||c,children:t})};function de(e){var t=Object(o.h)();return new URLSearchParams(t.search).get(e)}var he=function(e){var t=e.name,r=e.children,n=Object(k.a)(e,["name","children"]),a=Object(o.h)(),c=Object(o.g)(),i=de(t),s=null!==i,u=function(){var e=new URLSearchParams(a.search);e.delete(t),c.push("?".concat(e.toString()))};return Object(I.jsx)(pe,Object(S.a)(Object(S.a)({isOpen:s,onClose:u},n),{},{children:"function"===typeof r?r({value:i,handleClose:u}):r}))},fe=function(e){var t=e.submitButton,r=e.name,n=e.size,a=e.header,c=e.children,i=e.onSubmit,o=e.autoClose,s=Object(k.a)(e,["submitButton","name","size","header","children","onSubmit","autoClose"]);return Object(I.jsx)(he,{name:r,size:n,children:function(e){var r=function(){var t=Object(te.a)($.a.mark((function t(r){var n;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(r,e.value);case 2:return n=t.sent,o&&e.handleClose(),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(be.f,{children:a}),Object(I.jsx)(be.b,{children:Object(I.jsx)(le,Object(S.a)(Object(S.a)({onSubmit:r},s),{},{children:function(r){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(I.Fragment,{children:"function"===typeof c?c({formContext:r,drawerContext:e}):c}),t&&Object(I.jsx)(be.e,{children:Object(I.jsx)(Oe,Object(S.a)(Object(S.a)({},t),{},{children:t.text}))})]})}}))})]})}})};fe.defaultProps={submitButton:{text:"Save"},autoClose:!0};var ve,ge,ye,xe,me,Se,ke,we,Ie,Pe,Ee,ze,Ae,Ne,Ce,Re=fe,Te=function(e){var t=e.value,r=Object(k.a)(e,["value"]),n=t&&x(t);return Object(I.jsx)(re.a,Object(S.a)(Object(S.a)({},r),{},{value:n&&Object(y.a)(n,"yyyy-MM-dd"),type:"date"}))},Ue=r(495),De=r(6),Je=r(11),Me={dataSource:null},Ge=r(90),Le=r(229),Fe=r.n(Le),Be=function(){function e(t){Object(De.a)(this,e),this.tokenService=void 0,this.tokenService=t}return Object(Je.a)(e,[{key:"create",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",a=Fe.a.create({baseURL:e});return a.interceptors.request.use(function(){var e=Object(te.a)($.a.mark((function e(a){var c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tokenService.getToken();case 2:return c=e.sent,r&&c&&(a.headers.authorization="Bearer ".concat(c)),n&&!a.headers.Accept&&(a.headers.Accept="application/json"),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.interceptors.response.use(void 0,(function(e){var t,r=(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)||{},n=r.title,a=r.detail,c=r.message;return e.message=n||a||c||e.message,Promise.reject(e)})),a}}]),e}(),Ve=r(186),Ye=r(63),qe=r(52),We=r(13),He=r(22),Qe=r(509),Ke=r(47),Ze=function(){function e(t,r){Object(De.a)(this,e),this.domain=void 0,this.localStorageService=void 0,this.domain=t,this.localStorageService=r}return Object(Je.a)(e,[{key:"resource",get:function(){return Ke.a.getName(this.domain)}},{key:"getMany",value:function(){var e=Object(te.a)($.a.mark((function e(){var t,r,n,a,c=arguments;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=this.localStorageService.getItem(this.resource)){e.next=4;break}return e.abrupt("return",[]);case 4:for(a in n=function(e){r=r.filter((function(r){return r[e]===t[e]}))},t)n(a);return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getOne",value:function(){var e=Object(te.a)($.a.mark((function e(t){var r,n,a,c=arguments;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.getMany({id:t});case 3:if(r=e.sent,n=Object(H.a)(r,1),a=n[0]){e.next=8;break}throw new Error("Item ".concat(t," not found"));case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(te.a)($.a.mark((function e(t,r){var n,a,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.localStorageService.getItem(this.resource)||[],a=null===n||void 0===n?void 0:n.find((function(e){return e.id===t}))){e.next=4;break}throw new Error("Item ".concat(t," not found"));case 4:e.t0=$.a.keys(r);case 5:if((e.t1=e.t0()).done){e.next=12;break}if(c=e.t1.value,r.hasOwnProperty(c)){e.next=9;break}return e.abrupt("continue",5);case 9:a[c]=r[c],e.next=5;break;case 12:return this.localStorageService.setItem(this.resource,n),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(te.a)($.a.mark((function e(t){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.localStorageService.getItem(this.resource)||[],t.id=Object(Qe.a)(),this.localStorageService.setItem(this.resource,[].concat(Object(ee.a)(r),[t])),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(te.a)($.a.mark((function e(t){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.localStorageService.getItem(this.resource)||[],this.localStorageService.setItem(this.resource,null===r||void 0===r?void 0:r.filter((function(e){return e.id!==t})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Xe=r(18),_e=r(12),$e=r(4),et=(r(61),r(53)),tt=r(17),rt=(ve=Ke.a.Name("notifications"),ge=Object(tt.JsonProperty)(),ye=Object(tt.JsonProperty)(),xe=Object(tt.JsonProperty)(),me=Object(tt.JsonProperty)(),Se=Object(tt.JsonProperty)(),ke=Object(tt.JsonProperty)(),ve((Ie=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(){var e;Object(De.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(Xe.a)(e,"createdAt",Pe,Object(_e.a)(e)),Object(Xe.a)(e,"title",Ee,Object(_e.a)(e)),Object(Xe.a)(e,"content",ze,Object(_e.a)(e)),Object(Xe.a)(e,"path",Ae,Object(_e.a)(e)),Object(Xe.a)(e,"readAt",Ne,Object(_e.a)(e)),Object(Xe.a)(e,"personId",Ce,Object(_e.a)(e)),e}return r}(et.a),Pe=Object($e.a)(Ie.prototype,"createdAt",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Date}}),Ee=Object($e.a)(Ie.prototype,"title",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=Object($e.a)(Ie.prototype,"content",[xe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=Object($e.a)(Ie.prototype,"path",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=Object($e.a)(Ie.prototype,"readAt",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=Object($e.a)(Ie.prototype,"personId",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=Ie))||we),nt=function(){function e(t){Object(De.a)(this,e),this.notification=t}return Object(Je.a)(e,[{key:"build",value:function(){return this.notification}},{key:"title",value:function(e){return this.notification.title=e,this}},{key:"content",value:function(e){return this.notification.content=e,this}},{key:"path",value:function(e){return this.notification.path=e,this}},{key:"personId",value:function(e){return this.notification.personId=e,this}}],[{key:"init",value:function(){return new e(new rt)}}]),e}(),at=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e,n,a){var c;return Object(De.a)(this,r),(c=t.call(this,Y.b,e)).tokenService=n,c.notificationService=a,c}return Object(Je.a)(r,[{key:"getAllRelatedToUser",value:function(){var e=Object(te.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getMany({userId:this.tokenService.getToken()}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllByOrganization",value:function(){var e=Object(te.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getMany({organizationId:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(te.a)($.a.mark((function e(t){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ye.a)(Object(qe.a)(r.prototype),"create",this).call(this,t);case 2:return n=e.sent,this.notificationService.create(nt.init().title("Hey!").content("It's nice to see you").personId(t.id).build()),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Ze),ct=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e,n,a){var c;return Object(De.a)(this,r),(c=t.call(this,u.c,e)).notificationService=n,c.personService=a,c}return Object(Je.a)(r,[{key:"getAllByOrganization",value:function(e){return this.getMany({organizationId:e})}},{key:"create",value:function(){var e=Object(te.a)($.a.mark((function e(t){var n,a=this;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ye.a)(Object(qe.a)(r.prototype),"create",this).call(this,t);case 2:return n=e.sent,e.next=5,this.personService.getAllByOrganization(t.organizationId);case 5:return e.sent.forEach((function(e){a.notificationService.create(nt.init().title("New project").content("New project *".concat(t.name,"* has been created. Go check it out!")).path("/not-found").personId(e.id).build())})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Ze),it=r(187),ot=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e){return Object(De.a)(this,r),t.call(this,it.a,e)}return r}(Ze),st=r(118),ut=function(){function e(t,r,n){Object(De.a)(this,e),this.httpClient=void 0,this.tokenService=void 0,this.userService=void 0,this.httpClient=t,this.tokenService=r,this.userService=n}return Object(Je.a)(e,[{key:"login",value:function(){var e=Object(te.a)($.a.mark((function e(t,r){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userService.getMany({email:t});case 2:if((n=e.sent).length){e.next=5;break}throw new Error("User not found");case 5:this.tokenService.setToken(n[0].id);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(te.a)($.a.mark((function e(t,r){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userService.getMany({email:t});case 2:if(!e.sent.length){e.next=5;break}throw new Error("User already exists");case 5:return(n=new st.a).email=t,e.next=9,this.userService.create(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAccount",value:function(){var e=Object(te.a)($.a.mark((function e(){var t;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.tokenService.getToken()){e.next=3;break}return e.abrupt("return",null);case 3:return e.abrupt("return",this.userService.getOne(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(te.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.tokenService.clearToken();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),lt=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e){return Object(De.a)(this,r),t.call(this,st.a,e)}return r}(Ze),jt=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e){return Object(De.a)(this,r),t.call(this,C.b,e)}return r}(Ze),bt=r(85),pt=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e){return Object(De.a)(this,r),t.call(this,bt.a,e)}return Object(Je.a)(r,[{key:"getAllByProject",value:function(e){return this.getMany({projectId:e})}}]),r}(Ze),Ot=function(){function e(t){Object(De.a)(this,e),this.fileyClient=t}return Object(Je.a)(e,[{key:"upload",value:function(){var e=Object(te.a)($.a.mark((function e(t){var r,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("file",t),e.next=4,this.fileyClient.post("/upload",r,{headers:{"Content-Type":"multipart/form-data"}});case 4:return n=e.sent,e.abrupt("return",n.headers.location);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),dt=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e){return Object(De.a)(this,r),t.call(this,rt,e)}return Object(Je.a)(r,[{key:"getAllByPerson",value:function(e){return this.getMany({personId:e})}}]),r}(Ze),ht=r(86),ft=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e){return Object(De.a)(this,r),t.call(this,ht.a,e)}return Object(Je.a)(r,[{key:"getAllByPerson",value:function(e){return this.getMany({personId:e})}}]),r}(Ze),vt=function(){function e(t,r,n,a,c,i,o,s,u,l){Object(De.a)(this,e),this.attachmentUploadService=t,this.accountService=r,this.personService=n,this.projectService=a,this.organizationService=c,this.userService=i,this.tagService=o,this.projectTagService=s,this.notificationService=u,this.personSkillService=l}return Object(Je.a)(e,null,[{key:"getHttpClient",value:function(){return this.getHttpClientService().create(Me.dataSource||void 0)}},{key:"getLocalStorageService",value:function(){return new Ge.a}},{key:"getTokenService",value:function(){return new Ve.a(new Ge.a)}},{key:"getHttpClientService",value:function(){return new Be(this.getTokenService())}},{key:"getAttachmentUploadService",value:function(){return new Ot(this.getHttpClientService().create("https://mmm.planet.ee/filey",!1,null))}},{key:"initialize",value:function(){var t=new Ge.a,r=this.getTokenService(),n=new lt(t),a=new dt(t),c=new at(t,r,a);return new e(this.getAttachmentUploadService(),new ut(this.getHttpClient(),r,n),c,new ct(t,a,c),new ot(t),n,new jt(t),new pt(t),a,new ft(t))}}]),e}(),gt=a.a.createContext(vt.initialize());function yt(){return Object(n.useContext)(gt)}var xt=function(e){var t=e.label,r=(e.children,e.name),a=yt().attachmentUploadService,c=Object(ie.e)(),i=c.setValue,o=c.watch;return Object(n.useEffect)((function(){}),[a]),Object(I.jsxs)("div",{children:[t&&Object(I.jsx)(ae.a,{children:t}),Object(I.jsxs)("label",{style:{cursor:"pointer"},children:[Object(I.jsx)(se,{name:r}),Object(I.jsx)(Ue.a,{src:o(r),size:"xl"}),Object(I.jsx)(re.a,{type:"file",accept:"image/*",style:{display:"none"},onChange:function(){var e=Object(te.a)($.a.mark((function e(t){var n,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,a.upload(n);case 5:c=e.sent,i(r,c,{shouldDirty:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})]})},mt=r(84),St=r(23),kt=r(235),wt=function(e){var t,r;return Object(I.jsx)(St.k.MultiValueLabel,Object(S.a)(Object(S.a)({},e),{},{children:Object(I.jsx)(L,{name:null===(t=e.data.tag)||void 0===t?void 0:t.name,type:null===(r=e.data.tag)||void 0===r?void 0:r.type})}))},It=function(e){var t,r;return Object(I.jsx)(St.k.Option,Object(S.a)(Object(S.a)({},e),{},{children:Object(I.jsx)(L,{name:null===(t=e.data.tag)||void 0===t?void 0:t.name,type:null===(r=e.data.tag)||void 0===r?void 0:r.type})}))},Pt=Object(s.a)((function(e){var t=e.tags,r=Object(k.a)(e,["tags"]);return Object(I.jsx)(kt.a,Object(S.a)({isMulti:!0,components:{Option:It,MultiValueLabel:wt},options:t.map((function(e){return{value:e.id,label:e.name,tag:e}}))},r))})),Et=Object(s.a)((function(e){var t=e.projectId,r=j(),a=r.tagStore,c=r.projectTagStore;Object(n.useEffect)((function(){a.loadAll()}),[a]),Object(n.useEffect)((function(){t&&c.loadByProject(t)}),[c,t]);var i=a.tagsForProject;if(!i.length)return null;var o=null;return t&&(o=c.getItemsByProject(t).filter((function(e){var t;return(null===(t=e.tag)||void 0===t?void 0:t.type)!==C.a.POSITION})).map((function(e){var t;return{value:e.tagId,label:null===(t=e.tag)||void 0===t?void 0:t.name,tag:e.tag}}))),Object(I.jsx)(se,{name:"tags",label:"Tags",defaultValue:o,children:Object(I.jsx)(Pt,{tags:i})})})),zt=r(496),At=r(508),Nt=r(223),Ct=Object(s.a)((function(e){var t=e.projectId,r="positions",a=j(),c=a.tagStore,i=a.projectTagStore,o=Object(ie.e)(),s=o.control,u=o.watch,l=o.setValue,p=Object(ie.c)({control:s,name:r}),O=p.fields,d=p.append,h=p.remove;Object(n.useEffect)((function(){c.loadAll()}),[c]),Object(n.useEffect)((function(){t&&i.loadByProject(t)}),[i,t]);var f=t?i.getItemsByProject(t).filter((function(e){var t;return(null===(t=e.tag)||void 0===t?void 0:t.type)===C.a.POSITION})):[];Object(n.useEffect)((function(){f.length>0&&l(r,f.map((function(e){var t=e.tagId,r=e.capacity,n=void 0===r?1:r;return{tagId:t,tag:e.tag,capacity:n}})))}),[f.length]);var v=+u(r).reduce((function(e,t){return e+(+t.capacity||1)}),0).toFixed(2),g=c.positions.filter((function(e){return!O.find((function(t){return t.tagId===e.id}))}));if(!g.length)return null;var y=g.filter((function(e){return!O.find((function(t){return t.tagId===e.id}))}));return Object(I.jsx)("div",{children:Object(I.jsxs)(b.b,{spacing:4,children:[Object(I.jsxs)(b.a,{justifyContent:"space-between",children:[Object(I.jsxs)(zt.a,{size:"sm",children:["Positions (",v,")"]}),Object(I.jsxs)(At.a,{children:[Object(I.jsx)(At.b,{as:V.a,"aria-label":"Add",size:"sm",icon:Object(I.jsx)(R.s,{}),disabled:y.length<=0}),Object(I.jsx)(At.d,{children:y.map((function(e){return Object(I.jsx)(At.c,{onClick:function(){return d({tagId:e.id,capacity:1,tag:e})},children:e.name},e.id)}))})]})]}),O.map((function(e,t){var n;return Object(I.jsxs)(Nt.a,{alignItems:"center",templateColumns:"1fr min-content min-content",gap:2,children:[Object(I.jsxs)("div",{children:[null===(n=e.tag)||void 0===n?void 0:n.name,Object(I.jsx)(se,{name:"".concat(r,"[").concat(t,"].tagId"),defaultValue:e.tagId,children:Object(I.jsx)("input",{type:"hidden"})})]}),Object(I.jsx)(se,{name:"".concat(r,"[").concat(t,"].capacity"),defaultValue:e.capacity,children:Object(I.jsx)(re.a,{placeholder:"Capacity",type:"number",width:"20"})}),Object(I.jsx)(V.a,{"aria-label":"Remove",icon:Object(I.jsx)(R.w,{}),onClick:function(){return h(t)}})]},e.id)}))]})})})),Rt=function(e){var t,r=e.name,n=e.type,a=j(),c=a.projectStore,i=a.organizationStore,o=a.projectTagStore,s=de(r);if(s&&(t=c.getByIdOrLoad(s)),s&&!t)return null;var l=function(){var e=Object(te.a)($.a.mark((function e(t,r){var a,s,l,j,b,p,O;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.dateStart,s=t.dateEnd,l=t.tags,j=t.positions,(b=Object(k.a)(t,["dateStart","dateEnd","tags","positions"])).dateStart=a?x(a):null,b.dateEnd=s?x(s):null,p=[],(O=Object(mt.a)(Object(S.a)({type:n},b),u.c)).organizationId=i.currentOrganizationId,!r){e.next=12;break}return O.id=r,e.next=10,c.update(O);case 10:e.next=14;break;case 12:return e.next=14,c.create(O);case 14:if(O){e.next=16;break}throw new Error("Something went wrong");case 16:return j&&p.push.apply(p,Object(ee.a)(j)),l&&p.push.apply(p,Object(ee.a)(l.map((function(e){var t=new bt.a;return t.tagId=e.value,t})))),e.next=20,o.syncProjectTags(O.id,p);case 20:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return Object(I.jsx)(Re,{size:"xl",name:r,onSubmit:l,header:Object(I.jsxs)(I.Fragment,{children:[s?"Edit":"Add"," ",n]}),defaultValues:t||{},children:Object(I.jsxs)(O.a,{columns:2,spacing:4,children:[Object(I.jsxs)(b.b,{spacing:4,children:[Object(I.jsx)(se,{name:"name",required:!0,label:"Name",children:Object(I.jsx)(re.a,{size:"lg",autoFocus:!0})}),Object(I.jsx)(se,{name:"clientName",label:n===u.b.TRAINING?"Provider":"Client",children:Object(I.jsx)(re.a,{})}),Object(I.jsx)(Et,{projectId:s}),Object(I.jsx)(se,{name:"dateStart",label:"Starts at",children:Object(I.jsx)(Te,{})}),Object(I.jsx)(se,{name:"dateEnd",label:"Ends at",children:Object(I.jsx)(Te,{})}),Object(I.jsx)(xt,{name:"image",label:"Cover image"})]}),Object(I.jsx)(b.b,{children:Object(I.jsx)(Ct,{projectId:s})})]})})};Rt.defaultProps={type:u.b.PROJECT};var Tt=Object(s.a)(Rt),Ut=function(e){var t=e.projects,r=e.type,n=de("highlighted-project-id");return Object(I.jsxs)("div",{children:[Object(I.jsx)(W,{roles:q,children:Object(I.jsx)(Tt,{name:r,type:r})}),t.length?Object(I.jsxs)(b.b,{spacing:4,children:[Object(I.jsx)(b.a,{justifyContent:"flex-end",children:Object(I.jsx)(W,{roles:q,children:Object(I.jsxs)(p.a,{as:A.b,to:"?".concat(r),children:["Add ",r]})})}),Object(I.jsx)(O.a,{columns:3,spacing:4,children:t.map((function(e){return Object(I.jsx)(X,{highlighted:n===e.id,project:e},e.id)}))})]}):Object(I.jsxs)(b.c,{height:"100%",justifyContent:"center",spacing:8,children:[Object(I.jsxs)("div",{children:["No ",r,"s matching filters."]}),Object(I.jsx)(W,{roles:q,children:Object(I.jsxs)(p.a,{colorScheme:"purple",as:A.b,to:"?".concat(r),children:["Create new ",r]})})]})]})},Dt=function(e){var t=e.filters,r=j().projectStore;return Object(n.useEffect)((function(){r.loadByActiveOrganization()}),[]),Object(I.jsx)(Ut,{type:t.type||u.b.PROJECT,projects:r.getFilteredItems(t)})},Jt=Object(s.a)((function(){return Object(I.jsx)(Dt,{filters:{type:u.b.PROJECT,state:u.a.ONGOING}})})),Mt=Object(s.a)((function(){return Object(I.jsx)(Dt,{filters:{type:u.b.PROJECT,state:u.a.UPCOMING}})})),Gt=Object(s.a)((function(){return Object(I.jsx)(Dt,{filters:{type:u.b.PROJECT,state:u.a.ENDED}})})),Lt=r(514),Ft=function(e){var t=e.children,r=Object(k.a)(e,["children"]);return Object(I.jsxs)(Lt.e,Object(S.a)(Object(S.a)({colorScheme:"purple",variant:"unstyled",isLazy:!0},r),{},{children:[Object(I.jsx)(Lt.b,{children:a.a.Children.map(t,(function(e,t){if(a.a.isValidElement(e))return Object(I.jsx)(Lt.a,{mr:4,rounded:"md",border:"1px",borderColor:"transparent",fontWeight:"500",_selected:{borderWidth:1,color:"purple.300",borderColor:"purple.300"},children:e.props.title},e.props.title)}))}),Object(I.jsx)(Lt.d,{children:a.a.Children.map(t,(function(e,t){if(a.a.isValidElement(e))return Object(I.jsx)(Lt.c,{children:e},e.props.title)}))})]}))};var Bt=function(e){e.name;var t=e.children,r=Object(o.g)(),n=Object(o.i)(),c=Object(o.h)().pathname.replace(new RegExp("^".concat(n.url,"/?")),""),i=a.a.Children.map(t,(function(e,t){if(a.a.isValidElement(e))return e.props.title?e.props.title.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""):t.toString()}));return Object(I.jsx)(Ft,{index:c?i.indexOf(c):0,onChange:function(e){return r.push("".concat(n.url,"/").concat(i[e]))},children:t})};Bt.defaultProps={name:"tab"};var Vt=Bt,Yt=function(e){var t=e.children;return Object(I.jsx)(I.Fragment,{children:t})},qt=r(499),Wt=r(500),Ht=r(231),Qt=r.n(Ht),Kt=r(37),Zt=function(e){var t=e.columns,r=e.onFilter,n=e.placeholder;return Object(I.jsx)(re.a,{placeholder:n||"Search..",onChange:function(e){var n;n=e.target.value,r((function(e){if(!n)return!0;var r,a=Object(Kt.a)(t);try{for(a.s();!(r=a.n()).done;){var c=r.value;if(!1!==c.searchable){var i=c.accessor(e);if(i&&["number","string"].includes(typeof i)&&i.toString().toLocaleLowerCase().includes(n.toLocaleLowerCase()))return!0}}}catch(o){a.e(o)}finally{a.f()}return!1}))}})},Xt=function(e){var t=e.data,r=e.columns,a=e.linkTo,c=e.search,i=e.sortable,s=Object(o.g)(),u=Object(n.useState)([function(){return!0}]),l=Object(H.a)(u,2),j=Object(H.a)(l[0],1)[0],b=l[1],p=Object(n.useState)(null),O=Object(H.a)(p,2),d=O[0],h=O[1];return Object(I.jsxs)("div",{children:[c&&Object(I.jsx)("div",{children:Object(I.jsx)(Zt,Object(S.a)({onFilter:function(e){return b([e])},columns:r},c))}),Object(I.jsxs)(qt.a,{variant:"simple",children:[Object(I.jsx)(qt.e,{children:Object(I.jsx)(qt.f,{children:r.map((function(e,t){return Object(I.jsx)(qt.d,{onClick:(void 0===e.sortable?i:e.sortable)?function(){return h({index:t,order:(null===d||void 0===d?void 0:d.index)===t&&"asc"===(null===d||void 0===d?void 0:d.order)?"desc":"asc"})}:void 0,children:Object(I.jsxs)(Wt.a,{alignItems:"center",style:{cursor:"pointer"},children:[e.title,"\xa0",d&&d.index===t&&("desc"===(null===d||void 0===d?void 0:d.order)?Object(I.jsx)(R.c,{}):Object(I.jsx)(R.d,{}))]})},t)}))})}),Object(I.jsx)(qt.b,{children:(d?Qt()(Object(ee.a)(t),r[d.index].accessor,d.order):t||[]).map((function(e,t){return j(e)?Object(I.jsx)(qt.f,{isLink:!!a,onClick:function(){return a&&s.push(a(e))},children:r.map((function(r,n){var a=r.accessor(e);return Object(I.jsx)(qt.c,{onClick:function(e){return r.disableLink&&e.stopPropagation()},style:r.disableLink?{cursor:"default"}:{},children:r.render?r.render(a,e,t):a},n)}))},Object(S.a)({},e).id||t):null}))})]})]})};Xt.defaultProps={sortable:!0};var _t=Xt,$t=function(e){var t,r=e.person;switch(r.role){case Y.a.ADMIN:t="purple";break;case Y.a.USER:t="yellow";break;case Y.a.MANAGER:t="green"}return Object(I.jsx)(z,{colorScheme:t,children:r.humanReadableRole})},er=function(e){var t=e.name,r=e.subTitle,n=e.image,a=e.align,c=Object(k.a)(e,["name","subTitle","image","align"]),i=Object(I.jsx)(Ue.a,{name:t,src:n,size:"sm"});return Object(I.jsxs)(b.a,Object(S.a)(Object(S.a)({spacing:2},c),{},{children:["left"===a&&i,Object(I.jsxs)(h.a,{align:a,children:[Object(I.jsx)(h.a,{fontSize:"sm",children:t}),Object(I.jsx)(h.a,{fontSize:"xs",color:"gray.500",children:r})]}),"right"===a&&i]}))};er.defaultProps={align:"left"};var tr,rr,nr=er,ar=Object(s.a)((function(e){var t=e.person,r=Object(k.a)(e,["person"]);return t?Object(I.jsx)(nr,Object(S.a)({name:t.name,subTitle:t.subTitle,image:t.image},r)):null})),cr=r(501),ir=Object(s.a)((function(e){var t=e.personId,r=j(),a=r.tagStore,c=r.personSkillStore;Object(n.useEffect)((function(){a.loadAll()}),[a]),Object(n.useEffect)((function(){t&&c.loadByPerson(t)}),[c,t]);var i=a.items.filter((function(e){return[C.a.POSITION,C.a.TECHNOLOGY,C.a.LANGUAGE].includes(e.type)}));if(!i.length)return null;var o=null;return t&&(o=c.getItemsByPerson(t).map((function(e){var t;return{value:e.tagId,label:null===(t=e.tag)||void 0===t?void 0:t.name,tag:e.tag}}))),Object(I.jsx)(se,{name:"tags",label:"Skills",defaultValue:o,children:Object(I.jsx)(Pt,{tags:i})})})),or=Object(s.a)((function(e){var t=e.simple,r="person",n=j(),a=n.personStore,c=n.organizationStore,i=n.personSkillStore,o=de(r),s=function(){var e=Object(te.a)($.a.mark((function e(t,r){var n,o,s;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.tags,o=Object(k.a)(t,["tags"]),(s=Object(mt.a)(o,Y.b)).organizationId=c.currentOrganizationId,!r){e.next=9;break}return s.id=r,e.next=7,a.update(s);case 7:e.next=11;break;case 9:return e.next=11,a.create(s);case 11:return console.log(n),e.next=14,i.syncPersonSkills(s.id,n.map((function(e){var t=new ht.a;return t.tagId=e.value,t})));case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),u=Object(S.a)({role:Y.a.USER},o?a.getById(o):{});return Object(I.jsx)(Re,{name:r,onSubmit:s,header:Object(I.jsxs)(I.Fragment,{children:[o?"Edit":"Add"," member"]}),defaultValues:u,children:Object(I.jsxs)(b.b,{spacing:4,children:[Object(I.jsx)(se,{name:"name",label:"Name",required:!0,children:Object(I.jsx)(re.a,{autoFocus:!o})}),!t&&Object(I.jsx)(se,{name:"user.email",label:"Email",children:Object(I.jsx)(re.a,{type:"email"})}),Object(I.jsx)(se,{name:"position",label:"Position",children:Object(I.jsx)(re.a,{})}),!t&&Object(I.jsx)(se,{name:"role",label:"Role",children:Object(I.jsxs)(cr.a,{children:[Object(I.jsx)("option",{value:Y.a.ADMIN,children:"Admin"}),Object(I.jsx)("option",{value:Y.a.MANAGER,children:"Manager"}),Object(I.jsx)("option",{value:Y.a.USER,children:"User"})]})}),Object(I.jsx)(ir,{personId:o}),Object(I.jsx)(xt,{label:"Image",name:"image"})]})})})),sr=function(e){var t=e.name,r=j().personStore,n=de(t);if(!n)return null;var a=function(){var e=Object(te.a)($.a.mark((function e(t,n){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.delete(n);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),c=r.getById(n);return c?Object(I.jsx)(Re,{name:t,onSubmit:a,header:"Delete member",children:Object(I.jsx)(b.b,{spacing:4,children:Object(I.jsx)(se,{name:"confirmation",label:'Type "'.concat(c.name,'" to delete'),required:!0,validate:function(e){return e===c.name||"Invalid"},children:Object(I.jsx)(re.a,{autoFocus:!0})})})}):null},ur=function(e){var t=Object.assign({},e);return Object(I.jsx)(Z,Object(S.a)({label:"Delete",icon:Object(I.jsx)(R.w,{})},t))},lr=Object(s.a)((function(){var e=j().personStore;return Object(n.useEffect)((function(){e.loadCurrentOrganizationPersons()}),[e]),Object(I.jsxs)("div",{children:[Object(I.jsxs)(W,{roles:q,children:[Object(I.jsx)(or,{}),Object(I.jsx)(sr,{name:"person.delete"})]}),Object(I.jsxs)(b.a,{spacing:4,children:[Object(I.jsx)(zt.a,{size:"md",children:"List of users"}),Object(I.jsx)(W,{roles:q,children:Object(I.jsx)(V.a,{variant:"ghost",as:A.b,to:"?person","aria-label":"Add",icon:Object(I.jsx)(R.y,{})})})]}),Object(I.jsx)(_t,{data:e.currentOrganizationPersons,columns:[{accessor:function(e){return e.name},title:"Name",render:function(e,t){return Object(I.jsx)(ar,{person:t})}},{accessor:function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.email},title:"Email"},{accessor:function(e){return e.humanReadableRole},title:"Account",render:function(e,t){return Object(I.jsx)($t,{person:t})}},{accessor:function(){return null},render:function(t,r){return r.id===e.currentPerson.id?null:Object(I.jsxs)(b.a,{spacing:0,justifyContent:"flex-end",children:[Object(I.jsx)(Z,{to:"?person=".concat(r.id)}),Object(I.jsx)(ur,{to:"?person.delete=".concat(r.id)})]})}}]})]})})),jr=function(e){var t=e.onSubmit,r=e.organization;return Object(I.jsx)(Re,{header:Object(I.jsx)(I.Fragment,{children:"Edit organization"}),name:"organization",onSubmit:t,defaultValues:r,successMessage:"Organization saved successfully!",children:Object(I.jsxs)(b.b,{spacing:4,children:[Object(I.jsx)(se,{name:"name",required:!0,label:"Organization name",children:Object(I.jsx)(re.a,{})}),Object(I.jsx)(xt,{label:"Logo",name:"logo"}),Object(I.jsx)(se,{name:"address",label:"Full address",children:Object(I.jsx)(re.a,{})}),Object(I.jsx)(se,{name:"vatNumber",label:"VAT number",children:Object(I.jsx)(re.a,{})}),Object(I.jsx)(se,{name:"email",label:"General e-mail address",children:Object(I.jsx)(re.a,{})}),Object(I.jsx)(se,{name:"industry",label:"Industry",children:Object(I.jsx)(re.a,{})}),Object(I.jsx)(se,{name:"registryCode",label:"Registry code",children:Object(I.jsx)(re.a,{})}),Object(I.jsx)(se,{name:"phone",label:"General phone number",children:Object(I.jsx)(re.a,{})})]})})},br=Object(s.a)((function(){var e=j().organizationStore,t=e.currentOrganization;if(!t)return null;var r=function(){var r=Object(te.a)($.a.mark((function r(n){return $.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.update(Object(S.a)(Object(S.a)({},t),n));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(I.jsxs)("div",{children:[Object(I.jsx)(W,{roles:q,children:Object(I.jsx)(jr,{onSubmit:r,organization:t})}),Object(I.jsxs)(b.a,{justifyContent:"space-between",children:[Object(I.jsx)(b.c,{spacing:4,children:Object(I.jsxs)(b.a,{spacing:4,children:[Object(I.jsx)(Ue.a,{src:t.logo,name:t.name}),Object(I.jsxs)("div",{children:[Object(I.jsx)(zt.a,{size:"md",children:t.name}),t.industry]})]})}),Object(I.jsx)(Z,{to:"?organization"})]})]})})),pr=(tr={},Object(N.a)(tr,C.a.POSITION,"Position"),Object(N.a)(tr,C.a.LANGUAGE,"Language"),Object(N.a)(tr,C.a.TECHNOLOGY,"Technology"),Object(N.a)(tr,C.a.LOCATION,"Location"),Object(N.a)(tr,C.a.PROJECT_TYPE,"Project"),tr),Or=function(e){var t=e.value,r=e.onSelect;return Object(I.jsxs)(At.a,{children:[Object(I.jsx)(At.b,{as:p.a,variant:"ghost",rightIcon:Object(I.jsx)(R.i,{}),children:Object(I.jsx)(L,{name:pr[t],type:t})}),Object(I.jsx)(At.d,{children:[C.a.POSITION,C.a.LANGUAGE,C.a.TECHNOLOGY].filter((function(e){return e!==t})).map((function(e){return Object(I.jsx)(At.c,{onClick:function(){return r(e)},children:Object(I.jsx)(L,{name:pr[e],type:e})},e)}))})]})},dr=Object(s.a)((function(){var e=j(),t=e.personStore,r=e.personSkillStore,a=e.tagStore,c=de("type")||C.a.POSITION,i=Object(o.g)();return Object(n.useEffect)((function(){a.loadAll().then((function(){return t.loadCurrentOrganizationPersons()})).then((function(){return r.loadAll()}))}),[t]),Object(I.jsxs)("div",{children:[Object(I.jsxs)(b.a,{spacing:4,justifyContent:"space-between",children:[Object(I.jsx)(zt.a,{size:"md",children:"Company skillset"}),Object(I.jsx)(Or,{value:c,onSelect:function(e){return i.push("?type=".concat(e))}})]}),Object(I.jsx)(O.a,{columns:3,spacing:4,mt:4,children:a.getFilteredItems({type:c}).map((function(e){var n=t.currentOrganizationPersons.filter((function(t){return r.getFilteredItems({tagId:e.id,personId:t.id}).length>0}));return Object(I.jsx)("div",{children:Object(I.jsxs)(w.a,{borderWidth:"1px",p:2,rounded:"md",children:[Object(I.jsx)(h.a,{color:"gray.500",fontSize:"xs",fontWeight:"500",casing:"uppercase",mb:2,children:e.name}),Object(I.jsx)(b.b,{spacing:2,children:n.map((function(e){return Object(I.jsx)(ar,{person:e,subTitle:e.position},e.id)}))}),0===n.length&&Object(I.jsx)(h.a,{children:"-"})]})},e.id)}))})]})})),hr=Object(s.a)((function(){return j().organizationStore.currentOrganization?Object(I.jsx)(P,{children:Object(I.jsxs)(Vt,{children:[Object(I.jsx)(Yt,{title:"General information",children:Object(I.jsx)(br,{})}),Object(I.jsx)(Yt,{title:"Users & Roles",children:Object(I.jsx)(lr,{})}),Object(I.jsx)(Yt,{title:"Skillset",children:Object(I.jsx)(dr,{})}),Object(I.jsx)(Yt,{title:"Billing",children:"Coming soon!"})]})}):null})),fr=function(){var e=Object(o.i)(),t=j().projectStore,r=e.params.id,a=t.getById(r);return Object(n.useEffect)((function(){t.loadOne(r)}),[r]),a?Object(I.jsxs)(P,{children:[Object(I.jsx)(W,{roles:q,children:Object(I.jsx)(Tt,{name:a.type,type:a.type})}),Object(I.jsxs)(b.a,{justifyContent:"space-between",children:[Object(I.jsx)(zt.a,{children:a.name}),Object(I.jsx)(Z,{size:"sm",to:"?".concat(a.type,"=").concat(a.id)})]})]}):null},vr=Object(s.a)((function(e){var t=e.person;return t?Object(I.jsxs)("div",{children:[Object(I.jsx)(W,{roles:q,children:Object(I.jsx)(or,{simple:!0})}),Object(I.jsxs)(b.a,{spacing:4,children:[Object(I.jsx)(Ue.a,{src:t.image,name:t.name}),Object(I.jsxs)(b.b,{spacing:0,children:[Object(I.jsx)(zt.a,{size:"md",children:t.name}),Object(I.jsx)(h.a,{children:t.subTitle})]}),Object(I.jsx)(Z,{to:"?person=".concat(t.id)})]})]}):null})),gr=Object(s.a)((function(){var e=j().tagStore;return Object(n.useEffect)((function(){e.loadAll()}),[]),Object(I.jsx)("div",{children:e.skills.map((function(e){return Object(I.jsx)(L,{name:e.name,type:e.type},e.id)}))})})),yr=Object(s.a)((function(e){var t=e.person;return t?Object(I.jsx)(P,{children:Object(I.jsxs)(Vt,{children:[Object(I.jsx)(Yt,{title:"General information",children:Object(I.jsx)(vr,{person:t})}),Object(I.jsx)(Yt,{title:"Skills",children:Object(I.jsx)(gr,{})})]})}):null})),xr=Object(s.a)((function(){var e=j().personStore.currentPerson;return e?Object(I.jsx)(yr,{person:e}):null})),mr=function(){return Object(I.jsx)(P,{children:Object(I.jsx)(b.c,{height:"100%",justifyContent:"center",spacing:8,children:Object(I.jsx)("div",{children:"Coming soon!"})})})},Sr=Object(s.a)((function(){return Object(I.jsx)(Dt,{filters:{type:u.b.TRAINING,state:u.a.UPCOMING}})}));!function(e){e.USER_MENU="User menu",e.PROJECTS="Projects",e.MARKETPLACE="Marketplace",e.NONE="None"}(rr||(rr={}));var kr=[{path:"/projects/active",title:"Active",component:Jt,icon:Object(I.jsx)(R.r,{}),placement:rr.PROJECTS},{path:"/projects/scheduled",title:"Scheduled",component:Mt,icon:Object(I.jsx)(R.h,{}),placement:rr.PROJECTS},{path:"/projects/ended",title:"History",component:Gt,icon:Object(I.jsx)(R.l,{}),placement:rr.PROJECTS},{path:"/projects/view/:id",title:"View project",component:fr,placement:rr.NONE},{path:"/marketplace/requests",title:"Requests",component:mr,icon:Object(I.jsx)(R.k,{}),placement:rr.MARKETPLACE},{path:"/marketplace/trainings",title:"Trainings",component:Sr,icon:Object(I.jsx)(R.e,{}),placement:rr.MARKETPLACE},{path:"/profile/organization",title:"Organization profile",component:hr,icon:Object(I.jsx)(R.g,{}),placement:rr.USER_MENU},{path:"/profile/me",title:"My profile",component:xr,icon:Object(I.jsx)(R.x,{}),placement:rr.USER_MENU},{path:"/create-organization",title:"Create organization",placement:rr.USER_MENU},{path:"/logout",title:"Sign out",placement:rr.USER_MENU}],wr=r(510),Ir=function(){return Object(I.jsx)(wr.a,{label:"Pls replace me \ud83d\ude09",children:Object(I.jsx)(A.b,{to:"/",style:{width:"100%"},children:Object(I.jsx)("img",{src:"data:image/png;base64,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",width:"100%",alt:"Logo"})})})},Pr=function(e){var t=e.children,r=e.navigation,n=e.topRight;return Object(I.jsxs)(Nt.a,{h:"100vh",templateRows:"auto auto 1fr auto",templateColumns:"auto 1fr auto",gap:4,bg:"#F8F8F8",minWidth:"1024px",children:[Object(I.jsx)(Nt.b,{rowSpan:4,colSpan:1,bg:"white",boxShadow:"xl",p:8,children:Object(I.jsxs)(b.b,{spacing:8,minWidth:200,children:[Object(I.jsx)("div",{style:{width:100},children:Object(I.jsx)(Ir,{})}),r]})}),Object(I.jsx)(Nt.b,{colSpan:2}),Object(I.jsx)(Nt.b,{bg:"white",borderRadius:"md",boxShadow:"lg",children:Object(I.jsx)(b.a,{justify:"flex-end",spacing:2,children:n})}),Object(I.jsx)(Nt.b,{}),Object(I.jsx)(Nt.b,{children:t}),Object(I.jsx)(Nt.b,{})]})},Er=function(e){var t=e.title,r=e.children;return Object(I.jsxs)("div",{children:[Object(I.jsx)(h.a,{mt:6,color:"gray.400",fontSize:"xs",casing:"uppercase",children:t}),r]})},zr=function(e){var t=e.to,r=e.title,n=e.icon;return Object(I.jsxs)(b.a,{as:A.c,borderRadius:"xs",activeStyle:{backgroundColor:"#E9FBFF"},to:t,spacing:4,py:1,pl:4,children:[n,Object(I.jsx)(h.a,{fontSize:"sm",pr:6,children:r})]})},Ar=function(e){var t=e.handle,r=e.children;return Object(I.jsxs)(At.a,{placement:"bottom-end",isLazy:!0,offset:[-7,0],children:[Object(I.jsx)(At.b,{p:4,children:t}),Object(I.jsx)(At.d,{children:a.a.Children.map(r,(function(e,t){return Object(I.jsx)(At.c,{justifyContent:"flex-end",children:e},t)}))})]})},Nr=r(232),Cr=r.n(Nr),Rr=r(502),Tr=r(506),Ur=Object(s.a)((function(e){var t=e.notifications,r=j().notificationStore;return Object(I.jsxs)(he,{name:"notifications",children:[Object(I.jsx)(be.f,{children:"Notifications"}),Object(I.jsx)(be.b,{children:Object(I.jsxs)(b.b,{spacing:2,children:[null===t||void 0===t?void 0:t.map((function(e){var t=m(e.createdAt);return Object(I.jsx)("div",{children:Object(I.jsxs)(Rr.a,{opacity:e.readAt?.6:1,p:"5",borderWidth:"1px",rounded:"md",children:[Object(I.jsx)(h.a,{fontSize:"xs",color:"gray.500",as:"time",dateTime:t,title:t,children:Object(Tr.a)(e.createdAt,{addSuffix:!0})}),Object(I.jsx)(zt.a,{size:"sm",my:"2",children:Object(I.jsx)(Rr.b,{as:A.b,to:e.path,onClick:function(){r.markAsRead(e)},children:e.title})}),Object(I.jsx)(h.a,{fontSize:"xs",children:Object(I.jsx)(Cr.a,{children:e.content})})]})},e.id)})),t.length<=0&&"No notifications"]})})]})}));var Dr=Object(s.a)((function(){var e=j().notificationStore,t=e.currentPersonNotifications,r=e.currentPersonUnreadNotificationsCount,a=r>0?"".concat(r," unread notification").concat(1!==r?"s":""):"No unread notifications";return Object(n.useEffect)((function(){e.loadByActivePerson()}),[]),function(e,t){var r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=e})),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){"undefined"!==typeof(null===r||void 0===r?void 0:r.current)&&(null===r||void 0===r||r.current())}),t);return function(){return clearInterval(e)}}}),[t])}((function(){e.loadByActivePerson()}),5e3),Object(I.jsx)(wr.a,{label:a,children:Object(I.jsxs)("div",{children:[Object(I.jsx)(Ur,{notifications:t}),Object(I.jsx)(Ue.a,{size:"sm",bg:"white",as:A.b,to:"?notifications","aria-label":"Notifications",icon:Object(I.jsx)(R.u,{fontSize:"1.5rem"}),children:r>0&&Object(I.jsx)(Ue.b,{borderColor:"papayawhip",bg:"tomato",boxSize:"1em"})})]})})})),Jr=Object(s.a)((function(e){var t=e.routes,r=j().personStore,a=r.currentUserNonActivePersons,c=r.currentPerson;return Object(n.useEffect)((function(){r.loadUserRelated()}),[]),Object(I.jsx)(Pr,{navigation:Object(I.jsx)("div",{children:[rr.PROJECTS,rr.MARKETPLACE].map((function(e){var r=t.filter((function(t){return t.placement===e}));return r.length?Object(I.jsx)(Er,{title:e,children:r.map((function(e){return Object(I.jsx)(zr,{to:e.path,title:e.title,icon:e.icon},e.path)}))},e):null}))}),topRight:Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Dr,{}),Object(I.jsxs)(Ar,{handle:Object(I.jsx)(ar,{align:"right",person:c}),children:[a.map((function(e){return Object(I.jsx)(A.b,{to:"/switch-person/".concat(e.id),children:Object(I.jsx)(ar,{align:"right",person:e})},e.id)})),t.filter((function(e){return e.placement===rr.USER_MENU})).map((function(e){return Object(I.jsxs)(b.a,{as:A.b,to:e.path,spacing:2,children:[Object(I.jsx)(h.a,{fontSize:"sm",pr:2,children:e.title}),e.icon]},e.path)}))]})]}),children:Object(I.jsx)(o.d,{children:t.filter((function(e){return!!e.component})).map((function(e){return Object(I.jsx)(o.b,{path:e.path,component:e.component},e.path)}))})})})),Mr=function(e){var t=e.children,r=e.forbiddenAction,a=j().accountStore,c=a.authenticated;return Object(n.useEffect)((function(){null===c&&a.checkAuthentication()}),[c,a]),null===c?null:c?Object(I.jsx)(I.Fragment,{children:t}):r};Mr.defaultProps={forbiddenAction:Object(I.jsx)(o.a,{to:"/"})};var Gr=Object(s.a)(Mr),Lr=r(503),Fr=function(){return Object(I.jsx)(Lr.a,{children:Object(I.jsxs)(b.c,{mt:4,spacing:4,children:[Object(I.jsx)(Ir,{}),Object(I.jsx)(h.a,{children:"I'm glad you made an account. What would you like to do next?"}),Object(I.jsxs)("div",{children:[Object(I.jsx)(p.a,{as:A.b,to:"/create-organization",colorScheme:"purple",children:"I'd like to create an organization"})," ",Object(I.jsx)(p.a,{as:A.b,to:"/logout",children:"I'd like to leave"})]})]})})},Br=Object(s.a)((function(e){var t=e.children,r=j().personStore;return Object(n.useEffect)((function(){r.loadUserRelated()}),[r]),r.currentPerson?Object(I.jsx)(I.Fragment,{children:t}):Object(I.jsx)(Fr,{})})),Vr=function(){var e="2021-03-11 23:49:24";return Object(I.jsx)(Lr.a,{children:Object(I.jsxs)(b.c,{mt:4,spacing:10,children:[Object(I.jsx)(Ir,{}),Object(I.jsx)("div",{children:Object(I.jsx)(p.a,{as:A.b,to:"/start",colorScheme:"purple",children:"Start"})}),Object(I.jsx)("div",{children:Object(I.jsxs)(h.a,{fontSize:"xs",mt:20,children:["Built at ",e]})})]})})},Yr=function(){var e=j().accountStore;return Object(n.useEffect)((function(){e.logout()}),[e]),Object(I.jsx)(Gr,{})},qr=function(){var e=j().accountStore,t=yt().accountService,r=Object(o.g)();return Object(n.useEffect)((function(){var n=prompt("Please provide your email");n?e.login(n,"1").catch((function(){return console.info("Login failed, creating account..."),!0})).then((function(e){if(e)return t.register(n,"");console.info("User already exists")})).then((function(){return console.info("Account created, logging in"),e.login(n,"")})).then((function(){r.replace("/app")})).catch((function(e){console.error(e),alert("Failure")})):r.replace("/")})),null},Wr=function(){return Object(I.jsx)(Gr,{forbiddenAction:Object(I.jsx)(qr,{}),children:Object(I.jsx)(o.a,{to:"/app"})})},Hr=function(e){var t=e.onSubmit,r=e.currentPerson;return Object(I.jsx)(le,{onSubmit:t,children:function(e){var t=e.watch,n=t("organization.name");return Object(I.jsxs)(b.c,{spacing:8,mt:4,children:[Object(I.jsx)("div",{style:{width:150},children:Object(I.jsx)(Ir,{})}),Object(I.jsx)(se,{name:"organization.name",required:!0,children:Object(I.jsx)(re.a,{size:"lg",variant:"flushed",placeholder:"Organization name",autoFocus:!0})}),n&&Object(I.jsx)(v.a,{in:!0,style:{width:"100%"},children:Object(I.jsx)(se,{name:"person.name",required:!0,defaultValue:(null===r||void 0===r?void 0:r.name)||"",children:Object(I.jsx)(re.a,{name:"person.name",variant:"flushed",placeholder:"Your name"})})}),t("person.name")&&Object(I.jsx)(v.a,{in:!0,style:{width:"100%"},children:Object(I.jsx)(se,{name:"person.position",children:Object(I.jsx)(re.a,{variant:"flushed",placeholder:"Your position in "+n})})}),Object(I.jsx)(Oe,{children:"Create"})]})}})},Qr=function(){var e=j(),t=e.organizationStore,r=e.personStore,a=e.accountStore,c=Object(o.g)();Object(n.useEffect)((function(){a.checkAuthentication()}),[]);var i=function(){var e=Object(te.a)($.a.mark((function e(n){var i,o,s,u;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.person,o=n.organization,e.next=3,t.create(o);case 3:return s=e.sent,e.next=6,r.create(Object(S.a)({capacity:1,role:Y.a.ADMIN,organizationId:s.id,userId:a.authenticatedUser.id},i));case 6:u=e.sent,r.selectPerson(u.id),c.push("/app");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsx)(Lr.a,{children:Object(I.jsx)(Hr,{onSubmit:i,currentPerson:r.currentPerson})})},Kr=function(){var e=Object(o.i)(),t=Object(o.g)(),r=j().personStore,a=e.params.id;return Object(n.useEffect)((function(){r.selectPerson(a),t.goBack()}),[a]),Object(I.jsx)(I.Fragment,{})};var Zr,Xr,_r,$r,en=function(){return Object(I.jsxs)(o.d,{children:[Object(I.jsx)(o.b,{exact:!0,path:"/",component:Vr}),Object(I.jsx)(o.b,{path:"/logout",component:Yr}),Object(I.jsx)(o.b,{path:"/start",component:Wr}),Object(I.jsx)(o.b,{path:"/create-organization",component:Qr}),Object(I.jsx)(o.b,{path:"/switch-person/:id",component:Kr}),Object(I.jsx)(o.b,{path:"*",children:Object(I.jsx)(Gr,{children:Object(I.jsx)(Br,{children:Object(I.jsx)(Jr,{routes:kr})})})})]})},tn=r(511),rn=r(7);!function(e){e[e.IDLE=0]="IDLE",e[e.PENDING=1]="PENDING",e[e.RESOLVED=2]="RESOLVED",e[e.REJECTED=3]="REJECTED"}($r||($r={}));var nn,an,cn,on,sn,un,ln,jn,bn,pn,On,dn,hn,fn=(Zr=function(){function e(t,r){Object(De.a)(this,e),this.service=void 0,this.accountStore=void 0,Object(Xe.a)(this,"byId",Xr,this),Object(Xe.a)(this,"_status",_r,this),this.service=t,this.accountStore=r,Object(rn.n)(this)}return Object(Je.a)(e,[{key:"loadAll",value:function(){var e=Object(te.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(this.service.getMany());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadOne",value:function(){var e=Object(te.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setOneEventually(this.service.getOne(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(te.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=4;break}return e.abrupt("return",this.create(t));case 4:return e.abrupt("return",this.update(t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(te.a)($.a.mark((function e(t){var r,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getById(t.id),this.storeItem(t),e.prev=2,n=this.service.update(t.id,this.sanitizeBeforeSave(t)),e.next=6,this.setOneEventually(n);case 6:return e.next=8,n;case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),this.storeItem(r),e.t0;case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(te.a)($.a.mark((function e(t){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.service.create(this.sanitizeBeforeSave(t)),e.next=3,this.setOneEventually(r);case 3:return e.next=5,r;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(te.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setStatus($r.PENDING),e.prev=1,e.next=4,this.service.delete(t);case 4:delete this.byId[t.toString()],this.setStatus($r.RESOLVED),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.setStatus($r.REJECTED);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getById",value:function(e){return this.byId[e.toString()]||null}},{key:"getByIdOrLoad",value:function(e){var t=this.getById(e);return t||this.loadOne(e),t}},{key:"getItems",value:function(){var e=this;return Object.values(this.byId).map((function(t){return e.prepareForRetrieving(t)})).filter(Boolean)}},{key:"getFilteredItems",value:function(e){return this.items.filter((function(t){for(var r in console.log(t),e)if(e.hasOwnProperty(r)&&t[r]!==e[r])return!1;return!0}))}},{key:"items",get:function(){return this.getItems()}},{key:"storeItem",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach((function(t){e.byId[t.id.toString()]=e.prepareForStoring(t)}))}},{key:"prepareForStoring",value:function(e){return e}},{key:"prepareForRetrieving",value:function(e){return e}},{key:"sanitizeBeforeSave",value:function(e){return e}},{key:"setStatus",value:function(e){this._status=e}},{key:"status",get:function(){return this._status}},{key:"setManyEventually",value:function(){var e=Object(te.a)($.a.mark((function e(t){var r,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setStatus($r.PENDING),e.prev=1,e.next=4,t;case 4:r=e.sent,this.storeItem.apply(this,Object(ee.a)(r)),this.setStatus($r.RESOLVED),e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(1),401!==(null===(n=e.t0.response)||void 0===n?void 0:n.status)){e.next=14;break}return e.next=14,this.accountStore.logout();case 14:throw this.setStatus($r.REJECTED),e.t0;case 16:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setOneEventually",value:function(){var e=Object(te.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(t.then((function(e){return[e]})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Xr=Object($e.a)(Zr.prototype,"byId",[rn.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_r=Object($e.a)(Zr.prototype,"_status",[rn.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $r.IDLE}}),Object($e.a)(Zr.prototype,"items",[rn.g],Object.getOwnPropertyDescriptor(Zr.prototype,"items"),Zr.prototype),Object($e.a)(Zr.prototype,"storeItem",[rn.f],Object.getOwnPropertyDescriptor(Zr.prototype,"storeItem"),Zr.prototype),Object($e.a)(Zr.prototype,"setStatus",[rn.f],Object.getOwnPropertyDescriptor(Zr.prototype,"setStatus"),Zr.prototype),Object($e.a)(Zr.prototype,"status",[rn.g],Object.getOwnPropertyDescriptor(Zr.prototype,"status"),Zr.prototype),Zr),vn=(an=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e,n){var a;return Object(De.a)(this,r),(a=t.call(this,e.personService,n.accountStore)).personService=void 0,a.rootStore=void 0,a.localStorageService=void 0,Object(Xe.a)(a,"selectedPersonId",cn,Object(_e.a)(a)),a.personService=e.personService,a.rootStore=n,a.localStorageService=new Ge.a,a.selectedPersonId=a.localStorageService.getItem("selectedPersonId"),Object(rn.n)(Object(_e.a)(a)),a}return Object(Je.a)(r,[{key:"loadUserRelated",value:function(){var e=Object(te.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(this.personService.getAllRelatedToUser());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadByOrganization",value:function(){var e=Object(te.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(this.personService.getAllByOrganization(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareForStoring",value:function(e){var t=new gn(this.rootStore).fromObject(e);return Object(Ye.a)(Object(qe.a)(r.prototype),"prepareForStoring",this).call(this,t)}},{key:"currentUserPersons",get:function(){var e,t=null===(e=this.accountStore.authenticatedUser)||void 0===e?void 0:e.id;return t?this.items.filter((function(e){return e.userId===t})):[]}},{key:"currentUserNonActivePersons",get:function(){var e=this;return this.currentUserPersons.filter((function(t){return t.id!==e.currentPerson.id}))}},{key:"currentPerson",get:function(){var e=this;return this.selectedPersonId&&this.currentUserPersons.find((function(t){return t.id===e.selectedPersonId}))||this.currentUserPersons[0]||null}},{key:"currentOrganizationPersons",get:function(){var e=this;return this.getItems().filter((function(t){return t.organizationId===e.rootStore.organizationStore.currentOrganizationId}))}},{key:"loadCurrentOrganizationPersons",value:function(){var e=Object(te.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadByOrganization(this.rootStore.organizationStore.currentOrganizationId);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"selectPerson",value:function(e){this.selectedPersonId=e,this.localStorageService.setItem("selectedPersonId",e)}}]),r}(fn),cn=Object($e.a)(an.prototype,"selectedPersonId",[rn.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object($e.a)(an.prototype,"currentUserPersons",[rn.g],Object.getOwnPropertyDescriptor(an.prototype,"currentUserPersons"),an.prototype),Object($e.a)(an.prototype,"currentUserNonActivePersons",[rn.g],Object.getOwnPropertyDescriptor(an.prototype,"currentUserNonActivePersons"),an.prototype),Object($e.a)(an.prototype,"currentPerson",[rn.g],Object.getOwnPropertyDescriptor(an.prototype,"currentPerson"),an.prototype),Object($e.a)(an.prototype,"currentOrganizationPersons",[rn.g],Object.getOwnPropertyDescriptor(an.prototype,"currentOrganizationPersons"),an.prototype),Object($e.a)(an.prototype,"loadCurrentOrganizationPersons",[rn.f],Object.getOwnPropertyDescriptor(an.prototype,"loadCurrentOrganizationPersons"),an.prototype),Object($e.a)(an.prototype,"selectPerson",[rn.f],Object.getOwnPropertyDescriptor(an.prototype,"selectPerson"),an.prototype),an),gn=(nn=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e){var n;return Object(De.a)(this,r),(n=t.call(this)).rootStore=void 0,n.rootStore=e,n}return Object(Je.a)(r,[{key:"organization",get:function(){return this.organizationId&&!this._organization?this.rootStore.organizationStore.getByIdOrLoad(this.organizationId):this._organization}}]),r}(Y.b),Object($e.a)(nn.prototype,"organization",[rn.g],Object.getOwnPropertyDescriptor(nn.prototype,"organization"),nn.prototype),nn),yn=(on=function(){function e(t){Object(De.a)(this,e),this.accountService=void 0,Object(Xe.a)(this,"authenticatedUser",sn,this),Object(Xe.a)(this,"authenticated",un,this),this.accountService=t,Object(rn.n)(this)}return Object(Je.a)(e,[{key:"login",value:function(){var e=Object(te.a)($.a.mark((function e(t,r){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accountService.login(t,r);case 2:return e.next=4,this.checkAuthentication();case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(te.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accountService.logout();case 2:this.setAuthenticatedUser(null);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkAuthentication",value:function(){var e=Object(te.a)($.a.mark((function e(){var t;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accountService.getAccount();case 2:t=e.sent,this.setAuthenticatedUser(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setAuthenticatedUser",value:function(e){this.authenticatedUser=e,this.authenticated=!!e}}]),e}(),sn=Object($e.a)(on.prototype,"authenticatedUser",[rn.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),un=Object($e.a)(on.prototype,"authenticated",[rn.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object($e.a)(on.prototype,"setAuthenticatedUser",[rn.f],Object.getOwnPropertyDescriptor(on.prototype,"setAuthenticatedUser"),on.prototype),on),xn=(jn=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e,n){var a;return Object(De.a)(this,r),(a=t.call(this,e.projectService,n.accountStore)).projectService=void 0,a.rootStore=void 0,a.projectService=e.projectService,a.rootStore=n,a}return Object(Je.a)(r,[{key:"prepareForStoring",value:function(e){return Object(Ye.a)(Object(qe.a)(r.prototype),"prepareForStoring",this).call(this,new mn(this.rootStore).fromObject(e))}},{key:"loadByOrganization",value:function(){var e=Object(te.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(this.projectService.getAllByOrganization(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadByActiveOrganization",value:function(){var e=Object(te.a)($.a.mark((function e(){var t,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(t=this.rootStore.personStore.currentPerson)||void 0===t?void 0:t.organizationId){e.next=3;break}throw new Error("No organization selected");case 3:return e.abrupt("return",this.loadByOrganization(r));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"projects",get:function(){return this.items.filter((function(e){return e.type===u.b.PROJECT||!e.type}))}},{key:"trainings",get:function(){return this.items.filter((function(e){return e.type===u.b.TRAINING}))}},{key:"currentOrganizationProjects",get:function(){var e=this.rootStore.organizationStore.currentOrganizationId;return e?this.items.filter((function(t){return t.organizationId===e})):[]}},{key:"upcomingProjects",get:function(){return this.currentOrganizationProjects.filter((function(e){return!e.hasStarted()}))}},{key:"ongoingProjects",get:function(){return this.currentOrganizationProjects.filter((function(e){return e.isOngoing()}))}},{key:"endedProjects",get:function(){return this.currentOrganizationProjects.filter((function(e){return e.hasStarted()&&e.hasEnded()}))}}]),r}(fn),Object($e.a)(jn.prototype,"projects",[rn.g],Object.getOwnPropertyDescriptor(jn.prototype,"projects"),jn.prototype),Object($e.a)(jn.prototype,"trainings",[rn.g],Object.getOwnPropertyDescriptor(jn.prototype,"trainings"),jn.prototype),Object($e.a)(jn.prototype,"currentOrganizationProjects",[rn.g],Object.getOwnPropertyDescriptor(jn.prototype,"currentOrganizationProjects"),jn.prototype),Object($e.a)(jn.prototype,"upcomingProjects",[rn.g],Object.getOwnPropertyDescriptor(jn.prototype,"upcomingProjects"),jn.prototype),Object($e.a)(jn.prototype,"ongoingProjects",[rn.g],Object.getOwnPropertyDescriptor(jn.prototype,"ongoingProjects"),jn.prototype),Object($e.a)(jn.prototype,"endedProjects",[rn.g],Object.getOwnPropertyDescriptor(jn.prototype,"endedProjects"),jn.prototype),jn),mn=(ln=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e){var n;return Object(De.a)(this,r),(n=t.call(this)).rootStore=void 0,n.rootStore=e,n}return Object(Je.a)(r,[{key:"organization",get:function(){return this.organizationId&&!this._organization?this.rootStore.organizationStore.getByIdOrLoad(this.organizationId):this._organization}}]),r}(u.c),Object($e.a)(ln.prototype,"organization",[rn.g],Object.getOwnPropertyDescriptor(ln.prototype,"organization"),ln.prototype),ln),Sn=(bn=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e,n){var a;return Object(De.a)(this,r),(a=t.call(this,e.organizationService,n.accountStore)).rootStore=void 0,a.rootStore=n,a}return Object(Je.a)(r,[{key:"currentOrganizationId",get:function(){var e;return null===(e=this.rootStore.personStore.currentPerson)||void 0===e?void 0:e.organizationId}},{key:"currentOrganization",get:function(){return this.currentOrganizationId&&this.getByIdOrLoad(this.currentOrganizationId)}}]),r}(fn),Object($e.a)(bn.prototype,"currentOrganizationId",[rn.g],Object.getOwnPropertyDescriptor(bn.prototype,"currentOrganizationId"),bn.prototype),Object($e.a)(bn.prototype,"currentOrganization",[rn.g],Object.getOwnPropertyDescriptor(bn.prototype,"currentOrganization"),bn.prototype),bn),kn=(pn=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e,n){var a;return Object(De.a)(this,r),(a=t.call(this,e.tagService,n.accountStore)).tagService=void 0,a.rootStore=void 0,a.tagService=e.tagService,a.rootStore=n,a}return Object(Je.a)(r,[{key:"tagsForProject",get:function(){return this.items.filter((function(e){return e.type!==C.a.POSITION}))}},{key:"positions",get:function(){return this.items.filter((function(e){return e.type===C.a.POSITION}))}},{key:"skills",get:function(){return this.items.filter((function(e){return[C.a.LANGUAGE,C.a.TECHNOLOGY].includes(e.type)}))}}]),r}(fn),Object($e.a)(pn.prototype,"tagsForProject",[rn.g],Object.getOwnPropertyDescriptor(pn.prototype,"tagsForProject"),pn.prototype),Object($e.a)(pn.prototype,"positions",[rn.g],Object.getOwnPropertyDescriptor(pn.prototype,"positions"),pn.prototype),Object($e.a)(pn.prototype,"skills",[rn.g],Object.getOwnPropertyDescriptor(pn.prototype,"skills"),pn.prototype),pn),wn=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e,n){var a;return Object(De.a)(this,r),(a=t.call(this,e.projectTagService,n.accountStore)).projectTagService=void 0,a.rootStore=void 0,a.projectTagService=e.projectTagService,a.rootStore=n,a}return Object(Je.a)(r,[{key:"loadByProject",value:function(){var e=Object(te.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(this.projectTagService.getAllByProject(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareForStoring",value:function(e){return Object(Ye.a)(Object(qe.a)(r.prototype),"prepareForStoring",this).call(this,new In(this.rootStore).fromObject(e))}},{key:"getItemsByProject",value:function(e){return this.items.filter((function(t){return t.projectId===e}))}},{key:"syncProjectTags",value:function(){var e=Object(te.a)($.a.mark((function e(t,r){var n,a,c,i,o,s,u,l,j,b=this;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.getItemsByProject(t),a=[],c=Object(Kt.a)(n),e.prev=3,o=$.a.mark((function e(){var t,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.value,!(n=r.find((function(e){return e.tagId===t.tagId})))){e.next=8;break}return a.push(t.tagId),n.id=t.id,e.next=7,b.update(n);case 7:return e.abrupt("return","continue");case 8:return e.next=10,b.delete(t.id);case 10:case"end":return e.stop()}}),e)})),c.s();case 6:if((i=c.n()).done){e.next=13;break}return e.delegateYield(o(),"t0",8);case 8:if("continue"!==e.t0){e.next=11;break}return e.abrupt("continue",11);case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(3),c.e(e.t1);case 18:return e.prev=18,c.f(),e.finish(18);case 21:s=Object(Kt.a)(r),e.prev=22,s.s();case 24:if((u=s.n()).done){e.next=36;break}if(l=u.value,!a.includes(l.tagId)){e.next=28;break}return e.abrupt("continue",34);case 28:return(j=new bt.a).tagId=l.tagId,j.projectId=t,j.capacity=+l.capacity||1,e.next=34,this.create(j);case 34:e.next=24;break;case 36:e.next=41;break;case 38:e.prev=38,e.t2=e.catch(22),s.e(e.t2);case 41:return e.prev=41,s.f(),e.finish(41);case 44:case"end":return e.stop()}}),e,this,[[3,15,18,21],[22,38,41,44]])})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(fn),In=(On=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e){var n;return Object(De.a)(this,r),(n=t.call(this)).rootStore=void 0,n.rootStore=e,n}return Object(Je.a)(r,[{key:"project",get:function(){return this.projectId&&!this._project?this.rootStore.projectStore.getByIdOrLoad(this.projectId):this._project}},{key:"tag",get:function(){return this.tagId&&!this._tag?this.rootStore.tagStore.getByIdOrLoad(this.tagId):this._tag}}]),r}(bt.a),Object($e.a)(On.prototype,"project",[rn.g],Object.getOwnPropertyDescriptor(On.prototype,"project"),On.prototype),Object($e.a)(On.prototype,"tag",[rn.g],Object.getOwnPropertyDescriptor(On.prototype,"tag"),On.prototype),On),Pn=(dn=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e,n){var a;return Object(De.a)(this,r),(a=t.call(this,e.notificationService,n.accountStore)).rootService=e,a.rootStore=n,a.notificationService=void 0,a.notificationService=e.notificationService,a}return Object(Je.a)(r,[{key:"loadByPerson",value:function(){var e=Object(te.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(this.notificationService.getAllByPerson(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadByActivePerson",value:function(){var e=Object(te.a)($.a.mark((function e(){var t,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(t=this.rootStore.personStore.currentPerson)||void 0===t?void 0:t.id){e.next=3;break}throw new Error("No person selected");case 3:return e.next=5,this.loadByPerson(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"currentPersonNotifications",get:function(){var e,t=null===(e=this.rootStore.personStore.currentPerson)||void 0===e?void 0:e.id;if(!t)throw new Error("No person selected");var r=this.getItems().filter((function(e){return e.personId===t}));return r.sort((function(e,t){return x(t.createdAt).getTime()-x(e.createdAt).getTime()})),r}},{key:"currentPersonUnreadNotificationsCount",get:function(){return this.currentPersonNotifications.filter((function(e){return!e.readAt})).length}},{key:"markAsRead",value:function(){var e=Object(te.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.readAt=new Date,e.next=3,this.update(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(fn),Object($e.a)(dn.prototype,"currentPersonNotifications",[rn.g],Object.getOwnPropertyDescriptor(dn.prototype,"currentPersonNotifications"),dn.prototype),Object($e.a)(dn.prototype,"currentPersonUnreadNotificationsCount",[rn.g],Object.getOwnPropertyDescriptor(dn.prototype,"currentPersonUnreadNotificationsCount"),dn.prototype),dn),En=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e,n){var a;return Object(De.a)(this,r),(a=t.call(this,e.personSkillService,n.accountStore)).personSkillService=void 0,a.rootStore=void 0,a.personSkillService=e.personSkillService,a.rootStore=n,a}return Object(Je.a)(r,[{key:"loadByPerson",value:function(){var e=Object(te.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(this.personSkillService.getAllByPerson(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareForStoring",value:function(e){return Object(Ye.a)(Object(qe.a)(r.prototype),"prepareForStoring",this).call(this,new zn(this.rootStore).fromObject(e))}},{key:"getItemsByPerson",value:function(e){return this.items.filter((function(t){return t.personId===e}))}},{key:"syncPersonSkills",value:function(){var e=Object(te.a)($.a.mark((function e(t,r){var n,a,c,i,o,s,u,l,j,b=this;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.getItemsByPerson(t),a=[],c=Object(Kt.a)(n),e.prev=3,o=$.a.mark((function e(){var t,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.value,!(n=r.find((function(e){return e.tagId===t.tagId})))){e.next=8;break}return a.push(t.tagId),n.id=t.id,e.next=7,b.update(n);case 7:return e.abrupt("return","continue");case 8:return e.next=10,b.delete(t.id);case 10:case"end":return e.stop()}}),e)})),c.s();case 6:if((i=c.n()).done){e.next=13;break}return e.delegateYield(o(),"t0",8);case 8:if("continue"!==e.t0){e.next=11;break}return e.abrupt("continue",11);case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(3),c.e(e.t1);case 18:return e.prev=18,c.f(),e.finish(18);case 21:s=Object(Kt.a)(r),e.prev=22,s.s();case 24:if((u=s.n()).done){e.next=36;break}if(l=u.value,!a.includes(l.tagId)){e.next=28;break}return e.abrupt("continue",34);case 28:return(j=new ht.a).tagId=l.tagId,j.personId=t,j.level=+l.level,e.next=34,this.create(j);case 34:e.next=24;break;case 36:e.next=41;break;case 38:e.prev=38,e.t2=e.catch(22),s.e(e.t2);case 41:return e.prev=41,s.f(),e.finish(41);case 44:case"end":return e.stop()}}),e,this,[[3,15,18,21],[22,38,41,44]])})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(fn),zn=(hn=function(e){Object(We.a)(r,e);var t=Object(He.a)(r);function r(e){var n;return Object(De.a)(this,r),(n=t.call(this)).rootStore=void 0,n.rootStore=e,n}return Object(Je.a)(r,[{key:"person",get:function(){return this.personId&&!this._person?this.rootStore.personStore.getByIdOrLoad(this.personId):this._person}},{key:"tag",get:function(){return this.tagId&&!this._tag?this.rootStore.tagStore.getByIdOrLoad(this.tagId):this._tag}}]),r}(ht.a),Object($e.a)(hn.prototype,"person",[rn.g],Object.getOwnPropertyDescriptor(hn.prototype,"person"),hn.prototype),Object($e.a)(hn.prototype,"tag",[rn.g],Object.getOwnPropertyDescriptor(hn.prototype,"tag"),hn.prototype),hn),An=function e(t){Object(De.a)(this,e),this.accountStore=void 0,this.personStore=void 0,this.projectStore=void 0,this.organizationStore=void 0,this.tagStore=void 0,this.projectTagStore=void 0,this.notificationStore=void 0,this.personSkillStore=void 0,this.accountStore=new yn(t.accountService),this.personStore=new vn(t,this),this.projectStore=new xn(t,this),this.organizationStore=new Sn(t,this),this.tagStore=new kn(t,this),this.projectTagStore=new wn(t,this),this.notificationStore=new Pn(t,this),this.personSkillStore=new En(t,this)},Nn=function(e){var t=e.children,r=yt();return Object(I.jsx)(tn.a,{children:Object(I.jsx)(A.a,{children:Object(I.jsx)(l.Provider,{value:new An(r),children:t})})})};i.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(Nn,{children:Object(I.jsx)(en,{})})}),document.getElementById("root")),r.e(3).then(r.bind(null,519))},47:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(6),a=r(11),c=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,null,[{key:"getName",value:function(e){return e._resourceName||e.name}},{key:"Name",value:function(e){return function(t){t._resourceName=e}}}]),e}()},53:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n,a,c,i,o,s=r(18),u=r(6),l=r(11),j=r(4),b=(r(61),r(17)),p=(n=Object(b.JsonIgnoreProperties)({ignoreUnknown:!0}),a=Object(b.JsonProperty)(),n((i=function(){function e(){Object(u.a)(this,e),Object(s.a)(this,"id",o,this)}return Object(l.a)(e,[{key:"fromObject",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=Object.getOwnPropertyDescriptor(this,t);!r||(null===r||void 0===r?void 0:r.get)&&!(null===r||void 0===r?void 0:r.set)||(this[t]=e[t])}return this}}]),e}(),o=Object(j.a)(i.prototype,"id",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=i))||c)},84:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return i}));var n=r(17),a=new n.ObjectMapper;function c(e,t){return"string"!==typeof e?c(i(e),t):a.parse(e,t&&{mainCreator:function(){return[t]}})}function i(e){return a.stringify(e)}},85:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n,a,c,i,o,s,u,l,j,b,p,O=r(18),d=r(6),h=r(11),f=r(12),v=r(13),g=r(22),y=r(4),x=(r(61),r(53)),m=r(17),S=(n=r(47).a.Name("projectTags"),a=Object(m.JsonProperty)(),c=Object(m.JsonProperty)(),i=Object(m.JsonProperty)(),o=Object(m.JsonProperty)(),s=Object(m.JsonProperty)(),n((l=function(e){Object(v.a)(r,e);var t=Object(g.a)(r);function r(){var e;Object(d.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(O.a)(e,"tagId",j,Object(f.a)(e)),Object(O.a)(e,"projectId",b,Object(f.a)(e)),Object(O.a)(e,"capacity",p,Object(f.a)(e)),e._project=void 0,e._tag=void 0,e}return Object(h.a)(r,[{key:"tag",get:function(){return this._tag},set:function(e){this._tag=e}},{key:"project",get:function(){return this._project},set:function(e){this._project=e}}]),r}(x.a),j=Object(y.a)(l.prototype,"tagId",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=Object(y.a)(l.prototype,"projectId",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=Object(y.a)(l.prototype,"capacity",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(y.a)(l.prototype,"tag",[o],Object.getOwnPropertyDescriptor(l.prototype,"tag"),l.prototype),Object(y.a)(l.prototype,"project",[s],Object.getOwnPropertyDescriptor(l.prototype,"project"),l.prototype),u=l))||u)},86:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n,a,c,i,o,s,u,l,j,b,p,O=r(18),d=r(6),h=r(11),f=r(12),v=r(13),g=r(22),y=r(4),x=(r(61),r(53)),m=r(17),S=(n=r(47).a.Name("personSkills"),a=Object(m.JsonProperty)(),c=Object(m.JsonProperty)(),i=Object(m.JsonProperty)(),o=Object(m.JsonProperty)(),s=Object(m.JsonProperty)(),n((l=function(e){Object(v.a)(r,e);var t=Object(g.a)(r);function r(){var e;Object(d.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(O.a)(e,"tagId",j,Object(f.a)(e)),Object(O.a)(e,"personId",b,Object(f.a)(e)),Object(O.a)(e,"level",p,Object(f.a)(e)),e._person=void 0,e._tag=void 0,e}return Object(h.a)(r,[{key:"tag",get:function(){return this._tag},set:function(e){this._tag=e}},{key:"person",get:function(){return this._person},set:function(e){this._person=e}}]),r}(x.a),j=Object(y.a)(l.prototype,"tagId",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=Object(y.a)(l.prototype,"personId",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=Object(y.a)(l.prototype,"level",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(y.a)(l.prototype,"tag",[o],Object.getOwnPropertyDescriptor(l.prototype,"tag"),l.prototype),Object(y.a)(l.prototype,"person",[s],Object.getOwnPropertyDescriptor(l.prototype,"person"),l.prototype),u=l))||u)},90:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(6),a=r(11),c=r(84),i=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"setItem",value:function(e,t){console.info('LSS: Storing item "'.concat(e,'"')),localStorage.setItem(this.getFullKey(e),Object(c.b)(t))}},{key:"getItem",value:function(e,t){console.info('LSS: Retrieving item "'.concat(e,'"'));var r=localStorage.getItem(this.getFullKey(e));return r?Object(c.a)(r,t):null}},{key:"removeItem",value:function(e){console.info('LSS: Removing item item "'.concat(e,'"')),localStorage.removeItem(this.getFullKey(e))}},{key:"getFullKey",value:function(t){return e.KEY_PREFIX+t}}]),e}();i.KEY_PREFIX="LSS/"}},[[468,1,2]]]);
//# sourceMappingURL=main.d620616c.chunk.js.map