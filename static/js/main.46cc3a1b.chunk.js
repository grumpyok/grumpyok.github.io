(this.webpackJsonpkibuvits=this.webpackJsonpkibuvits||[]).push([[0],{105:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(7),a=r(11),i=r(20),c=function(){function e(){Object(n.a)(this,e),this.mapper=new i.ObjectMapper}return Object(a.a)(e,[{key:"setItem",value:function(e,t){console.info('LSS: Storing item "'.concat(e,'"')),localStorage.setItem(this.getFullKey(e),this.mapper.stringify(t))}},{key:"getItem",value:function(e,t){console.info('LSS: Retrieving item "'.concat(e,'"'));var r=localStorage.getItem(this.getFullKey(e));return r?this.mapper.parse(r,t?{mainCreator:function(){return[t]}}:{}):null}},{key:"removeItem",value:function(e){console.info('LSS: Removing item item "'.concat(e,'"')),localStorage.removeItem(this.getFullKey(e))}},{key:"getFullKey",value:function(t){return e.KEY_PREFIX+t}}]),e}();c.KEY_PREFIX="LSS/"},148:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(7),a=r(11),i=function(){function e(t){Object(n.a)(this,e),this.localStorageService=void 0,this.localStorageService=t}return Object(a.a)(e,[{key:"getToken",value:function(){return this.localStorageService.getItem(e.TOKEN_KEY)||null}},{key:"setToken",value:function(t){this.localStorageService.setItem(e.TOKEN_KEY,t)}},{key:"clearToken",value:function(){this.localStorageService.removeItem(e.TOKEN_KEY)}}]),e}();i.TOKEN_KEY="token"},197:function(e,t,r){},321:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(53),c=r.n(i),o=(r(197),r(33)),s=a.a.createContext(null);function u(){var e=a.a.useContext(s);if(!e)throw new Error("Store is not provided");return e}var l,j,p,b,h,d,O,f,v,g,y,m,x,S,k,w=r(32),I=r(362),z=r(180),P=r(334),E=r(335),A=r(339),U=r(341),R=r(365),C=r(1),D=function(e){var t=e.tags;return Object(C.jsx)(P.a,{columns:2,spacing:4,children:t.map((function(e){return Object(C.jsxs)(I.a,{spacing:2,py:1,children:[e.icon||Object(C.jsx)(R.a,{}),Object(C.jsx)(E.a,{fontSize:"xs",children:e.name})]},e.name)}))})},N=r(19),M=r(7),J=r(11),G=r(14),F=r(16),V=r(15),L=r(8),B=(r(58),r(48)),T=r(20),Y=r(43);!function(e){e[e.UPCOMING=0]="UPCOMING",e[e.ONGOING=1]="ONGOING",e[e.ENDED=2]="ENDED"}(k||(k={}));var q=(l=Y.a.Name("projects"),j=Object(T.JsonProperty)(),p=Object(T.JsonProperty)(),b=Object(T.JsonProperty)(),h=Object(T.JsonProperty)(),d=Object(T.JsonProperty)(),O=Object(T.JsonProperty)(),l((v=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(){var e;Object(M.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(N.a)(e,"name",g,Object(G.a)(e)),Object(N.a)(e,"dateStart",y,Object(G.a)(e)),Object(N.a)(e,"dateEnd",m,Object(G.a)(e)),Object(N.a)(e,"organizationId",x,Object(G.a)(e)),Object(N.a)(e,"clientName",S,Object(G.a)(e)),e._organization=void 0,e}return Object(J.a)(r,[{key:"organization",get:function(){return this._organization},set:function(e){this._organization=e}},{key:"hasStarted",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return!this.dateStart||this.dateStart<e}},{key:"hasEnded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return this.dateEnd&&this.dateEnd<e}},{key:"isOngoing",value:function(){return this.hasStarted()&&!this.hasEnded()}},{key:"state",get:function(){return this.isOngoing()?k.ONGOING:this.hasStarted()?this.hasEnded()?k.ENDED:void 0:k.UPCOMING}}]),r}(B.a),g=Object(L.a)(v.prototype,"name",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=Object(L.a)(v.prototype,"dateStart",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=Object(L.a)(v.prototype,"dateEnd",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=Object(L.a)(v.prototype,"organizationId",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=Object(L.a)(v.prototype,"clientName",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(L.a)(v.prototype,"organization",[O],Object.getOwnPropertyDescriptor(v.prototype,"organization"),v.prototype),f=v))||f),Q=r(23),W=r(336),H=function(e){return Object(C.jsx)(W.a,Object(Q.a)({borderRadius:"md",textTransform:"unset"},e))},Z=function(e){var t,r;switch(e.project.state){case k.ENDED:t="red",r="Closed";break;case k.UPCOMING:t="yellow",r="Upcoming";break;case k.ONGOING:t="green",r="Active";break;default:return null}return Object(C.jsx)(H,{colorScheme:t,children:r})},K=r(337),X=r(356);function _(e){return e?"string"===typeof e?Object(K.a)(e):new Date(e):null}var $=r(338),ee=function(e){var t=e.children;return Object(C.jsx)($.a,{bg:"white",borderRadius:"md",boxShadow:"lg",p:4,children:t})},te=r(22),re=r(40),ne=function(e){var t,r=e.project,n=e.highlighted,a=(t=r.hasStarted()?r.dateEnd:r.dateStart)?Object(X.a)(t,"dd.MM.yyyy"):null,i=Object(C.jsx)(ee,{children:Object(C.jsxs)(P.a,{columns:4,spacing:10,templateColumns:"1fr auto auto auto",alignItems:"center",children:[Object(C.jsxs)(E.a,{fontWeight:"bold",children:[r.name,r.clientName&&Object(C.jsx)(H,{ml:2,colorScheme:"purple",size:"xs",children:r.clientName})]}),Object(C.jsx)(D,{tags:[{name:"Team of 3"},{name:"Flex"}]}),Object(C.jsxs)(I.c,{children:[Object(C.jsx)(Z,{project:r}),a&&Object(C.jsx)(E.a,{fontSize:"xs",children:a})]}),Object(C.jsx)(A.a,{as:te.b,to:"?project=".concat(r.id),"aria-label":"Edit",icon:Object(C.jsx)(re.f,{})})]})});return n?Object(C.jsx)(U.a,{in:!0,initialScale:.3,children:i}):i},ae=r(3),ie=r.n(ae),ce=r(62),oe=r(9),se=r(348),ue=r(69),le=r(342),je=r(343),pe=r(63),be=function(e){var t,r=e.children,n=e.name,i=e.required,c=e.label,o=e.helperText,s=e.defaultValue,u=e.pattern,l=e.validate,j=Object(pe.d)(),p=j.errors,b=j.control,h=j.getValues,d=(null===(t=p[n])||void 0===t?void 0:t.message)||null;if(a.a.Children.count(r)>1)throw new Error("Invalid children count");var O=r&&a.a.Children.only(r);return Object(C.jsx)(pe.a,{control:b,name:n,rules:{required:i,pattern:u,validate:l&&function(e){return l(e,h)}},defaultValue:s,render:function(e){var t=e.onChange,r=e.onBlur,s=e.value;return Object(C.jsxs)(ue.a,{id:"formField__".concat(n),isRequired:i,isInvalid:!!d,children:[c&&Object(C.jsx)(le.a,{children:c}),O&&a.a.isValidElement(O)&&a.a.cloneElement(O,{name:n,onChange:t,onBlur:r,value:s}),d&&Object(C.jsx)(je.a,{children:d}),o&&Object(C.jsx)(ue.b,{children:o})]})}})};be.defaultProps={defaultValue:""};var he=be,de=r(357),Oe=function(e){var t=e.onSubmit,r=e.children,a=e.defaultValues,i=e.successMessage,c=Object(pe.c)({defaultValues:a}),o=c.handleSubmit,s=c.reset,u=c.formState.isSubmitSuccessful,l=Object(de.a)();return Object(n.useEffect)((function(){u&&i&&l({description:i,status:"success",isClosable:!0})}),[u]),Object(n.useEffect)((function(){u&&s(a)}),[s,a,u]),Object(C.jsx)(pe.b,Object(Q.a)(Object(Q.a)({},c),{},{children:Object(C.jsx)("form",{onSubmit:o(t),children:"function"===typeof r?r(c):r})}))},fe=r(61),ve=r(363),ge=function(e){var t=e.children,r=Object(pe.d)().formState,n=r.isSubmitting,a=r.isDirty,i=r.isSubmitSuccessful;return Object(C.jsx)(z.a,{type:"submit",colorScheme:"purple",isLoading:n,disabled:!a||i,children:t})};function ye(e){var t=Object(o.h)();return new URLSearchParams(t.search).get(e)}var me=function(e){var t=e.name,r=e.children,n=Object(o.h)(),a=Object(o.g)(),i=ye(t),c=null!==i,s=function(){var e=new URLSearchParams(n.search);e.delete(t),a.push("?".concat(e.toString()))};return Object(C.jsx)(ve.a,{isOpen:c,onClose:s,placement:"right",children:"function"===typeof r?r({value:i,handleClose:s}):r})},xe=function(e){var t=e.submitButton,r=e.name,n=e.header,a=e.children,i=e.onSubmit,c=e.autoClose,o=Object(ce.a)(e,["submitButton","name","header","children","onSubmit","autoClose"]);return Object(C.jsx)(me,{name:r,children:function(e){var r=function(){var t=Object(oe.a)(ie.a.mark((function t(r){var n;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(r,e.value);case 2:return n=t.sent,c&&e.handleClose(),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsx)(Oe,Object(Q.a)(Object(Q.a)({onSubmit:r},o),{},{children:function(r){return Object(C.jsx)(fe.g,{children:Object(C.jsxs)(ve.b,{children:[Object(C.jsx)(fe.c,{}),n&&Object(C.jsx)(fe.f,{children:n}),Object(C.jsx)(fe.b,{children:"function"===typeof a?a({formContext:r,drawerContext:e}):a}),t&&Object(C.jsx)(fe.e,{children:Object(C.jsx)(ge,Object(Q.a)(Object(Q.a)({},t),{},{children:t.text}))})]})})}}))}})};xe.defaultProps={submitButton:{text:"Save"},autoClose:!0};var Se,ke,we,Ie,ze,Pe,Ee,Ae,Ue,Re,Ce,De,Ne,Me,Je,Ge,Fe,Ve,Le,Be,Te,Ye,qe,Qe,We,He,Ze,Ke,Xe=xe,_e=function(e){var t=e.value,r=Object(ce.a)(e,["value"]),n=t&&_(t);return Object(C.jsx)(se.a,Object(Q.a)(Object(Q.a)({},r),{},{value:n&&Object(X.a)(n,"yyyy-MM-dd"),type:"date"}))},$e=Object(w.a)((function(e){var t=e.name,r=Object(o.g)(),n=u(),a=n.projectStore,i=n.organizationStore,c=ye(t),s=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n){var c,o,s,u,l;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.dateStart,o=t.dateEnd,(s=Object(ce.a)(t,["dateStart","dateEnd"])).dateStart=c?_(c):null,s.dateEnd=o?_(o):null,(u=(new q).fromObject(s)).organizationId=i.currentOrganizationId,!n){e.next=11;break}return u.id=n,e.next=9,a.update(u);case 9:e.next=13;break;case 11:return e.next=13,a.create(u);case 13:if(u){e.next=15;break}throw new Error("Something went wrong");case 15:l="?highlighted-project-id=".concat(u.id),u.isOngoing()?r.push("/my-projects/active-projects".concat(l)):u.hasStarted()?r.push("/my-projects/ended-projects".concat(l)):r.push("/my-projects/upcoming-projects".concat(l));case 17:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),l=Object(Q.a)({},c?a.getById(c):{});return Object(C.jsx)(Xe,{name:t,onSubmit:s,header:Object(C.jsxs)(C.Fragment,{children:[c?"Edit":"Add"," project"]}),defaultValues:l,autoClose:!1,children:Object(C.jsxs)(I.b,{spacing:4,children:[Object(C.jsx)(he,{name:"name",required:!0,label:"Project name",children:Object(C.jsx)(se.a,{size:"lg",autoFocus:!0})}),Object(C.jsx)(he,{name:"clientName",label:"Client",children:Object(C.jsx)(se.a,{})}),Object(C.jsx)(he,{name:"dateStart",label:"Starts at",children:Object(C.jsx)(_e,{})}),Object(C.jsx)(he,{name:"dateEnd",label:"Ends at",children:Object(C.jsx)(_e,{})})]})})})),et=function(e){var t=e.projects,r=ye("highlighted-project-id");return Object(C.jsxs)("div",{children:[Object(C.jsx)($e,{name:"project"}),t.length?Object(C.jsxs)(I.b,{spacing:4,children:[Object(C.jsx)(I.a,{justifyContent:"flex-end",children:Object(C.jsx)(z.a,{as:te.b,to:"?project",children:"Add project"})}),Object(C.jsx)(I.b,{children:t.map((function(e){return Object(C.jsx)(ne,{highlighted:r===e.id,project:e},e.id)}))})]}):Object(C.jsxs)(I.c,{height:"100%",justifyContent:"center",spacing:8,children:[Object(C.jsx)("div",{children:"No projects matching filters."}),Object(C.jsx)(z.a,{colorScheme:"purple",as:te.b,to:"?project",children:"Create new project"})]})]})},tt=Object(w.a)((function(){var e=u().projectStore;return Object(n.useEffect)((function(){e.loadByActiveOrganization()}),[]),Object(C.jsx)(et,{projects:e.ongoingProjects})})),rt=Object(w.a)((function(){var e=u().projectStore;return Object(n.useEffect)((function(){e.loadByActiveOrganization()}),[]),Object(C.jsx)(et,{projects:e.upcomingProjects})})),nt=Object(w.a)((function(){var e=u().projectStore;return Object(n.useEffect)((function(){e.loadByActiveOrganization()}),[]),Object(C.jsx)(et,{projects:e.endedProjects})})),at=r(37),it=r(364),ct=r(349),ot={dataSource:null},st=r(105),ut=r(175),lt=r.n(ut),jt=function(){function e(t){Object(M.a)(this,e),this.tokenService=void 0,this.tokenService=t}return Object(J.a)(e,[{key:"create",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",a=lt.a.create({baseURL:e});return a.interceptors.request.use(function(){var e=Object(oe.a)(ie.a.mark((function e(a){var i;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tokenService.getToken();case 2:return i=e.sent,r&&i&&(a.headers.authorization="Bearer ".concat(i)),n&&!a.headers.Accept&&(a.headers.Accept="application/json"),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.interceptors.response.use(void 0,(function(e){var t,r=(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)||{},n=r.title,a=r.detail,i=r.message;return e.message=n||a||i||e.message,Promise.reject(e)})),a}}]),e}(),pt=r(148),bt=r(13),ht=r(4),dt=r(359),Ot=function(){function e(t,r){Object(M.a)(this,e),this.domain=void 0,this.localStorageService=void 0,this.domain=t,this.localStorageService=r}return Object(J.a)(e,[{key:"resource",get:function(){return Y.a.getName(this.domain)}},{key:"getMany",value:function(){var e=Object(oe.a)(ie.a.mark((function e(){var t,r,n,a,i=arguments;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},r=this.localStorageService.getItem(this.resource)){e.next=4;break}return e.abrupt("return",[]);case 4:for(a in n=function(e){r=r.filter((function(r){return r[e]===t[e]}))},t)n(a);return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getOne",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){var r,n,a,i=arguments;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,this.getMany({id:t});case 3:if(r=e.sent,n=Object(ht.a)(r,1),a=n[0]){e.next=8;break}throw new Error("Item ".concat(t," not found"));case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t,r){var n,a,i;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.localStorageService.getItem(this.resource)||[],a=null===n||void 0===n?void 0:n.find((function(e){return e.id===t}))){e.next=4;break}throw new Error("Item ".concat(t," not found"));case 4:e.t0=ie.a.keys(r);case 5:if((e.t1=e.t0()).done){e.next=12;break}if(i=e.t1.value,r.hasOwnProperty(i)){e.next=9;break}return e.abrupt("continue",5);case 9:a[i]=r[i],e.next=5;break;case 12:return this.localStorageService.setItem(this.resource,n),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){var r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.localStorageService.getItem(this.resource)||[],t.id=Object(dt.a)(),this.localStorageService.setItem(this.resource,[].concat(Object(bt.a)(r),[t])),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){var r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.localStorageService.getItem(this.resource)||[],this.localStorageService.setItem(this.resource,null===r||void 0===r?void 0:r.filter((function(e){return e.id!==t})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ft=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e,n){var a;return Object(M.a)(this,r),(a=t.call(this,at.b,e)).tokenService=void 0,a.tokenService=n,a}return Object(J.a)(r,[{key:"getAllRelatedToUser",value:function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getMany({userId:this.tokenService.getToken()}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllByOrganization",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getMany({organizationId:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Ot),vt=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e){return Object(M.a)(this,r),t.call(this,q,e)}return Object(J.a)(r,[{key:"getAllByOrganization",value:function(e){return this.getMany({organizationId:e})}}]),r}(Ot),gt=(Se=Y.a.Name("organizations"),ke=Object(T.JsonProperty)(),we=Object(T.JsonProperty)(),Se((ze=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(){var e;Object(M.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(N.a)(e,"name",Pe,Object(G.a)(e)),Object(N.a)(e,"logo",Ee,Object(G.a)(e)),e}return r}(B.a),Pe=Object(L.a)(ze.prototype,"name",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=Object(L.a)(ze.prototype,"logo",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=ze))||Ie),yt=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e){return Object(M.a)(this,r),t.call(this,gt,e)}return r}(Ot),mt=(Ae=Y.a.Name("users"),Ue=Object(T.JsonProperty)(),Ae((Ce=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(){var e;Object(M.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(N.a)(e,"email",De,Object(G.a)(e)),e}return r}(B.a),De=Object(L.a)(Ce.prototype,"email",[Ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=Ce))||Re),xt=function(){function e(t,r,n){Object(M.a)(this,e),this.httpClient=void 0,this.tokenService=void 0,this.userService=void 0,this.httpClient=t,this.tokenService=r,this.userService=n}return Object(J.a)(e,[{key:"login",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t,r){var n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userService.getMany({email:t});case 2:if((n=e.sent).length){e.next=5;break}throw new Error("User not found");case 5:this.tokenService.setToken(n[0].id);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t,r){var n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userService.getMany({email:t});case 2:if(!e.sent.length){e.next=5;break}throw new Error("User already exists");case 5:return(n=new mt).email=t,e.next=9,this.userService.create(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAccount",value:function(){var e=Object(oe.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.tokenService.getToken()){e.next=3;break}return e.abrupt("return",null);case 3:return e.abrupt("return",this.userService.getOne(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.tokenService.clearToken();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),St=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e){return Object(M.a)(this,r),t.call(this,mt,e)}return r}(Ot),kt=(Ne=Y.a.Name("skills"),Me=Object(T.JsonProperty)(),Ne((Ge=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(){var e;Object(M.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(N.a)(e,"name",Fe,Object(G.a)(e)),e}return r}(B.a),Fe=Object(L.a)(Ge.prototype,"name",[Me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=Ge))||Je),wt=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e){return Object(M.a)(this,r),t.call(this,kt,e)}return r}(Ot),It=(Ve=Y.a.Name("projectSkills"),Le=Object(T.JsonProperty)(),Be=Object(T.JsonProperty)(),Te=Object(T.JsonProperty)(),Ye=Object(T.JsonProperty)(),qe=Object(T.JsonProperty)(),Ve((We=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(){var e;Object(M.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(N.a)(e,"skillId",He,Object(G.a)(e)),Object(N.a)(e,"projectId",Ze,Object(G.a)(e)),Object(N.a)(e,"capacity",Ke,Object(G.a)(e)),e._project=void 0,e._skill=void 0,e}return Object(J.a)(r,[{key:"skill",get:function(){return this._skill},set:function(e){this._skill=e}},{key:"project",get:function(){return this._project},set:function(e){this._project=e}}]),r}(B.a),He=Object(L.a)(We.prototype,"skillId",[Le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ze=Object(L.a)(We.prototype,"projectId",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ke=Object(L.a)(We.prototype,"capacity",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(L.a)(We.prototype,"skill",[Ye],Object.getOwnPropertyDescriptor(We.prototype,"skill"),We.prototype),Object(L.a)(We.prototype,"project",[qe],Object.getOwnPropertyDescriptor(We.prototype,"project"),We.prototype),Qe=We))||Qe),zt=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e){return Object(M.a)(this,r),t.call(this,It,e)}return Object(J.a)(r,[{key:"getAllByProject",value:function(e){return this.getMany({projectId:e})}}]),r}(Ot),Pt=function(){function e(t){Object(M.a)(this,e),this.fileyClient=t}return Object(J.a)(e,[{key:"upload",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){var r,n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("file",t),e.next=4,this.fileyClient.post("/upload",r,{headers:{"Content-Type":"multipart/form-data"}});case 4:return n=e.sent,e.abrupt("return",n.headers.location);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Et=function(){function e(t,r,n,a,i,c,o,s){Object(M.a)(this,e),this.attachmentUploadService=t,this.accountService=r,this.personService=n,this.projectService=a,this.organizationService=i,this.userService=c,this.skillService=o,this.projectSkillService=s}return Object(J.a)(e,null,[{key:"getHttpClient",value:function(){return this.getHttpClientService().create(ot.dataSource||void 0)}},{key:"getLocalStorageService",value:function(){return new st.a}},{key:"getTokenService",value:function(){return new pt.a(new st.a)}},{key:"getHttpClientService",value:function(){return new jt(this.getTokenService())}},{key:"getAttachmentUploadService",value:function(){return new Pt(this.getHttpClientService().create("https://mmm.planet.ee/filey",!1,null))}},{key:"initialize",value:function(){var t=new st.a,r=this.getTokenService(),n=new St(t);return new e(this.getAttachmentUploadService(),new xt(this.getHttpClient(),r,n),new ft(t,r),new vt(t),new yt(t),n,new wt(t),new zt(t))}}]),e}(),At=a.a.createContext(Et.initialize());function Ut(){return Object(n.useContext)(At)}var Rt=function(e){var t=e.label,r=(e.children,e.name),a=Ut().attachmentUploadService,i=Object(pe.d)(),c=i.setValue,o=i.watch;return Object(n.useEffect)((function(){}),[a]),Object(C.jsxs)("div",{children:[t&&Object(C.jsx)(le.a,{children:t}),Object(C.jsxs)("label",{style:{cursor:"pointer"},children:[Object(C.jsx)(he,{name:r}),Object(C.jsx)(it.a,{src:o(r),size:"xl"}),Object(C.jsx)(se.a,{type:"file",accept:"image/*",style:{display:"none"},onChange:function(){var e=Object(oe.a)(ie.a.mark((function e(t){var n,i;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,a.upload(n);case 5:i=e.sent,c(r,i,{shouldDirty:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})]})},Ct=function(e){var t=e.onSubmit,r=e.organization;return Object(C.jsx)(Xe,{name:"organization",onSubmit:t,defaultValues:r,successMessage:"Organization saved successfully!",children:Object(C.jsxs)(I.b,{spacing:4,children:[Object(C.jsx)(he,{name:"name",required:!0,label:"Organization name",children:Object(C.jsx)(se.a,{})}),Object(C.jsx)(Rt,{label:"Logo",name:"logo"})]})})},Dt=Object(w.a)((function(){var e=u().organizationStore,t=e.currentOrganization;if(!t)return null;var r=function(){var r=Object(oe.a)(ie.a.mark((function r(n){return ie.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.update(Object(Q.a)(Object(Q.a)({},t),n));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(C.jsxs)(ee,{children:[Object(C.jsx)(Ct,{onSubmit:r,organization:t}),Object(C.jsxs)(I.a,{spacing:4,children:[Object(C.jsx)(it.a,{src:t.logo,name:t.name}),Object(C.jsx)(ct.a,{size:"md",children:t.name}),Object(C.jsx)(A.a,{as:te.b,to:"?organization","aria-label":"Edit",icon:Object(C.jsx)(re.f,{})})]})]})})),Nt=r(350),Mt=r(351),Jt=r(176),Gt=r.n(Jt),Ft=r(36),Vt=function(e){var t=e.columns,r=e.onFilter,n=e.placeholder;return Object(C.jsx)(se.a,{placeholder:n||"Search..",onChange:function(e){var n;n=e.target.value,r((function(e){if(!n)return!0;var r,a=Object(Ft.a)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(!1!==i.searchable){var c=i.accessor(e);if(c&&["number","string"].includes(typeof c)&&c.toString().toLocaleLowerCase().includes(n.toLocaleLowerCase()))return!0}}}catch(o){a.e(o)}finally{a.f()}return!1}))}})},Lt=function(e){var t=e.data,r=e.columns,a=e.linkTo,i=e.search,c=e.sortable,s=Object(o.g)(),u=Object(n.useState)([function(){return!0}]),l=Object(ht.a)(u,2),j=Object(ht.a)(l[0],1)[0],p=l[1],b=Object(n.useState)(null),h=Object(ht.a)(b,2),d=h[0],O=h[1];return Object(C.jsxs)("div",{children:[i&&Object(C.jsx)("div",{children:Object(C.jsx)(Vt,Object(Q.a)({onFilter:function(e){return p([e])},columns:r},i))}),Object(C.jsxs)(Nt.a,{variant:"simple",children:[Object(C.jsx)(Nt.e,{children:Object(C.jsx)(Nt.f,{children:r.map((function(e,t){return Object(C.jsx)(Nt.d,{onClick:(void 0===e.sortable?c:e.sortable)?function(){return O({index:t,order:(null===d||void 0===d?void 0:d.index)===t&&"asc"===(null===d||void 0===d?void 0:d.order)?"desc":"asc"})}:void 0,children:Object(C.jsxs)(Mt.a,{alignItems:"center",children:[e.title,"\xa0",d&&d.index===t&&("desc"===(null===d||void 0===d?void 0:d.order)?Object(C.jsx)(re.a,{}):Object(C.jsx)(re.b,{}))]})},t)}))})}),Object(C.jsx)(Nt.b,{children:(d?Gt()(Object(bt.a)(t),r[d.index].accessor,d.order):t||[]).map((function(e,t){return j(e)?Object(C.jsx)(Nt.f,{isLink:!!a,onClick:function(){return a&&s.push(a(e))},children:r.map((function(r,n){var a=r.accessor(e);return Object(C.jsx)(Nt.c,{onClick:function(e){return r.disableLink&&e.stopPropagation()},style:r.disableLink?{cursor:"default"}:{},children:r.render?r.render(a,e,t):a},n)}))},Object(Q.a)({},e).id||t):null}))})]})]})};Lt.defaultProps={sortable:!0};var Bt=Lt,Tt=function(e){var t,r=e.person;switch(r.role){case at.a.ADMIN:t="purple";break;case at.a.USER:t="yellow";break;case at.a.MANAGER:t="green"}return Object(C.jsx)(H,{colorScheme:t,children:r.humanReadableRole})},Yt=function(e){var t=e.name,r=e.subTitle,n=e.image,a=e.align,i=Object(ce.a)(e,["name","subTitle","image","align"]),c=Object(C.jsx)(it.a,{name:t,src:n,size:"sm"});return Object(C.jsxs)(I.a,Object(Q.a)(Object(Q.a)({spacing:2},i),{},{children:["left"===a&&c,Object(C.jsxs)(E.a,{align:a,children:[Object(C.jsx)(E.a,{fontSize:"sm",children:t}),Object(C.jsx)(E.a,{fontSize:"xs",color:"gray.500",children:r})]}),"right"===a&&c]}))};Yt.defaultProps={align:"left"};var qt=Yt,Qt=Object(w.a)((function(e){var t=e.person,r=Object(ce.a)(e,["person"]);return t?Object(C.jsx)(qt,Object(Q.a)({name:t.name,subTitle:t.subTitle,image:t.image},r)):null})),Wt=r(352),Ht=Object(w.a)((function(){var e="person",t=u(),r=t.personStore,n=t.organizationStore,a=ye(e),i=function(){var e=Object(oe.a)(ie.a.mark((function e(t,a){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,r.update(Object(Q.a)({id:a},t));case 3:e.next=7;break;case 5:return e.next=7,r.create(Object(Q.a)(Object(Q.a)({},t),{},{organizationId:n.currentOrganizationId}));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),c=Object(Q.a)({role:at.a.USER},a?r.getById(a):{});return Object(C.jsx)(Xe,{name:e,onSubmit:i,header:Object(C.jsxs)(C.Fragment,{children:[a?"Edit":"Add"," member"]}),defaultValues:c,children:Object(C.jsxs)(I.b,{spacing:4,children:[Object(C.jsx)(he,{name:"name",label:"Name",required:!0,children:Object(C.jsx)(se.a,{autoFocus:!a})}),Object(C.jsx)(he,{name:"user.email",label:"Email",children:Object(C.jsx)(se.a,{type:"email"})}),Object(C.jsx)(he,{name:"position",label:"Position",children:Object(C.jsx)(se.a,{})}),Object(C.jsx)(he,{name:"role",label:"Role",children:Object(C.jsxs)(Wt.a,{children:[Object(C.jsx)("option",{value:at.a.ADMIN,children:"Admin"}),Object(C.jsx)("option",{value:at.a.MANAGER,children:"Manager"}),Object(C.jsx)("option",{value:at.a.USER,children:"User"})]})}),Object(C.jsx)(Rt,{label:"Image",name:"image"})]})})})),Zt=function(e){var t=e.name,r=u().personStore,n=ye(t);if(!n)return null;var a=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.delete(n);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),i=r.getById(n);return i?Object(C.jsx)(Xe,{name:t,onSubmit:a,header:"Delete member",children:Object(C.jsx)(I.b,{spacing:4,children:Object(C.jsx)(he,{name:"confirmation",label:'Type "'.concat(i.name,'" to delete'),required:!0,validate:function(e){return e===i.name||"Invalid"},children:Object(C.jsx)(se.a,{autoFocus:!0})})})}):null},Kt=Object(w.a)((function(){var e=u().personStore;return Object(n.useEffect)((function(){e.loadCurrentOrganizationPersons()}),[e]),Object(C.jsxs)(ee,{children:[Object(C.jsx)(Ht,{}),Object(C.jsx)(Zt,{name:"person.delete"}),Object(C.jsx)(I.a,{justifyContent:"flex-end",children:Object(C.jsx)(z.a,{as:te.b,to:"?person",children:"Add member"})}),Object(C.jsx)(Bt,{data:e.currentOrganizationPersons,columns:[{accessor:function(e){return e.name},title:"Name",render:function(e,t){return Object(C.jsx)(Qt,{person:t})}},{accessor:function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.email},title:"Email"},{accessor:function(e){return e.humanReadableRole},title:"Account",render:function(e,t){return Object(C.jsx)(Tt,{person:t})}},{accessor:function(){return null},render:function(t,r){return r.id===e.currentPerson.id?null:Object(C.jsxs)(I.a,{spacing:2,justifyContent:"flex-end",children:[Object(C.jsx)(A.a,{as:te.b,to:"?person=".concat(r.id),"aria-label":"Edit",icon:Object(C.jsx)(re.f,{})}),Object(C.jsx)(A.a,{as:te.b,to:"?person.delete=".concat(r.id),"aria-label":"Delete",icon:Object(C.jsx)(re.h,{})})]})}}]})]})})),Xt=[{path:"/my-projects",title:"My projects",children:[{path:"/active-projects",title:"Active projects",component:tt,icon:Object(C.jsx)(re.g,{})},{path:"/upcoming-projects",title:"Upcoming projects",component:rt,icon:Object(C.jsx)(re.d,{})},{path:"/ended-projects",title:"History",component:nt,icon:Object(C.jsx)(re.e,{})}]},{path:"/profile",title:"Profile",children:[{path:"/organization-profile",title:"Organization profile",component:Dt,icon:Object(C.jsx)(re.c,{}),scope:[at.a.ADMIN]},{path:"/organization-members",title:"Organization members",component:Kt,icon:Object(C.jsx)(re.i,{}),scope:[at.a.MANAGER,at.a.ADMIN]}]}],_t=r(168),$t=r(360),er=function(){return Object(C.jsx)($t.a,{label:"Pls replace me \ud83d\ude09",children:Object(C.jsx)(te.b,{to:"/",style:{width:"100%"},children:Object(C.jsx)("img",{src:"data:image/png;base64,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",width:"100%",alt:"Logo"})})})},tr=function(e){var t=e.children,r=e.navigation,n=e.topRight;return Object(C.jsxs)(_t.a,{h:"100vh",templateRows:"auto auto 1fr auto",templateColumns:"auto 1fr auto",gap:4,bg:"#F8F8F8",children:[Object(C.jsx)(_t.b,{rowSpan:4,colSpan:1,bg:"white",boxShadow:"xl",p:8,children:Object(C.jsxs)(I.c,{spacing:8,children:[Object(C.jsx)(er,{}),r]})}),Object(C.jsx)(_t.b,{colSpan:2}),Object(C.jsx)(_t.b,{bg:"white",borderRadius:"md",boxShadow:"lg",children:Object(C.jsx)(I.a,{justify:"flex-end",spacing:2,children:n})}),Object(C.jsx)(_t.b,{}),Object(C.jsx)(_t.b,{children:t}),Object(C.jsx)(_t.b,{})]})},rr=function(e){var t=e.title,r=e.children;return Object(C.jsxs)("div",{children:[Object(C.jsx)(E.a,{mt:6,color:"gray.400",fontSize:"xs",casing:"uppercase",children:t}),r]})},nr=function(e){var t=e.to,r=e.title,n=e.icon;return Object(C.jsxs)(I.a,{as:te.c,borderRadius:"xs",activeStyle:{backgroundColor:"#E9FBFF"},to:t,spacing:4,py:1,pl:4,children:[n,Object(C.jsx)(E.a,{fontSize:"sm",pr:6,children:r})]})},ar=r(358),ir=function(e){var t=e.handle,r=e.children;return Object(C.jsxs)(ar.a,{placement:"bottom-end",isLazy:!0,offset:[-7,0],children:[Object(C.jsx)(ar.b,{p:4,children:t}),Object(C.jsx)(ar.d,{children:a.a.Children.map(r,(function(e,t){return Object(C.jsx)(ar.c,{justifyContent:"flex-end",children:e},t)}))})]})},cr=Object(w.a)((function(e){var t=e.routes,r=u().personStore,a=r.currentUserNonActivePersons,i=r.currentPerson;return Object(n.useEffect)((function(){r.loadUserRelated()}),[]),Object(C.jsx)(tr,{navigation:Object(C.jsx)("div",{children:t.filter((function(e){return i.hasPermission(e.scope)})).map((function(e){var t;return Object(C.jsx)(rr,{title:e.title,children:null===(t=e.children)||void 0===t?void 0:t.filter((function(e){return i.hasPermission(e.scope)})).map((function(t){return Object(C.jsx)(nr,{to:e.path+t.path,title:t.title,icon:t.icon||e.icon},t.path)}))},e.path)}))}),topRight:Object(C.jsxs)(ir,{handle:Object(C.jsx)(Qt,{align:"right",person:i}),children:[a.map((function(e){return Object(C.jsx)(Qt,{align:"right",person:e,onClick:function(){return r.selectPerson(e.id)}},e.id)})),Object(C.jsx)(te.b,{to:"/create-organization",children:"Create an organization"}),Object(C.jsx)(te.b,{to:"/logout",children:"Sign out"})]}),children:Object(C.jsx)(o.d,{children:t.map((function(e){var t;return null===(t=e.children)||void 0===t?void 0:t.filter((function(e){return i.hasPermission(e.scope)})).map((function(t){return[e.path+t.path,t.component]}))})).flat().map((function(e){var t=Object(ht.a)(e,2),r=t[0],n=t[1];return Object(C.jsx)(o.b,{path:r,component:n},r)}))})})})),or=function(e){var t=e.children,r=e.forbiddenAction,a=u().accountStore,i=a.authenticated;return Object(n.useEffect)((function(){null===i&&a.checkAuthentication()}),[i,a]),null===i?null:i?Object(C.jsx)(C.Fragment,{children:t}):r};or.defaultProps={forbiddenAction:Object(C.jsx)(o.a,{to:"/"})};var sr=Object(w.a)(or),ur=r(354),lr=function(){return Object(C.jsx)(ur.a,{children:Object(C.jsxs)(I.c,{mt:4,spacing:4,children:[Object(C.jsx)(er,{}),Object(C.jsx)(E.a,{children:"I'm glad you made an account. What would you like to do next?"}),Object(C.jsxs)("div",{children:[Object(C.jsx)(z.a,{as:te.b,to:"/create-organization",colorScheme:"purple",children:"I'd like to create an organization"})," ",Object(C.jsx)(z.a,{as:te.b,to:"/logout",children:"I'd like to leave"})]})]})})},jr=Object(w.a)((function(e){var t=e.children,r=u().personStore;return Object(n.useEffect)((function(){r.loadUserRelated()}),[r]),r.currentPerson?Object(C.jsx)(C.Fragment,{children:t}):Object(C.jsx)(lr,{})})),pr=function(){var e="2021-02-25 01:20:11";return Object(C.jsx)(ur.a,{children:Object(C.jsxs)(I.c,{mt:4,spacing:10,children:[Object(C.jsx)(er,{}),Object(C.jsx)("div",{children:Object(C.jsx)(z.a,{as:te.b,to:"/start",colorScheme:"purple",children:"Start"})}),Object(C.jsx)("div",{children:Object(C.jsxs)(E.a,{fontSize:"xs",mt:20,children:["Built at ",e]})})]})})},br=function(){var e=u().accountStore;return Object(n.useEffect)((function(){e.logout()}),[e]),Object(C.jsx)(sr,{})},hr=function(){var e=u().accountStore,t=Ut().accountService,r=Object(o.g)();return Object(n.useEffect)((function(){var n=prompt("Please provide your email");n?e.login(n,"1").catch((function(){return console.info("Login failed, creating account..."),!0})).then((function(e){if(e)return t.register(n,"");console.info("User already exists")})).then((function(){return console.info("Account created, logging in"),e.login(n,"")})).then((function(){r.replace("/app")})).catch((function(e){console.error(e),alert("Failure")})):r.replace("/")})),null},dr=function(){return Object(C.jsx)(sr,{forbiddenAction:Object(C.jsx)(hr,{}),children:Object(C.jsx)(o.a,{to:"/app"})})},Or=function(e){var t=e.onSubmit,r=e.currentPerson;return Object(C.jsx)(Oe,{onSubmit:t,children:function(e){var t=e.watch,n=t("organization.name");return Object(C.jsxs)(I.c,{spacing:8,mt:4,children:[Object(C.jsx)("div",{style:{width:150},children:Object(C.jsx)(er,{})}),Object(C.jsx)(he,{name:"organization.name",required:!0,children:Object(C.jsx)(se.a,{size:"lg",variant:"flushed",placeholder:"Organization name",autoFocus:!0})}),n&&Object(C.jsx)(U.a,{in:!0,style:{width:"100%"},children:Object(C.jsx)(he,{name:"person.name",required:!0,defaultValue:(null===r||void 0===r?void 0:r.name)||"",children:Object(C.jsx)(se.a,{name:"person.name",variant:"flushed",placeholder:"Your name"})})}),t("person.name")&&Object(C.jsx)(U.a,{in:!0,style:{width:"100%"},children:Object(C.jsx)(he,{name:"person.position",children:Object(C.jsx)(se.a,{variant:"flushed",placeholder:"Your position in "+n})})}),Object(C.jsx)(ge,{children:"Create"})]})}})},fr=function(){var e=u(),t=e.organizationStore,r=e.personStore,a=e.accountStore,i=Object(o.g)();Object(n.useEffect)((function(){a.checkAuthentication()}),[]);var c=function(){var e=Object(oe.a)(ie.a.mark((function e(n){var c,o,s,u;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.person,o=n.organization,e.next=3,t.create(o);case 3:return s=e.sent,e.next=6,r.create(Object(Q.a)({capacity:1,role:at.a.ADMIN,organizationId:s.id,userId:a.authenticatedUser.id},c));case 6:u=e.sent,r.selectPerson(u.id),i.push("/app");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)(ur.a,{children:Object(C.jsx)(Or,{onSubmit:c,currentPerson:r.currentPerson})})};var vr,gr,yr,mr,xr=function(){return Object(C.jsxs)(o.d,{children:[Object(C.jsx)(o.b,{exact:!0,path:"/",component:pr}),Object(C.jsx)(o.b,{path:"/logout",component:br}),Object(C.jsx)(o.b,{path:"/start",component:dr}),Object(C.jsx)(o.b,{path:"/create-organization",component:fr}),Object(C.jsx)(o.b,{path:"*",children:Object(C.jsx)(sr,{children:Object(C.jsx)(jr,{children:Object(C.jsx)(cr,{routes:Xt})})})})]})},Sr=r(361),kr=r(75),wr=r(54),Ir=r(6);!function(e){e[e.IDLE=0]="IDLE",e[e.PENDING=1]="PENDING",e[e.RESOLVED=2]="RESOLVED",e[e.REJECTED=3]="REJECTED"}(mr||(mr={}));var zr,Pr,Er,Ar,Ur,Rr,Cr,Dr,Nr,Mr,Jr=(vr=function(){function e(t,r){Object(M.a)(this,e),this.service=void 0,this.accountStore=void 0,Object(N.a)(this,"byId",gr,this),Object(N.a)(this,"_status",yr,this),this.service=t,this.accountStore=r,Object(Ir.n)(this)}return Object(J.a)(e,[{key:"loadAll",value:function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(this.service.getMany());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadOne",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setOneEventually(this.service.getOne(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=4;break}return e.abrupt("return",this.create(t));case 4:return e.abrupt("return",this.update(t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){var r,n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getById(t.id),this.storeItem(t),e.prev=2,n=this.service.update(t.id,this.sanitizeBeforeSave(t)),e.next=6,this.setOneEventually(n);case 6:return e.next=8,n;case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),this.storeItem(r),e.t0;case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){var r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.service.create(this.sanitizeBeforeSave(t)),e.next=3,this.setOneEventually(r);case 3:return e.next=5,r;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setStatus(mr.PENDING),e.prev=1,e.next=4,this.service.delete(t);case 4:delete this.byId[t.toString()],this.setStatus(mr.RESOLVED),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.setStatus(mr.REJECTED);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getById",value:function(e){return this.byId[e.toString()]||null}},{key:"getByIdOrLoad",value:function(e){var t=this.getById(e);return t||this.loadOne(e),t}},{key:"getItems",value:function(){var e=this;return Object.values(this.byId).map((function(t){return e.prepareForRetrieving(t)})).filter(Boolean)}},{key:"items",get:function(){return this.getItems()}},{key:"storeItem",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach((function(t){e.byId[t.id.toString()]=e.prepareForStoring(t)}))}},{key:"prepareForStoring",value:function(e){return e}},{key:"prepareForRetrieving",value:function(e){return e}},{key:"sanitizeBeforeSave",value:function(e){return e}},{key:"setStatus",value:function(e){this._status=e}},{key:"status",get:function(){return this._status}},{key:"setManyEventually",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){var r,n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setStatus(mr.PENDING),e.prev=1,e.next=4,t;case 4:r=e.sent,this.storeItem.apply(this,Object(bt.a)(r)),this.setStatus(mr.RESOLVED),e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(1),401!==(null===(n=e.t0.response)||void 0===n?void 0:n.status)){e.next=14;break}return e.next=14,this.accountStore.logout();case 14:throw this.setStatus(mr.REJECTED),e.t0;case 16:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setOneEventually",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(t.then((function(e){return[e]})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),gr=Object(L.a)(vr.prototype,"byId",[Ir.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),yr=Object(L.a)(vr.prototype,"_status",[Ir.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mr.IDLE}}),Object(L.a)(vr.prototype,"items",[Ir.g],Object.getOwnPropertyDescriptor(vr.prototype,"items"),vr.prototype),Object(L.a)(vr.prototype,"storeItem",[Ir.f],Object.getOwnPropertyDescriptor(vr.prototype,"storeItem"),vr.prototype),Object(L.a)(vr.prototype,"setStatus",[Ir.f],Object.getOwnPropertyDescriptor(vr.prototype,"setStatus"),vr.prototype),Object(L.a)(vr.prototype,"status",[Ir.g],Object.getOwnPropertyDescriptor(vr.prototype,"status"),vr.prototype),vr),Gr=(Pr=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e,n){var a;return Object(M.a)(this,r),(a=t.call(this,e.personService,n.accountStore)).personService=void 0,a.rootStore=void 0,Object(N.a)(a,"selectedPersonId",Er,Object(G.a)(a)),a.personService=e.personService,a.rootStore=n,Object(Ir.n)(Object(G.a)(a)),a}return Object(J.a)(r,[{key:"loadUserRelated",value:function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(this.personService.getAllRelatedToUser());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadByOrganization",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(this.personService.getAllByOrganization(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareForStoring",value:function(e){var t=new Fr(this.rootStore).fromObject(e);return Object(kr.a)(Object(wr.a)(r.prototype),"prepareForStoring",this).call(this,t)}},{key:"currentUserPersons",get:function(){var e,t=null===(e=this.accountStore.authenticatedUser)||void 0===e?void 0:e.id;return t?this.items.filter((function(e){return e.userId===t})):[]}},{key:"currentUserNonActivePersons",get:function(){var e=this;return this.currentUserPersons.filter((function(t){return t.id!==e.currentPerson.id}))}},{key:"currentPerson",get:function(){var e=this;return this.selectedPersonId&&this.currentUserPersons.find((function(t){return t.id===e.selectedPersonId}))||this.currentUserPersons[0]||null}},{key:"currentOrganizationPersons",get:function(){var e=this;return this.getItems().filter((function(t){return t.organizationId===e.rootStore.organizationStore.currentOrganizationId}))}},{key:"loadCurrentOrganizationPersons",value:function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadByOrganization(this.rootStore.organizationStore.currentOrganizationId);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"selectPerson",value:function(e){this.selectedPersonId=e}}]),r}(Jr),Er=Object(L.a)(Pr.prototype,"selectedPersonId",[Ir.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(L.a)(Pr.prototype,"currentUserPersons",[Ir.g],Object.getOwnPropertyDescriptor(Pr.prototype,"currentUserPersons"),Pr.prototype),Object(L.a)(Pr.prototype,"currentUserNonActivePersons",[Ir.g],Object.getOwnPropertyDescriptor(Pr.prototype,"currentUserNonActivePersons"),Pr.prototype),Object(L.a)(Pr.prototype,"currentPerson",[Ir.g],Object.getOwnPropertyDescriptor(Pr.prototype,"currentPerson"),Pr.prototype),Object(L.a)(Pr.prototype,"currentOrganizationPersons",[Ir.g],Object.getOwnPropertyDescriptor(Pr.prototype,"currentOrganizationPersons"),Pr.prototype),Object(L.a)(Pr.prototype,"loadCurrentOrganizationPersons",[Ir.f],Object.getOwnPropertyDescriptor(Pr.prototype,"loadCurrentOrganizationPersons"),Pr.prototype),Object(L.a)(Pr.prototype,"selectPerson",[Ir.f],Object.getOwnPropertyDescriptor(Pr.prototype,"selectPerson"),Pr.prototype),Pr),Fr=(zr=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e){var n;return Object(M.a)(this,r),(n=t.call(this)).rootStore=void 0,n.rootStore=e,n}return Object(J.a)(r,[{key:"organization",get:function(){return this.organizationId&&!this._organization?this.rootStore.organizationStore.getByIdOrLoad(this.organizationId):this._organization}}]),r}(at.b),Object(L.a)(zr.prototype,"organization",[Ir.g],Object.getOwnPropertyDescriptor(zr.prototype,"organization"),zr.prototype),zr),Vr=(Ar=function(){function e(t){Object(M.a)(this,e),this.accountService=void 0,Object(N.a)(this,"authenticatedUser",Ur,this),Object(N.a)(this,"authenticated",Rr,this),this.accountService=t,Object(Ir.n)(this)}return Object(J.a)(e,[{key:"login",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t,r){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accountService.login(t,r);case 2:return e.next=4,this.checkAuthentication();case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accountService.logout();case 2:this.setAuthenticatedUser(null);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkAuthentication",value:function(){var e=Object(oe.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accountService.getAccount();case 2:t=e.sent,this.setAuthenticatedUser(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setAuthenticatedUser",value:function(e){this.authenticatedUser=e,this.authenticated=!!e}}]),e}(),Ur=Object(L.a)(Ar.prototype,"authenticatedUser",[Ir.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rr=Object(L.a)(Ar.prototype,"authenticated",[Ir.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(L.a)(Ar.prototype,"setAuthenticatedUser",[Ir.f],Object.getOwnPropertyDescriptor(Ar.prototype,"setAuthenticatedUser"),Ar.prototype),Ar),Lr=(Dr=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e,n){var a;return Object(M.a)(this,r),(a=t.call(this,e.projectService,n.accountStore)).projectService=void 0,a.rootStore=void 0,a.projectService=e.projectService,a.rootStore=n,a}return Object(J.a)(r,[{key:"prepareForStoring",value:function(e){return Object(kr.a)(Object(wr.a)(r.prototype),"prepareForStoring",this).call(this,new Br(this.rootStore).fromObject(e))}},{key:"loadByOrganization",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(this.projectService.getAllByOrganization(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadByActiveOrganization",value:function(){var e=Object(oe.a)(ie.a.mark((function e(){var t,r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(t=this.rootStore.personStore.currentPerson)||void 0===t?void 0:t.organizationId){e.next=3;break}throw new Error("No organization selected");case 3:return e.abrupt("return",this.loadByOrganization(r));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"currentOrganizationProjects",get:function(){var e=this.rootStore.organizationStore.currentOrganizationId;return e?this.items.filter((function(t){return t.organizationId===e})):[]}},{key:"upcomingProjects",get:function(){return this.currentOrganizationProjects.filter((function(e){return!e.hasStarted()}))}},{key:"ongoingProjects",get:function(){return this.currentOrganizationProjects.filter((function(e){return e.isOngoing()}))}},{key:"endedProjects",get:function(){return this.currentOrganizationProjects.filter((function(e){return e.hasStarted()&&e.hasEnded()}))}}]),r}(Jr),Object(L.a)(Dr.prototype,"currentOrganizationProjects",[Ir.g],Object.getOwnPropertyDescriptor(Dr.prototype,"currentOrganizationProjects"),Dr.prototype),Object(L.a)(Dr.prototype,"upcomingProjects",[Ir.g],Object.getOwnPropertyDescriptor(Dr.prototype,"upcomingProjects"),Dr.prototype),Object(L.a)(Dr.prototype,"ongoingProjects",[Ir.g],Object.getOwnPropertyDescriptor(Dr.prototype,"ongoingProjects"),Dr.prototype),Object(L.a)(Dr.prototype,"endedProjects",[Ir.g],Object.getOwnPropertyDescriptor(Dr.prototype,"endedProjects"),Dr.prototype),Dr),Br=(Cr=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e){var n;return Object(M.a)(this,r),(n=t.call(this)).rootStore=void 0,n.rootStore=e,n}return Object(J.a)(r,[{key:"organization",get:function(){return this.organizationId&&!this._organization?this.rootStore.organizationStore.getByIdOrLoad(this.organizationId):this._organization}}]),r}(q),Object(L.a)(Cr.prototype,"organization",[Ir.g],Object.getOwnPropertyDescriptor(Cr.prototype,"organization"),Cr.prototype),Cr),Tr=(Nr=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e,n){var a;return Object(M.a)(this,r),(a=t.call(this,e.organizationService,n.accountStore)).rootStore=void 0,a.rootStore=n,a}return Object(J.a)(r,[{key:"currentOrganizationId",get:function(){var e;return null===(e=this.rootStore.personStore.currentPerson)||void 0===e?void 0:e.organizationId}},{key:"currentOrganization",get:function(){return this.currentOrganizationId&&this.getByIdOrLoad(this.currentOrganizationId)}}]),r}(Jr),Object(L.a)(Nr.prototype,"currentOrganizationId",[Ir.g],Object.getOwnPropertyDescriptor(Nr.prototype,"currentOrganizationId"),Nr.prototype),Object(L.a)(Nr.prototype,"currentOrganization",[Ir.g],Object.getOwnPropertyDescriptor(Nr.prototype,"currentOrganization"),Nr.prototype),Nr),Yr=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e,n){var a;return Object(M.a)(this,r),(a=t.call(this,e.skillService,n.accountStore)).skillService=void 0,a.rootStore=void 0,a.skillService=e.skillService,a.rootStore=n,a}return r}(Jr),qr=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e,n){var a;return Object(M.a)(this,r),(a=t.call(this,e.projectSkillService,n.accountStore)).projectSkillService=void 0,a.rootStore=void 0,a.projectSkillService=e.projectSkillService,a.rootStore=n,a}return Object(J.a)(r,[{key:"loadByProject",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setManyEventually(this.projectSkillService.getAllByProject(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareForStoring",value:function(e){return Object(kr.a)(Object(wr.a)(r.prototype),"prepareForStoring",this).call(this,new Qr(this.rootStore).fromObject(e))}},{key:"getItemsByProject",value:function(e){return this.items.filter((function(t){return t.projectId===e}))}}]),r}(Jr),Qr=(Mr=function(e){Object(F.a)(r,e);var t=Object(V.a)(r);function r(e){var n;return Object(M.a)(this,r),(n=t.call(this)).rootStore=void 0,n.rootStore=e,n}return Object(J.a)(r,[{key:"project",get:function(){return this.projectId&&!this._project?this.rootStore.projectStore.getByIdOrLoad(this.projectId):this._project}},{key:"skill",get:function(){return this.skillId&&!this._skill?this.rootStore.skillStore.getByIdOrLoad(this.skillId):this._skill}}]),r}(It),Object(L.a)(Mr.prototype,"project",[Ir.g],Object.getOwnPropertyDescriptor(Mr.prototype,"project"),Mr.prototype),Object(L.a)(Mr.prototype,"skill",[Ir.g],Object.getOwnPropertyDescriptor(Mr.prototype,"skill"),Mr.prototype),Mr),Wr=function e(t){Object(M.a)(this,e),this.accountStore=void 0,this.personStore=void 0,this.projectStore=void 0,this.organizationStore=void 0,this.skillStore=void 0,this.projectSkillStore=void 0,this.accountStore=new Vr(t.accountService),this.personStore=new Gr(t,this),this.projectStore=new Lr(t,this),this.organizationStore=new Tr(t,this),this.skillStore=new Yr(t,this),this.projectSkillStore=new qr(t,this)},Hr=function(e){var t=e.children,r=Ut();return Object(C.jsx)(Sr.a,{children:Object(C.jsx)(te.a,{children:Object(C.jsx)(s.Provider,{value:new Wr(r),children:t})})})};c.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(Hr,{children:Object(C.jsx)(xr,{})})}),document.getElementById("root")),r.e(3).then(r.bind(null,367))},37:function(e,t,r){"use strict";r.d(t,"a",(function(){return k})),r.d(t,"b",(function(){return N}));var n,a,i,c,o,s,u,l,j,p,b,h,d,O,f,v,g,y,m,x,S,k,w=r(19),I=r(7),z=r(11),P=r(14),E=r(16),A=r(15),U=r(8),R=(r(58),r(48)),C=r(20),D=r(43);!function(e){e[e.ADMIN=0]="ADMIN",e[e.MANAGER=1]="MANAGER",e[e.USER=2]="USER"}(k||(k={}));var N=(n=D.a.Name("persons"),a=Object(C.JsonProperty)(),i=Object(C.JsonProperty)(),c=Object(C.JsonProperty)(),o=Object(C.JsonProperty)(),s=Object(C.JsonProperty)(),u=Object(C.JsonProperty)(),l=Object(C.JsonProperty)(),j=Object(C.JsonProperty)(),p=Object(C.JsonProperty)(),n((h=function(e){Object(E.a)(r,e);var t=Object(A.a)(r);function r(){var e;Object(I.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(w.a)(e,"name",d,Object(P.a)(e)),Object(w.a)(e,"position",O,Object(P.a)(e)),Object(w.a)(e,"userId",f,Object(P.a)(e)),Object(w.a)(e,"user",v,Object(P.a)(e)),Object(w.a)(e,"capacity",g,Object(P.a)(e)),Object(w.a)(e,"skillIds",y,Object(P.a)(e)),Object(w.a)(e,"organizationId",m,Object(P.a)(e)),Object(w.a)(e,"role",x,Object(P.a)(e)),Object(w.a)(e,"image",S,Object(P.a)(e)),e._organization=void 0,e}return Object(z.a)(r,[{key:"subTitle",get:function(){var e;return[this.position,null===(e=this.organization)||void 0===e?void 0:e.name].filter(Boolean).join(" at ")}},{key:"organization",get:function(){return this._organization},set:function(e){this._organization=e}},{key:"hasPermission",value:function(e){var t=this;return!e||e.length<=0||e.some((function(e){return e===t.role}))}},{key:"humanReadableRole",get:function(){switch(this.role){case k.ADMIN:return"Admin";case k.MANAGER:return"Manager";case k.USER:return"User"}return""}}]),r}(R.a),d=Object(U.a)(h.prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=Object(U.a)(h.prototype,"position",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=Object(U.a)(h.prototype,"userId",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=Object(U.a)(h.prototype,"user",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=Object(U.a)(h.prototype,"capacity",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=Object(U.a)(h.prototype,"skillIds",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=Object(U.a)(h.prototype,"organizationId",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=Object(U.a)(h.prototype,"role",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=Object(U.a)(h.prototype,"image",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=h))||b)},43:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(7),a=r(11),i=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,null,[{key:"getName",value:function(e){return e._resourceName||e.name}},{key:"Name",value:function(e){return function(t){t._resourceName=e}}}]),e}()},48:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n,a,i,c,o,s=r(19),u=r(7),l=r(11),j=r(8),p=(r(58),r(20)),b=(n=Object(p.JsonIgnoreProperties)({ignoreUnknown:!0}),a=Object(p.JsonProperty)(),n((c=function(){function e(){Object(u.a)(this,e),Object(s.a)(this,"id",o,this)}return Object(l.a)(e,[{key:"fromObject",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=Object.getOwnPropertyDescriptor(this,t);!r||(null===r||void 0===r?void 0:r.get)&&!(null===r||void 0===r?void 0:r.set)||(this[t]=e[t])}return this}}]),e}(),o=Object(j.a)(c.prototype,"id",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=c))||i)}},[[321,1,2]]]);
//# sourceMappingURL=main.46cc3a1b.chunk.js.map