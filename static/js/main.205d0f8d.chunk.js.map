{"version":3,"sources":["services/LocalStorageService.ts","services/TokenService.ts","domain/Person.ts","hooks/useStore.ts","util/date.ts","ui/Card.tsx","ui/Badge.tsx","components/TagsGrid.tsx","components/ProjectTags.tsx","components/ProjectCard.tsx","components/FormField.tsx","components/Form.tsx","ui/Drawer.tsx","components/FormSubmitButton.tsx","hooks/useQueryValue.ts","components/RouterDrawer.tsx","components/DrawerForm.tsx","domain/Project.ts","ui/DateInput.tsx","config.ts","services/HttpClientService.ts","services/AbstractRestfulLocalStorageService.ts","domain/Notification.ts","builders/NotificationBuilder.ts","services/LocalPersonService.ts","services/LocalProjectService.ts","domain/Organization.ts","services/LocalOrganizationService.ts","domain/User.ts","services/AccountService.ts","services/LocalUserService.ts","services/TagService.ts","domain/ProjectTag.ts","services/ProjectTagService.ts","services/AttachmentUploadService.ts","services/NotificationService.ts","services/index.ts","hooks/useServices.ts","components/FormImageField.tsx","util/json.ts","components/ProjectFormDrawer.tsx","components/ProjectList.tsx","views/ActiveProjects.tsx","views/UpcomingProjects.tsx","views/EndedProjects.tsx","components/OrganizationFormDrawer.tsx","views/OrganizationProfile.tsx","components/TableSearch.tsx","components/DataTable.tsx","components/RoleBadge.tsx","ui/User.tsx","components/PersonUser.tsx","components/PersonFormDrawer.tsx","components/PersonDeleteDrawer.tsx","views/Members.tsx","routes.tsx","ui/Logo.tsx","ui/logo.png","ui/Layout.tsx","ui/NavItemGroup.tsx","ui/NavItem.tsx","ui/Menu.tsx","components/NotificationsDrawer.tsx","components/NotificationsHandle.tsx","hooks/useInterval.ts","components/ConnectedLayout.tsx","components/AuthenticationGuard.tsx","views/NoOrganization.tsx","components/PersonGuard.tsx","views/Home.tsx","views/Logout.tsx","views/Start.tsx","components/OrganizationCreateForm.tsx","views/OrganizationWizard.tsx","App.tsx","store/AbstractResourceStore.ts","store/PersonStore.ts","store/AccountStore.ts","store/ProjectStore.ts","store/OrganizationStore.ts","store/TagStore.ts","store/ProjectTagStore.ts","store/NotificationStore.ts","store/index.ts","Providers.tsx","index.tsx","decorators/Resource.ts","domain/AbstractDomain.ts","domain/Tag.ts"],"names":["LocalStorageService","mapper","ObjectMapper","key","value","console","info","localStorage","setItem","this","getFullKey","stringify","type","result","getItem","parse","mainCreator","removeItem","KEY_PREFIX","TokenService","localStorageService","TOKEN_KEY","token","Role","Person","Resource","Name","JsonProperty","_organization","position","organization","name","filter","Boolean","join","scope","length","some","role","ADMIN","MANAGER","USER","AbstractDomain","StoreContext","React","createContext","useStore","store","useContext","Error","toDate","date","parseISO","Date","formatDate","format","Card","children","props","bg","borderRadius","boxShadow","p","overflow","Badge","textTransform","TagsGrid","tags","columns","spacingX","map","tag","spacing","py","icon","Warning","fontSize","observer","projectId","projectTagStore","useEffect","loadByProject","projectTags","getItemsByProject","technologies","projectTag","TagType","TECHNOLOGY","positions","POSITION","reduce","acc","current","capacity","toString","ProjectCard","project","highlighted","content","width","height","src","image","alt","objectFit","textAlign","px","clientName","ml","colorScheme","size","dateStart","dateEnd","fontWeight","color","alignItems","id","justifyContent","as","Link","to","in","initialScale","FormField","required","label","helperText","defaultValue","pattern","validate","useFormContext","errors","control","getValues","error","message","Children","count","child","only","rules","render","onChange","onBlur","isRequired","isInvalid","isValidElement","cloneElement","defaultProps","Form","onSubmit","defaultValues","successMessage","formContext","useForm","handleSubmit","reset","isSubmitSuccessful","formState","toast","useToast","description","status","isClosable","Drawer","placement","FormSubmitButton","isSubmitting","isDirty","isLoading","disabled","useQueryValue","location","useLocation","URLSearchParams","search","get","RouterDrawer","history","useHistory","isOpen","handleClose","urlSearchParams","delete","push","onClose","DrawerForm","submitButton","header","autoClose","formProps","drawerContext","values","a","text","ProjectState","Project","_image","GeoPattern","generate","toDataUri","hasStarted","hasEnded","isOngoing","ONGOING","ENDED","UPCOMING","DateInput","dateValue","config","dataSource","HttpClientService","tokenService","apiURL","passToken","accept","httpClient","axios","create","baseURL","interceptors","request","use","getToken","headers","authorization","Accept","response","undefined","data","title","detail","Promise","reject","AbstractRestfulLocalStorageService","domain","getName","params","results","resource","r","getMany","item","items","updatedItem","find","i","hasOwnProperty","uuid","Notification","NotificationBuilder","notification","path","personId","LocalPersonService","notificationService","userId","organizationId","init","build","LocalProjectService","personService","getAllByOrganization","forEach","Organization","LocalOrganizationService","User","AccountService","userService","email","password","users","setToken","user","getOne","clearToken","LocalUserService","TagService","Tag","ProjectTag","_project","_tag","ProjectTagService","AttachmentUploadService","fileyClient","file","formData","FormData","append","post","NotificationService","RootService","attachmentUploadService","accountService","projectService","organizationService","tagService","projectTagService","getHttpClientService","getTokenService","getAttachmentUploadService","getHttpClient","ServicesContext","initialize","useServices","FormImageField","setValue","watch","style","cursor","display","e","target","files","upload","url","shouldDirty","objectMapper","input","projectStore","organizationStore","currentOrganizationId","update","query","getById","autoFocus","ProjectList","projects","highlightedProjectId","loadByActiveOrganization","ongoingProjects","upcomingProjects","endedProjects","OrganizationFormDrawer","currentOrganization","logo","aria-label","TableSearch","onFilter","placeholder","term","row","column","searchable","accessor","includes","toLocaleLowerCase","DataTable","linkTo","sortable","useState","setFilter","sortBy","setSortBy","newFilter","variant","index","onClick","order","orderBy","rowIndex","isLink","columnIndex","disableLink","stopPropagation","RoleBadge","person","humanReadableRole","subTitle","align","stackProps","avatar","personStore","PersonDeleteDrawer","loadCurrentOrganizationPersons","currentOrganizationPersons","currentPerson","routes","component","ActiveProjects","UpcomingProjects","EndedProjects","OrganizationProfile","Members","Logo","Layout","navigation","topRight","h","templateRows","templateColumns","gap","rowSpan","colSpan","justify","NavItemGroup","mt","casing","NavItem","NavLink","activeStyle","backgroundColor","pl","pr","Menu","handle","isLazy","offset","notifications","notificationStore","formattedDate","createdAt","opacity","readAt","borderWidth","rounded","dateTime","formatDistanceToNow","addSuffix","my","markAsRead","currentPersonNotifications","currentPersonUnreadNotificationsCount","loadByActivePerson","callback","delay","savedCallback","useRef","setInterval","clearInterval","useInterval","borderColor","boxSize","currentUserNonActivePersons","loadUserRelated","route","hasPermission","subRoute","selectPerson","flat","AuthenticationGuard","forbiddenAction","accountStore","authenticated","checkAuthentication","NoOrganization","Home","buildInfo","process","REACT_APP_BUILD_DATE","Logout","logout","Start","prompt","login","catch","then","needsRegister","register","replace","err","alert","GuardedStart","OrganizationCreateForm","organizationName","OrganizationWizard","savedOrganization","authenticatedUser","savedPerson","App","ResourceStoreStatus","exact","AbstractResourceStore","service","makeObservable","setManyEventually","setOneEventually","existingItem","storeItem","promise","sanitizeBeforeSave","setStatus","PENDING","byId","RESOLVED","REJECTED","loadOne","Object","prepareForRetrieving","getItems","prepareForStoring","_status","observable","IDLE","computed","action","PersonStore","rootService","rootStore","getAllRelatedToUser","extendedItem","StoredPerson","fromObject","authenticatedUserId","currentUserPersons","selectedPersonId","loadByOrganization","getByIdOrLoad","AccountStore","setAuthenticatedUser","getAccount","ProjectStore","StoredProject","currentOrganizationProjects","OrganizationStore","TagStore","ProjectTagStore","getAllByProject","StoredProjectTag","tagId","tagStore","NotificationStore","getAllByPerson","loadByPerson","sort","b","getTime","n","RootStore","Providers","services","Provider","ReactDOM","StrictMode","document","getElementById","_resourceName","JsonIgnoreProperties","ignoreUnknown","payload","descriptor","getOwnPropertyDescriptor","set"],"mappings":"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","file":"static/js/main.205d0f8d.chunk.js","sourcesContent":["import {ObjectMapper} from 'jackson-js'\nimport {ClassType} from 'jackson-js/dist/@types'\n\nexport default class LocalStorageService<T> {\n  private static KEY_PREFIX = 'LSS/'\n  private readonly mapper = new ObjectMapper()\n\n  public setItem(key: string, value: T): void {\n    console.info(`LSS: Storing item \"${key}\"`)\n    localStorage.setItem(this.getFullKey(key), this.mapper.stringify(value))\n  }\n\n  public getItem(key: string, type?: ClassType<T>): T {\n    console.info(`LSS: Retrieving item \"${key}\"`)\n    const result = localStorage.getItem(this.getFullKey(key))\n\n    if (!result) {\n      return null\n    }\n\n    return this.mapper.parse(result, type ? {mainCreator: () => [type]} : {})\n  }\n\n  public removeItem(key: string): void {\n    console.info(`LSS: Removing item item \"${key}\"`)\n    localStorage.removeItem(this.getFullKey(key))\n  }\n\n  private getFullKey(key: string): string {\n    return LocalStorageService.KEY_PREFIX + key\n  }\n}","import LocalStorageService from './LocalStorageService'\n\nexport default class TokenService {\n  private static TOKEN_KEY = 'token'\n  private readonly localStorageService: LocalStorageService<string>\n\n  public constructor(localStorageService: LocalStorageService<string>) {\n    this.localStorageService = localStorageService\n  }\n\n  public getToken(): string | null {\n    return this.localStorageService.getItem(TokenService.TOKEN_KEY) || null\n  }\n\n  public setToken(token: string): void {\n    this.localStorageService.setItem(TokenService.TOKEN_KEY, token)\n  }\n\n  public clearToken(): void {\n    this.localStorageService.removeItem(TokenService.TOKEN_KEY)\n  }\n}","import Organization from './Organization'\nimport User from './User'\nimport AbstractDomain from './AbstractDomain'\nimport {JsonProperty} from 'jackson-js'\nimport Resource from '../decorators/Resource'\n\nexport enum Role {\n    ADMIN,\n    MANAGER,\n    USER,\n}\n\n@Resource.Name('persons')\nexport default class Person extends AbstractDomain<Person>{\n    @JsonProperty() public name: string\n    @JsonProperty() public position: string\n    @JsonProperty() public userId?: string | null\n    @JsonProperty() public user?: User\n    @JsonProperty() public capacity?: number | null\n    @JsonProperty() public tagIds: string[]\n    @JsonProperty() public organizationId: string\n    @JsonProperty() public role: Role\n    @JsonProperty() public image?: string\n    protected _organization?: Organization\n\n    public get subTitle(): string {\n        const pieces = [this.position, this.organization?.name].filter(Boolean)\n\n        return pieces.join(' at ')\n    }\n\n    public get organization(): Organization {\n        return this._organization\n    }\n\n    public set organization(value: Organization) {\n        this._organization = value\n    }\n\n    public hasPermission(scope: Role[]): boolean {\n        return !scope || scope.length <= 0 || scope.some(role => role === this.role)\n    }\n\n    public get humanReadableRole(): string {\n        switch (this.role) {\n            case Role.ADMIN:\n                return 'Admin'\n            case Role.MANAGER:\n                return 'Manager'\n            case Role.USER:\n                return 'User'\n        }\n\n        return ''\n    }\n}\n","import React from 'react'\nimport RootStore from '../store'\n\nexport const StoreContext = React.createContext<RootStore | null>(null)\n\nexport default function useStore(): RootStore {\n  const store = React.useContext(StoreContext)\n\n  if (!store) {\n    throw new Error('Store is not provided')\n  }\n\n  return store\n}","import {parseISO, format} from 'date-fns'\n\nexport function toDate(date: string | Date | null): Date | null {\n  if (!date) {\n    return null\n  }\n\n  if (typeof date === 'string') {\n    return parseISO(date)\n  }\n\n  return new Date(date)\n}\n\nexport function formatDate(date: Date | null): string | null {\n  if (!date) {\n    return null\n  }\n\n  return format(date, 'dd.MM.yyyy')\n}","import React from 'react'\nimport {Box, BoxProps} from '@chakra-ui/react'\n\nexport interface CardProps extends Partial<Pick<BoxProps, 'p'>> {\n}\n\nconst Card: React.FC<CardProps> = ({children, ...props}) => {\n  return (\n      <Box bg=\"white\" borderRadius=\"md\" boxShadow=\"lg\" p={4} overflow=\"hidden\" {...props}>\n        {children}\n      </Box>\n  )\n}\n\nexport default Card","import React from 'react'\nimport {Badge as ChakraBadge, BadgeProps as ChakraBadgeProps} from '@chakra-ui/react'\n\nexport interface BadgeProps extends ChakraBadgeProps {\n\n}\n\nconst Badge: React.FC<BadgeProps> = (props) => {\n  return (\n      <ChakraBadge borderRadius=\"md\" textTransform=\"unset\" {...props} />\n  )\n}\n\nexport default Badge","import React from 'react'\nimport {HStack, SimpleGrid, Text} from '@chakra-ui/react'\nimport {WarningIcon} from '@chakra-ui/icons'\n\nexport interface TagsGridProps {\n  tags: Array<{ name: string, icon?: any }>\n}\n\nconst TagsGrid: React.FC<TagsGridProps> = ({tags}) => {\n  return (\n      <SimpleGrid columns={2} spacingX={4}>\n        {tags.map(tag => (\n            <HStack\n                spacing={2}\n                py={1}\n                key={tag.name}\n            >\n              {tag.icon || <WarningIcon />}\n              <Text fontSize=\"xs\">{tag.name}</Text>\n            </HStack>\n        ))}\n      </SimpleGrid>\n  )\n}\n\nexport default TagsGrid","import React, {useEffect} from 'react'\nimport useStore from '../hooks/useStore'\nimport {observer} from 'mobx-react'\nimport TagsGrid from './TagsGrid'\nimport {TagType} from '../domain/Tag'\nimport {FaLocationArrow, FaUsers} from 'react-icons/fa'\n\nexport interface ProjectTagsProps {\n  projectId: string\n}\n\nconst ProjectTags: React.FC<ProjectTagsProps> = ({projectId}) => {\n  const {projectTagStore} = useStore()\n\n  useEffect(() => {\n    projectTagStore.loadByProject(projectId)\n  }, [projectId])\n\n  const projectTags = projectTagStore.getItemsByProject(projectId)\n  const technologies = projectTags.filter(projectTag => projectTag.tag?.type === TagType.TECHNOLOGY)\n  const positions = projectTags.filter(projectTag => projectTag.tag?.type === TagType.POSITION)\n  const tags: Array<{name: string, icon?: any}> = technologies.map(projectTag => ({\n    name: projectTag.tag.name\n  }))\n\n  const positionsCount = positions.reduce(((acc, current) => acc + (current.capacity || 1)), 0)\n\n  if (positionsCount > 0) {\n    positions.reduce(((acc, current) => acc + (current.capacity || 1)), 0).toString()\n  }\n\n  return (\n      <TagsGrid tags={tags} />\n  )\n}\n\nexport default observer(ProjectTags)","import React from 'react'\nimport Project from '../domain/Project'\nimport {Button, Divider, HStack, Image, ScaleFade, Stack, Text} from '@chakra-ui/react'\nimport {formatDate} from '../util/date'\nimport Card from '../ui/Card'\nimport Badge from '../ui/Badge'\nimport {Link} from 'react-router-dom'\nimport TagsGrid from './TagsGrid'\nimport {FaBootstrap, FaLocationArrow, FaReact, FaUsers} from 'react-icons/fa'\nimport ProjectTags from './ProjectTags'\n\nexport interface ProjectCardProps {\n  project: Project\n  highlighted?: boolean\n}\n\nconst ProjectCard: React.FC<ProjectCardProps> = ({project, highlighted}) => {\n  const content = (\n      <Card p={0}>\n        <Stack spacing={2}>\n          <Image\n              width=\"100%\"\n              height={200}\n              src={project.image}\n              alt={project.name}\n              objectFit=\"cover\"\n          />\n\n          <Text fontSize=\"lg\" textAlign=\"center\" px={4}>\n            {project.name}\n            {project.clientName && <Badge ml={2} colorScheme=\"purple\" size=\"xs\">{project.clientName}</Badge>}\n          </Text>\n\n          {(project.dateStart || project.dateEnd) && (\n              <Text fontSize=\"xs\" fontWeight=\"bold\" textAlign=\"center\" color=\"gray.500\" px={4}>\n                {formatDate(project.dateStart) || '...'}  {formatDate(project.dateEnd) || '...'}\n              </Text>\n          )}\n\n          <Stack px={4} alignItems=\"center\">\n            <ProjectTags projectId={project.id} />\n          </Stack>\n\n          <Stack p={4}>\n            <Divider />\n\n            <HStack justifyContent=\"flex-end\" spacing={2}>\n              <Button size=\"sm\" as={Link} to={`?project=${project.id}`} colorScheme=\"purple\">Open</Button>\n            </HStack>\n          </Stack>\n        </Stack>\n      </Card>\n  )\n\n  if (!highlighted) {\n    return content\n  }\n\n  return (\n      <ScaleFade in initialScale={0.3}>\n        {content}\n      </ScaleFade>\n  )\n}\n\nexport default ProjectCard","import React from 'react'\nimport {FormControl, FormErrorMessage, FormHelperText, FormLabel,} from '@chakra-ui/react'\nimport {Controller, useFormContext} from 'react-hook-form'\n\ninterface FormFieldProps {\n  name: string\n  required?: boolean\n  label?: string\n  helperText?: string\n  defaultValue?: string\n  pattern?: RegExp\n  validate?: (value: any, getValues: () => any) => string | true\n}\n\nconst FormField: React.FC<FormFieldProps> = ({children, name, required, label, helperText, defaultValue, pattern, validate}) => {\n  const {errors, control, getValues} = useFormContext()\n  const error = errors[name]?.message || null\n\n  if (React.Children.count(children) > 1) {\n    throw new Error('Invalid children count')\n  }\n\n  const child = children && React.Children.only(children)\n\n  return (\n      <Controller\n        control={control}\n        name={name}\n        rules={{\n          required,\n          pattern,\n          validate: validate && ((value: any) => validate(value, getValues)),\n        }}\n        defaultValue={defaultValue}\n        render={({ onChange, onBlur, value }) => (\n            <FormControl\n                id={`formField__${name}`}\n                isRequired={required}\n                isInvalid={!!error}\n            >\n              {label && <FormLabel>{label}</FormLabel>}\n              {child && React.isValidElement(child) && React.cloneElement(child, {\n                name,\n                onChange,\n                onBlur,\n                value\n              })}\n              {error && <FormErrorMessage>{error}</FormErrorMessage>}\n              {helperText && <FormHelperText>{helperText}</FormHelperText>}\n\n            </FormControl>\n        )}\n      />\n  )\n}\n\nFormField.defaultProps = {\n  defaultValue: '',\n}\n\nexport default FormField","import React, {useEffect} from 'react'\nimport {useForm, UseFormMethods, FormProvider} from 'react-hook-form'\nimport {useToast} from '@chakra-ui/react'\n\nexport interface FormProps {\n  onSubmit: (values: object) => void | Promise<void>\n  children: React.ReactNode | ((formContext: UseFormMethods) => any)\n  defaultValues?: object\n  successMessage?: string\n}\n\nconst Form: React.FC<FormProps> = ({onSubmit, children, defaultValues, successMessage}) => {\n  const formContext = useForm({\n    defaultValues\n  })\n  const {handleSubmit, reset, formState: {isSubmitSuccessful}} = formContext\n  const toast = useToast()\n\n\n  useEffect(() => {\n    if (isSubmitSuccessful && successMessage) {\n      toast({\n        description: successMessage,\n        status: 'success',\n        isClosable: true\n      })\n    }\n  }, [isSubmitSuccessful])\n\n  useEffect(() => {\n    if (isSubmitSuccessful) {\n      reset(defaultValues)\n    }\n  }, [reset, defaultValues, isSubmitSuccessful])\n\n  return (\n      <FormProvider {...formContext}>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          {typeof children === 'function' ? (children as any)(formContext) : children}\n        </form>\n      </FormProvider>\n  )\n}\n\nexport default Form","import React from 'react'\nimport {\n  Drawer as ChakraDrawer,\n  DrawerProps as ChakraDrawerProps,\n  DrawerBody,\n  DrawerCloseButton,\n  DrawerContent,\n  DrawerFooter,\n  DrawerHeader,\n  DrawerOverlay\n} from '@chakra-ui/react'\n\nexport interface DrawerProps extends ChakraDrawerProps {\n\n}\n\nconst Drawer: React.FC<DrawerProps> = ({children, ...props}) => {\n  return (\n      <ChakraDrawer placement=\"right\" {...props}>\n        <DrawerOverlay>\n          <DrawerContent>\n            <DrawerCloseButton/>\n            {children}\n          </DrawerContent>\n        </DrawerOverlay>\n      </ChakraDrawer>\n  )\n}\n\nexport {\n  DrawerHeader,\n  DrawerBody,\n  DrawerFooter,\n}\n\nexport default Drawer","import React from 'react'\nimport {useFormContext} from 'react-hook-form'\nimport {Button} from '@chakra-ui/react'\n\nexport interface FormSubmitButtonProps {\n\n}\n\nconst FormSubmitButton: React.FC<FormSubmitButtonProps> = ({children}) => {\n  const {formState: {isSubmitting, isDirty, isSubmitSuccessful}} = useFormContext()\n\n  return (\n      <Button\n          type=\"submit\"\n          colorScheme=\"purple\"\n          isLoading={isSubmitting}\n          disabled={!isDirty || isSubmitSuccessful}\n      >\n        {children}\n      </Button>\n  )\n}\n\nexport default FormSubmitButton","import {useLocation} from 'react-router-dom'\n\nexport default function useQueryValue(name: string): string | null {\n  const location = useLocation()\n  const value = new URLSearchParams(location.search).get(name)\n\n  return value\n}","import React from 'react'\nimport {useHistory, useLocation} from 'react-router-dom'\nimport useQueryValue from '../hooks/useQueryValue'\nimport Drawer from '../ui/Drawer'\n\nexport interface DrawerContext {\n  value: string\n  handleClose: () => void\n}\n\nexport interface RouterDrawerProps {\n  name: string\n  children?: ((drawerContext: DrawerContext) => any) | React.ReactNode\n}\n\nconst RouterDrawer: React.FC<RouterDrawerProps> = ({name, children}) => {\n  const location = useLocation()\n  const history = useHistory()\n  const value = useQueryValue(name)\n  const isOpen = value !== null\n\n  const handleClose = () => {\n    const urlSearchParams = new URLSearchParams(location.search)\n    urlSearchParams.delete(name)\n\n    history.push(`?${urlSearchParams.toString()}`)\n  }\n\n  return (\n      <Drawer isOpen={isOpen} onClose={handleClose}>\n        {typeof children === 'function' ? (children as any)({value, handleClose}) : children}\n      </Drawer>\n  )\n}\n\nexport default RouterDrawer","import React from 'react'\nimport Form, {FormProps} from './Form'\nimport {DrawerBody, DrawerFooter, DrawerHeader} from '../ui/Drawer'\nimport FormSubmitButton, {FormSubmitButtonProps} from './FormSubmitButton'\nimport RouterDrawer from './RouterDrawer'\nimport {UseFormMethods} from 'react-hook-form'\n\ninterface DrawerFormProps extends Omit<FormProps, 'children' | 'onSubmit'> {\n  header?: React.ReactNode\n  submitButton?: FormSubmitButtonProps & { text: string }\n  name: string\n  children: React.ReactNode | ((context: { formContext: UseFormMethods, drawerContext: string }) => any)\n  onSubmit: (values: object, drawerValue: string) => void | Promise<void>\n  autoClose?: boolean\n}\n\nconst DrawerForm: React.FC<DrawerFormProps> = ({submitButton, name, header, children, onSubmit, autoClose, ...formProps}) => {\n  return (\n      <RouterDrawer name={name}>\n        {((drawerContext) => {\n          const handleSubmit = async (values: any) => {\n            const result = await onSubmit(values, drawerContext.value)\n\n            if (autoClose) {\n              drawerContext.handleClose()\n            }\n\n            return result\n          }\n\n          return (\n              <Form onSubmit={handleSubmit} {...formProps}>\n                {(formContext) => (\n                    <>\n                      {header && <DrawerHeader>{header}</DrawerHeader>}\n\n                      <DrawerBody>\n                        {typeof children === 'function' ? (children as any)({ formContext, drawerContext }) : children}\n                      </DrawerBody>\n\n                      {submitButton && (\n                          <DrawerFooter>\n                            <FormSubmitButton {...submitButton}>{submitButton.text}</FormSubmitButton>\n                          </DrawerFooter>\n                      )}\n                    </>\n                )}\n              </Form>\n          )\n        })}\n      </RouterDrawer>\n  )\n}\n\nDrawerForm.defaultProps = {\n  submitButton: {\n    text: 'Save'\n  },\n  autoClose: true\n}\n\nexport default DrawerForm","import AbstractDomain from './AbstractDomain'\nimport Organization from './Organization'\nimport {JsonProperty} from 'jackson-js'\nimport Resource from '../decorators/Resource'\n// @ts-ignore\nimport GeoPattern from 'geopattern'\n\nexport enum ProjectState {\n    UPCOMING,\n    ONGOING,\n    ENDED,\n}\n\n@Resource.Name('projects')\nexport default class Project extends AbstractDomain<Project> {\n    @JsonProperty() public name: string\n    @JsonProperty() public dateStart?: Date\n    @JsonProperty() public dateEnd?: Date\n    @JsonProperty() public organizationId: string\n    @JsonProperty() public clientName?: string\n    private _image?: string\n    protected _organization?: Organization\n\n    @JsonProperty()\n    get organization(): Organization {\n        return this._organization\n    }\n\n    set organization(value: Organization) {\n        this._organization = value\n    }\n\n    @JsonProperty()\n    get image(): string {\n        if (!this._image && this.id) {\n            return GeoPattern.generate(this.name).toDataUri()\n        }\n\n        return this._image\n    }\n\n    set image(value: string) {\n        this._image = value\n    }\n\n    public hasStarted(date: Date = new Date()): boolean {\n        return !this.dateStart || this.dateStart < date\n    }\n\n    public hasEnded(date: Date = new Date()): boolean {\n        return this.dateEnd && this.dateEnd < date\n    }\n\n    public isOngoing(): boolean {\n        return this.hasStarted() && !this.hasEnded()\n    }\n\n    public get state(): ProjectState {\n        if (this.isOngoing()) {\n            return ProjectState.ONGOING\n        }\n\n        if (!this.hasStarted()) {\n            return ProjectState.UPCOMING\n        }\n\n        if (this.hasEnded()) {\n            return ProjectState.ENDED\n        }\n    }\n}","import React from 'react'\nimport {Input, InputProps} from '@chakra-ui/react'\nimport {format} from 'date-fns'\nimport {toDate} from '../util/date'\n\nexport interface DateInputProps extends Omit<InputProps, 'type' | 'value'> {\n  value?: Date\n}\n\nconst DateInput: React.FC<DateInputProps> = ({ value, ...props}) => {\n  const dateValue = value && toDate(value)\n\n  return (\n      <Input {...props} value={dateValue && format(dateValue, 'yyyy-MM-dd')} type=\"date\" />\n  )\n}\n\nexport default DateInput","interface Config {\n  dataSource: string | null\n}\n\nconst config: Config = {\n  dataSource: null\n}\n\nexport default config","import axios  from 'axios'\nimport TokenService from './TokenService'\nimport HttpClient from './HttpClient'\n\nexport default class HttpClientService {\n  private readonly tokenService: TokenService\n\n  public constructor(tokenService: TokenService) {\n    this.tokenService = tokenService\n  }\n\n  public create(apiURL?: string, passToken: boolean = true, accept: string = 'application/json'): HttpClient {\n    const httpClient = axios.create({\n      baseURL: apiURL\n    })\n\n    httpClient.interceptors.request.use(async (config) => {\n      const token = await this.tokenService.getToken()\n\n      if (passToken && token) {\n        config.headers.authorization = `Bearer ${token}`\n      }\n\n      if (accept && !config.headers.Accept) {\n        config.headers.Accept = 'application/json'\n      }\n\n      return config\n    })\n\n    httpClient.interceptors.response.use(undefined, error => {\n      const { title, detail, message } = error?.response?.data || {}\n      error.message = title || detail || message || error.message\n\n      return Promise.reject(error)\n    })\n\n    return httpClient\n  }\n}","import { v4 as uuid } from 'uuid'\nimport LocalStorageService from './LocalStorageService'\nimport {ResourceId} from '../types'\nimport RestfulService from './RestfulService'\nimport AbstractDomain from '../domain/AbstractDomain'\nimport {ClassType} from 'jackson-js/dist/@types'\nimport Resource from '../decorators/Resource'\n\nexport default class AbstractRestfulLocalStorageService<T extends AbstractDomain<T>> implements RestfulService<T> {\n  private readonly domain: ClassType<T>\n  private readonly localStorageService: LocalStorageService<T[]>\n\n  public constructor(domain: ClassType<T>, localStorageService: LocalStorageService<T[]>) {\n    this.domain = domain\n    this.localStorageService = localStorageService\n  }\n\n  private get resource(): string {\n    return Resource.getName(this.domain)\n  }\n\n  public async getMany(params: object = {}): Promise<T[]> {\n    let results = this.localStorageService.getItem(this.resource)\n\n    if (!results) {\n      return []\n    }\n\n    for (const filter in params) {\n      // @ts-ignore\n      results = results.filter(r => r[filter] === params[filter])\n    }\n\n    return results\n  }\n\n  public async getOne(id: ResourceId, params: object = {}): Promise<T> {\n    const [result] = await this.getMany({ id })\n\n    if (!result) {\n      throw new Error(`Item ${id} not found`)\n    }\n\n    return result\n  }\n\n  public async update(id: ResourceId, item: Partial<T>): Promise<T> {\n    const items = this.localStorageService.getItem(this.resource) || []\n\n    const updatedItem = items?.find(i => i.id === id)\n\n    if (!updatedItem) {\n      throw new Error(`Item ${id} not found`)\n    }\n\n    for (const key in item) {\n      if (!item.hasOwnProperty(key)) {\n        continue\n      }\n      updatedItem[key] = item[key]!\n    }\n\n    this.localStorageService.setItem(this.resource, items)\n\n    return updatedItem\n  }\n\n  public async create(item: T): Promise<T> {\n    const items = this.localStorageService.getItem(this.resource) || []\n\n    item.id = uuid()\n\n    this.localStorageService.setItem(this.resource, [\n        ...items,\n        item\n    ])\n\n    return item\n  }\n\n  public async delete(id: ResourceId): Promise<void> {\n    const items = this.localStorageService.getItem(this.resource) || []\n\n    this.localStorageService.setItem(this.resource, items?.filter(i => i.id !== id))\n  }\n}","import AbstractDomain from './AbstractDomain'\nimport {JsonProperty} from 'jackson-js'\nimport Resource from '../decorators/Resource'\n\n@Resource.Name('notifications')\nexport default class Notification extends AbstractDomain<Notification> {\n  @JsonProperty() public createdAt: Date = new Date()\n  @JsonProperty() public title: string\n  @JsonProperty() public content: string\n  @JsonProperty() public path: string\n  @JsonProperty() public readAt?: Date\n  @JsonProperty() public personId: string\n}","import Notification from '../domain/Notification'\n\nexport default class NotificationBuilder {\n  public constructor(private readonly notification: Notification) {\n\n  }\n\n  public static init(): NotificationBuilder {\n    return new NotificationBuilder(new Notification())\n  }\n\n  public build(): Notification {\n    return this.notification\n  }\n\n  public title(value: string): NotificationBuilder {\n    this.notification.title = value\n\n    return this\n  }\n\n  public content(value: string): NotificationBuilder {\n    this.notification.content = value\n\n    return this\n  }\n\n  public path(value: string): NotificationBuilder {\n    this.notification.path = value\n\n    return this\n  }\n\n  public personId(value: string): NotificationBuilder {\n    this.notification.personId = value\n\n    return this\n  }\n}","import AbstractRestfulLocalStorageService from './AbstractRestfulLocalStorageService'\nimport Person from '../domain/Person'\nimport LocalStorageService from './LocalStorageService'\nimport PersonService from './PersonService'\nimport TokenService from './TokenService'\nimport NotificationService from './NotificationService'\nimport Notification from '../domain/Notification'\nimport NotificationBuilder from '../builders/NotificationBuilder'\n\nexport default class LocalPersonService extends AbstractRestfulLocalStorageService<Person> implements PersonService {\n  public constructor(\n      localStorageService: LocalStorageService<Person[]>,\n      private readonly tokenService: TokenService,\n      private readonly notificationService: NotificationService\n  ) {\n    super(Person, localStorageService)\n  }\n\n  public async getAllRelatedToUser(): Promise<Person[]> {\n    return this.getMany({userId: this.tokenService.getToken()})\n  }\n\n  public async getAllByOrganization(organizationId: string): Promise<Person[]> {\n    return this.getMany({organizationId})\n  }\n\n  public async create(item: Person): Promise<Person> {\n    const result = await super.create(item)\n\n    this.notificationService.create(\n        NotificationBuilder\n            .init()\n            .title('Hey!')\n            .content('It\\'s nice to see you')\n            .personId(item.id)\n            .build()\n    )\n\n    return result\n  }\n}","import AbstractRestfulLocalStorageService from './AbstractRestfulLocalStorageService'\nimport Project from '../domain/Project'\nimport LocalStorageService from './LocalStorageService'\nimport ProjectService from './ProjectService'\nimport NotificationBuilder from '../builders/NotificationBuilder'\nimport NotificationService from './NotificationService'\nimport PersonService from './PersonService'\n\nexport default class LocalProjectService extends AbstractRestfulLocalStorageService<Project> implements ProjectService {\n  public constructor(localStorageService: LocalStorageService<Project[]>, private readonly notificationService: NotificationService, private readonly personService: PersonService) {\n    super(Project, localStorageService)\n  }\n\n  public getAllByOrganization(organizationId: string): Promise<Project[]> {\n    return this.getMany({ organizationId })\n  }\n\n  public async create(item: Project): Promise<Project> {\n    const result = await super.create(item)\n\n    const persons = await this.personService.getAllByOrganization(item.organizationId)\n\n    persons.forEach((p) => {\n      this.notificationService.create(\n          NotificationBuilder\n              .init()\n              .title('New project')\n              .content(`New project *${item.name}* has been created. Go check it out!`)\n              .path('/not-found')\n              .personId(p.id)\n              .build()\n      )\n    })\n\n    return result\n  }\n}","import AbstractDomain from './AbstractDomain'\nimport {JsonProperty} from 'jackson-js'\nimport Resource from '../decorators/Resource'\n\n@Resource.Name('organizations')\nexport default class Organization extends AbstractDomain<Organization> {\n  @JsonProperty() public name: string\n  @JsonProperty() public logo?: string\n}","import AbstractRestfulLocalStorageService from './AbstractRestfulLocalStorageService'\nimport Organization from '../domain/Organization'\nimport LocalStorageService from './LocalStorageService'\nimport OrganizationService from './OrganizationService'\n\nexport default class LocalOrganizationService extends AbstractRestfulLocalStorageService<Organization> implements OrganizationService {\n  public constructor(localStorageService: LocalStorageService<Organization[]>) {\n    super(Organization, localStorageService)\n  }\n}","import AbstractDomain from './AbstractDomain'\nimport {JsonProperty} from 'jackson-js'\nimport Resource from '../decorators/Resource'\n\n@Resource.Name('users')\nexport default class User extends AbstractDomain<User> {\n  @JsonProperty() public email: string\n}","import TokenService from './TokenService'\nimport HttpClient from './HttpClient'\nimport UserService from './UserService'\nimport User from '../domain/User'\n\nexport default class AccountService {\n  private readonly httpClient: HttpClient\n  private readonly tokenService: TokenService\n  private readonly userService: UserService\n\n  public constructor(httpClient: HttpClient, tokenService: TokenService, userService: UserService) {\n    this.httpClient = httpClient\n    this.tokenService = tokenService\n    this.userService = userService\n  }\n\n  public async login(email: string, password: string): Promise<void> {\n    // const { data } = await this.httpClient.post<{ token: string }>('/account/login', { email, password })\n    //this.tokenService.setToken(data.token)\n\n    const users = await this.userService.getMany({email})\n\n    if (!users.length) {\n      throw new Error('User not found')\n    }\n\n    this.tokenService.setToken(users[0].id)\n  }\n\n  public async register(email: string, password: string): Promise<void> {\n    /*await this.httpClient.post('/account/register', {\n      email,\n      password\n    })*/\n\n    const users = await this.userService.getMany({email})\n\n    if (users.length) {\n      throw new Error('User already exists')\n    }\n\n    const user = new User()\n    user.email = email\n\n    await this.userService.create(user)\n  }\n\n  public async getAccount(): Promise<User | null> {\n    const token = this.tokenService.getToken()\n\n    if (!token) {\n      return null\n    }\n\n    return this.userService.getOne(token)\n  }\n\n  public async logout(): Promise<void> {\n    this.tokenService.clearToken()\n  }\n}","import AbstractRestfulLocalStorageService from './AbstractRestfulLocalStorageService'\nimport User from '../domain/User'\nimport LocalStorageService from './LocalStorageService'\nimport UserService from './UserService'\n\nexport default class LocalUserService extends AbstractRestfulLocalStorageService<User> implements UserService {\n  public constructor(localStorageService: LocalStorageService<User[]>) {\n    super(User, localStorageService)\n  }\n}","import AbstractRestfulLocalStorageService from './AbstractRestfulLocalStorageService'\nimport LocalStorageService from './LocalStorageService'\nimport Tag from '../domain/Tag'\n\nexport default class TagService extends AbstractRestfulLocalStorageService<Tag> {\n  public constructor(localStorageService: LocalStorageService<Tag[]>) {\n    super(Tag, localStorageService)\n  }\n}","import AbstractDomain from './AbstractDomain'\nimport Project from './Project'\nimport Tag from './Tag'\nimport {JsonProperty} from 'jackson-js'\nimport Resource from '../decorators/Resource'\n\n@Resource.Name('projectTags')\nexport default class ProjectTag extends AbstractDomain<ProjectTag> {\n    @JsonProperty() public tagId: string\n    @JsonProperty() public projectId: string\n    @JsonProperty() public capacity?: number\n    protected _project?: Project\n    protected _tag?: Tag\n\n    @JsonProperty()\n    get tag(): Tag {\n        return this._tag\n    }\n\n    set tag(value: Tag) {\n        this._tag = value\n    }\n\n    @JsonProperty()\n    get project(): Project {\n        return this._project\n    }\n\n    set project(value: Project) {\n        this._project = value\n    }\n}","import AbstractRestfulLocalStorageService from './AbstractRestfulLocalStorageService'\nimport LocalStorageService from './LocalStorageService'\nimport ProjectTag from '../domain/ProjectTag'\n\nexport default class ProjectTagService extends AbstractRestfulLocalStorageService<ProjectTag> {\n  public constructor(localStorageService: LocalStorageService<ProjectTag[]>) {\n    super(ProjectTag, localStorageService)\n  }\n\n  public getAllByProject(projectId: string): Promise<ProjectTag[]> {\n    return this.getMany({ projectId })\n  }\n}","import HttpClient from './HttpClient'\n\nexport default class AttachmentUploadService {\n  public constructor(private fileyClient: HttpClient) {\n  }\n\n  public async upload(file: File): Promise<string> {\n    const formData = new FormData()\n    formData.append('file', file)\n\n    const result = await this.fileyClient.post('/upload', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n\n    return result.headers.location\n  }\n}","import AbstractRestfulLocalStorageService from './AbstractRestfulLocalStorageService'\nimport LocalStorageService from './LocalStorageService'\nimport Notification from '../domain/Notification'\n\nexport default class NotificationService extends AbstractRestfulLocalStorageService<Notification> {\n  public constructor(localStorageService: LocalStorageService<Notification[]>) {\n    super(Notification, localStorageService)\n  }\n\n  public getAllByPerson(personId: string): Promise<Notification[]> {\n    return this.getMany({ personId })\n  }\n}","import config from '../config'\nimport LocalStorageService from './LocalStorageService'\nimport HttpClientService from './HttpClientService'\nimport TokenService from './TokenService'\nimport HttpClient from './HttpClient'\nimport PersonService from './PersonService'\nimport ProjectService from './ProjectService'\nimport LocalPersonService from './LocalPersonService'\nimport LocalProjectService from './LocalProjectService'\nimport OrganizationService from './OrganizationService'\nimport LocalOrganizationService from './LocalOrganizationService'\nimport AccountService from './AccountService'\nimport UserService from './UserService'\nimport LocalUserService from './LocalUserService'\nimport TagService from './TagService'\nimport ProjectTagService from './ProjectTagService'\nimport AttachmentUploadService from './AttachmentUploadService'\nimport NotificationService from './NotificationService'\n\nexport default class RootService {\n  public constructor(\n      public readonly attachmentUploadService: AttachmentUploadService,\n      public readonly accountService: AccountService,\n      public readonly personService: PersonService,\n      public readonly projectService: ProjectService,\n      public readonly organizationService: OrganizationService,\n      public readonly userService: UserService,\n      public readonly tagService: TagService,\n      public readonly projectTagService: ProjectTagService,\n      public readonly notificationService: NotificationService\n  ) {\n  }\n\n  private static getHttpClient(): HttpClient {\n    return this.getHttpClientService().create(config.dataSource || undefined)\n  }\n\n  private static getLocalStorageService<T>() {\n    return new LocalStorageService<T>()\n  }\n\n  private static getTokenService(): TokenService {\n    return new TokenService(new LocalStorageService<string>())\n  }\n\n  private static getHttpClientService(): HttpClientService {\n    return new HttpClientService(this.getTokenService())\n  }\n\n  private static getAttachmentUploadService(): AttachmentUploadService {\n    return new AttachmentUploadService(this.getHttpClientService().create('https://mmm.planet.ee/filey', false, null))\n  }\n\n  public static initialize(): RootService {\n    const localStorageService: LocalStorageService<any> = new LocalStorageService()\n    const tokenService = this.getTokenService()\n    const userService = new LocalUserService(localStorageService)\n    const notificationService = new NotificationService(localStorageService)\n    const personService = new LocalPersonService(localStorageService, tokenService, notificationService)\n\n    return new RootService(\n        this.getAttachmentUploadService(),\n        new AccountService(this.getHttpClient(), tokenService, userService),\n        personService,\n        new LocalProjectService(localStorageService, notificationService, personService),\n        new LocalOrganizationService(localStorageService),\n        userService,\n        new TagService(localStorageService),\n        new ProjectTagService(localStorageService),\n        notificationService\n    )\n  }\n}","import React, { useContext } from 'react'\nimport RootService from '../services'\n\nconst ServicesContext = React.createContext(RootService.initialize())\n\nexport default function useServices(): RootService {\n  return useContext(ServicesContext)\n}","import React, {useEffect} from 'react'\nimport {Avatar, FormLabel, Input} from '@chakra-ui/react'\nimport FormField from './FormField'\nimport useServices from '../hooks/useServices'\nimport {useFormContext} from 'react-hook-form'\n\ninterface FormImageFieldProps {\n  label?: string\n  name: string\n}\n\nconst FormImageField: React.FC<FormImageFieldProps> = ({label, children, name}) => {\n  const {attachmentUploadService} = useServices()\n  const { setValue, watch } = useFormContext()\n\n  useEffect(() => {\n  }, [attachmentUploadService])\n\n  return (\n      <div>\n        {label && (\n            <FormLabel>\n              {label}\n            </FormLabel>\n        )}\n        <label style={{cursor: 'pointer'}}>\n          <FormField name={name} />\n          <Avatar src={watch(name)} size=\"xl\" />\n          <Input type=\"file\" accept=\"image/*\" style={{display: 'none'}} onChange={async e => {\n            const file = e.target.files[0]\n\n            if (!file) {\n              return\n            }\n\n            const url = await attachmentUploadService.upload(file)\n\n            setValue(name, url, { shouldDirty: true })\n          }}/>\n        </label>\n      </div>\n  )\n}\n\nexport default FormImageField","import {ObjectMapper} from 'jackson-js'\nimport {ClassType} from 'jackson-js/dist/@types'\n\nconst objectMapper = new ObjectMapper()\n\nexport function parse<T>(input: string | T | any, type?: ClassType<T>): T {\n  if (typeof input !== 'string') {\n    return parse<T>(stringify(input), type)\n  }\n\n  return objectMapper.parse<T>(input, type && {mainCreator: () => [type]})\n}\n\nexport function stringify<T>(input: T): string {\n  return objectMapper.stringify<T>(input)\n}","import React from 'react'\nimport {Input, Stack} from '@chakra-ui/react'\nimport FormField from './FormField'\nimport useStore from '../hooks/useStore'\nimport {observer} from 'mobx-react'\nimport DrawerForm from './DrawerForm'\nimport useQueryValue from '../hooks/useQueryValue'\nimport {useHistory} from 'react-router-dom'\nimport Project from '../domain/Project'\nimport DateInput from '../ui/DateInput'\nimport {toDate} from '../util/date'\nimport FormImageField from './FormImageField'\nimport {parse} from '../util/json'\n\ninterface ProjectFormDrawerProps {\n  name: string\n}\n\nconst ProjectFormDrawer: React.FC<ProjectFormDrawerProps> = ({ name }) => {\n  const history = useHistory()\n  const {projectStore, organizationStore} = useStore()\n  const projectId = useQueryValue(name)\n\n  const handleSubmit = async ({dateStart, dateEnd, ...values}: any, projectId: string) => {\n    values.dateStart = dateStart ? toDate(dateStart) : null\n    values.dateEnd = dateEnd ? toDate(dateEnd) : null\n\n    const project = parse(values, Project)\n    project.organizationId = organizationStore.currentOrganizationId\n\n    if (projectId) {\n      project.id = projectId\n      await projectStore.update(project)\n    } else {\n      await projectStore.create(project)\n    }\n\n    if (!project) {\n      throw new Error('Something went wrong')\n    }\n\n    const query = `?highlighted-project-id=${project.id}`\n\n    if (project.isOngoing()) {\n      history.push(`/my-projects/active-projects${query}`)\n    } else if (!project.hasStarted()) {\n      history.push(`/my-projects/upcoming-projects${query}`)\n    } else {\n      history.push(`/my-projects/ended-projects${query}`)\n    }\n  }\n\n  return (\n      <DrawerForm\n          name={name}\n          onSubmit={handleSubmit}\n          header={<>{projectId ? 'Edit' : 'Add'} project</>}\n          defaultValues={projectId ? (projectStore.getById(projectId) || {}) : {}}\n          autoClose={false}\n      >\n        <Stack spacing={4}>\n          <FormField\n              name=\"name\"\n              required\n              label=\"Project name\"\n          >\n            <Input\n                size=\"lg\"\n                autoFocus\n            />\n          </FormField>\n\n          <FormField\n              name=\"clientName\"\n              label=\"Client\"\n          >\n            <Input />\n          </FormField>\n\n          <FormField\n              name=\"dateStart\"\n              label=\"Starts at\"\n          >\n            <DateInput />\n          </FormField>\n\n          <FormField\n              name=\"dateEnd\"\n              label=\"Ends at\"\n          >\n            <DateInput />\n          </FormField>\n\n          <FormImageField\n              name=\"image\"\n              label=\"Cover image\"\n          />\n        </Stack>\n      </DrawerForm>\n  )\n}\n\nexport default observer(ProjectFormDrawer)","import React from 'react'\nimport Project from '../domain/Project'\nimport {Button, HStack, VStack, Stack, SimpleGrid} from '@chakra-ui/react'\nimport ProjectCard from './ProjectCard'\nimport {Link} from 'react-router-dom'\nimport ProjectFormDrawer from './ProjectFormDrawer'\nimport useQueryValue from '../hooks/useQueryValue'\n\nexport interface ProjectListProps {\n  projects: Project[]\n}\n\nconst ProjectList: React.FC<ProjectListProps> = ({projects}) => {\n  const highlightedProjectId = useQueryValue('highlighted-project-id')\n\n  return (\n      <div>\n        <ProjectFormDrawer name=\"project\" />\n        {projects.length ? (\n            <Stack spacing={4}>\n              <HStack justifyContent=\"flex-end\">\n                <Button as={Link} to=\"?project\">\n                  Add project\n                </Button>\n              </HStack>\n              <SimpleGrid columns={3} spacing={4}>\n                {projects.map(project => (\n                    <ProjectCard highlighted={highlightedProjectId === project.id} key={project.id} project={project}/>\n                ))}\n              </SimpleGrid>\n            </Stack>\n        ) : (\n            <VStack height=\"100%\" justifyContent=\"center\" spacing={8}>\n              <div>No projects matching filters.</div>\n              <Button colorScheme=\"purple\" as={Link} to=\"?project\">\n                Create new project\n              </Button>\n            </VStack>\n        )}\n      </div>\n  )\n}\n\nexport default ProjectList","import React, {useEffect} from 'react'\nimport useStore from '../hooks/useStore'\nimport {observer} from 'mobx-react'\nimport ProjectList from '../components/ProjectList'\n\nconst UpcomingProjects = () => {\n  const { projectStore } = useStore()\n\n  useEffect(() => {\n    projectStore.loadByActiveOrganization()\n  }, [])\n\n  return (\n      <ProjectList projects={projectStore.ongoingProjects} />\n  )\n}\n\nexport default observer(UpcomingProjects)","import React, {useEffect} from 'react'\nimport useStore from '../hooks/useStore'\nimport {observer} from 'mobx-react'\nimport ProjectList from '../components/ProjectList'\n\nconst UpcomingProjects = () => {\n  const { projectStore } = useStore()\n\n  useEffect(() => {\n    projectStore.loadByActiveOrganization()\n  }, [])\n\n  return (\n      <ProjectList projects={projectStore.upcomingProjects} />\n  )\n}\n\nexport default observer(UpcomingProjects)","import React, {useEffect} from 'react'\nimport useStore from '../hooks/useStore'\nimport {observer} from 'mobx-react'\nimport ProjectList from '../components/ProjectList'\n\nconst EndedProjects = () => {\n  const { projectStore } = useStore()\n\n  useEffect(() => {\n    projectStore.loadByActiveOrganization()\n  }, [])\n\n  return (\n      <ProjectList projects={projectStore.endedProjects} />\n  )\n}\n\nexport default observer(EndedProjects)","import React from 'react'\nimport {Input, Stack} from '@chakra-ui/react'\nimport FormField from './FormField'\nimport Organization from '../domain/Organization'\nimport FormImageField from './FormImageField'\nimport DrawerForm from './DrawerForm'\n\nexport interface OrganizationEditFormProps {\n  onSubmit: (data: any) => void\n  organization: Organization\n}\n\nconst OrganizationFormDrawer: React.FC<OrganizationEditFormProps> = ({onSubmit, organization}) => {\n  return (\n      <DrawerForm\n          name=\"organization\"\n          onSubmit={onSubmit}\n          defaultValues={organization}\n          successMessage=\"Organization saved successfully!\"\n      >\n        <Stack spacing={4}>\n          <FormField name=\"name\" required label=\"Organization name\">\n            <Input/>\n          </FormField>\n          <FormImageField label=\"Logo\" name=\"logo\"/>\n        </Stack>\n      </DrawerForm>\n  )\n}\n\nexport default OrganizationFormDrawer","import React from 'react'\nimport useStore from '../hooks/useStore'\nimport OrganizationEditForm from '../components/OrganizationFormDrawer'\nimport {HStack, Avatar, Heading, Button, IconButton} from '@chakra-ui/react'\nimport {observer} from 'mobx-react'\nimport OrganizationFormDrawer from '../components/OrganizationFormDrawer'\nimport Card from '../ui/Card'\nimport {Link} from 'react-router-dom'\nimport {FaPen} from 'react-icons/fa'\n\nconst OrganizationProfile: React.FC = () => {\n  const {organizationStore} = useStore()\n  const {currentOrganization} = organizationStore\n\n  if (!currentOrganization) {\n    return null\n  }\n\n  const onSubmit = async (organization: any) => {\n    await organizationStore.update({\n      ...currentOrganization,\n      ...organization,\n    })\n  }\n\n  return (\n      <Card>\n        <OrganizationFormDrawer onSubmit={onSubmit} organization={currentOrganization}/>\n        <HStack spacing={4}>\n          <Avatar src={currentOrganization.logo} name={currentOrganization.name} />\n          <Heading size=\"md\">{currentOrganization.name}</Heading>\n          <IconButton as={Link} to={`?organization`} aria-label=\"Edit\" icon={<FaPen/>}/>\n        </HStack>\n      </Card>\n  )\n}\n\nexport default observer(OrganizationProfile)","import React from 'react'\nimport { Input } from '@chakra-ui/react'\n\ninterface Column<T> {\n  accessor: (item: T) => string | number | boolean | Date | T[keyof T] | T\n  searchable?: boolean\n}\n\nexport interface TableSearchProps<T> {\n  onFilter: (callback: (row: T) => boolean) => void\n  columns: Array<Column<T>>\n  placeholder?: string\n}\n\nconst TableSearch = <T extends object>({ columns, onFilter, placeholder }: TableSearchProps<T>) => {\n  const handleFilter = (term: string) => {\n    onFilter((row: T) => {\n      if (!term) {\n        return true\n      }\n\n      for (const column of columns) {\n        if (column.searchable === false) {\n          continue\n        }\n\n        const value = column.accessor(row)\n\n        if (\n            value\n            && ['number', 'string'].includes(typeof value)\n            && (value as any).toString().toLocaleLowerCase().includes(term.toLocaleLowerCase())\n        ) {\n          return true\n        }\n      }\n\n      return false\n    })\n  }\n\n  return (\n      <Input\n          placeholder={placeholder || 'Search..'}\n          onChange={e => {\n            handleFilter(e.target.value)\n          }}\n      />\n  )\n}\n\nexport default TableSearch","import React, {useState} from 'react'\nimport {Table, Thead, Tbody, Td, Tr, Th, Flex} from '@chakra-ui/react'\nimport {FaArrowDown, FaArrowUp} from 'react-icons/fa'\nimport {useHistory} from 'react-router-dom'\nimport orderBy from 'lodash/orderBy'\nimport TableSearch, {TableSearchProps} from './TableSearch'\n\nexport interface DataTableColumn<T> {\n  accessor: (item: T) => string | number | boolean | Date | T[keyof T] | T\n  render?: (value: string | number | boolean | Date | T[keyof T] | T, item: T, rowIndex: number) => any\n  title?: string\n  searchable?: boolean\n  sortable?: boolean\n  disableLink?: boolean\n}\n\ninterface DataTableProps<T> {\n  data: Array<T>\n  columns: Array<DataTableColumn<T>>\n  linkTo?: (item: T) => string\n  search?: boolean | Omit<TableSearchProps<T>, 'columns' | 'onFilter'>\n  sortable?: boolean\n}\n\nconst DataTable = <T extends object>({\n                                       data,\n                                       columns,\n                                       linkTo,\n                                       search,\n                                       sortable,\n                                     }: DataTableProps<T>) => {\n  const history = useHistory()\n  const [[filter], setFilter] = useState<[(row: T) => boolean]>([() => true])\n  const [sortBy, setSortBy] = useState<{ index: number; order: 'asc' | 'desc' } | null>(null)\n\n  return (\n      <div>\n        {search && (\n            <div>\n              <TableSearch<T> onFilter={(newFilter: any) => setFilter([newFilter])} columns={columns} {...search} />\n            </div>\n        )}\n        <Table variant=\"simple\">\n          <Thead>\n            <Tr>\n              {columns.map((column, index) => (\n                  <Th\n                      key={index}\n                      onClick={\n                        (column.sortable === undefined ? sortable : column.sortable)\n                            ? (() => setSortBy({\n                              index,\n                              order: sortBy?.index === index && sortBy?.order === 'asc' ? 'desc' : 'asc'\n                            }))\n                            : undefined\n                      }\n                  >\n                    <Flex alignItems=\"center\">\n                      {column.title}\n                      &nbsp;\n                      {sortBy && sortBy.index === index && (sortBy?.order === 'desc' ? <FaArrowDown/> : <FaArrowUp/>)}\n                    </Flex>\n                  </Th>\n              ))}\n            </Tr>\n          </Thead>\n          <Tbody>\n            {(sortBy ? (orderBy([...data], columns[sortBy.index].accessor, sortBy.order) as T[]) : data || []).map(\n                (item, rowIndex) => {\n                  if (!filter(item)) {\n                    return null\n                  }\n\n                  return (\n                      <Tr\n                          isLink={!!linkTo}\n                          key={({...item} as { id: number | string }).id || rowIndex}\n                          onClick={() => linkTo && history.push(linkTo(item))}\n                      >\n                        {columns.map((column, columnIndex) => {\n                          const value = column.accessor(item)\n\n                          return (\n                              <Td\n                                  onClick={e => column.disableLink && e.stopPropagation()}\n                                  key={columnIndex}\n                                  style={column.disableLink ? {cursor: 'default'} : {}}\n                              >\n                                {column.render ? column.render(value, item, rowIndex) : value}\n                              </Td>\n                          )\n                        })}\n                      </Tr>\n                  )\n                },\n            )}\n          </Tbody>\n        </Table>\n      </div>\n  )\n}\n\nDataTable.defaultProps = {\n  sortable: true,\n}\n\nexport default DataTable","import React from 'react'\nimport Badge from '../ui/Badge'\nimport Person, {Role} from '../domain/Person'\n\nexport interface RoleBadgeProps {\n  person: Person\n}\n\nconst RoleBadge: React.FC<RoleBadgeProps> = ({person}) => {\n  let colorScheme: string\n\n  switch (person.role) {\n    case Role.ADMIN:\n      colorScheme = 'purple'\n      break\n\n    case Role.USER:\n      colorScheme = 'yellow'\n      break\n\n    case Role.MANAGER:\n      colorScheme = 'green'\n      break\n  }\n\n  return (\n      <Badge colorScheme={colorScheme}>{person.humanReadableRole}</Badge>\n  )\n}\n\nexport default RoleBadge","import React from 'react'\nimport {Avatar, HStack, Text, StackProps} from '@chakra-ui/react'\n\nexport interface UserProps extends StackProps {\n  name: string\n  subTitle: string\n  image?: string\n  align?: 'left' | 'right'\n}\n\nconst User: React.FC<UserProps> = ({ name, subTitle, image, align, ...stackProps}) => {\n  const avatar = <Avatar name={name} src={image} size=\"sm\" />\n  return (\n      <HStack spacing={2} {...stackProps}>\n        {align === 'left' && avatar}\n        <Text align={align}>\n          <Text fontSize=\"sm\">{name}</Text>\n          <Text fontSize=\"xs\" color=\"gray.500\">{subTitle}</Text>\n        </Text>\n        {align === 'right' && avatar}\n      </HStack>\n  )\n}\n\nUser.defaultProps = {\n  align: 'left'\n}\n\nexport default User","import React from 'react'\nimport Person from '../domain/Person'\nimport {observer} from 'mobx-react'\nimport User, {UserProps} from '../ui/User'\n\ninterface PersonUserProps extends Omit<UserProps, 'name' | 'subTitle' | 'image'> {\n  person: Person\n}\n\nconst PersonUser: React.FC<PersonUserProps> = ({person, ...props}) => {\n  if (!person) {\n    return null\n  }\n\n  return (\n      <User name={person.name} subTitle={person.subTitle} image={person.image} {...props}/>\n  )\n}\n\nexport default observer(PersonUser)","import React from 'react'\nimport {Input, Select, Stack} from '@chakra-ui/react'\nimport FormField from './FormField'\nimport FormImageField from './FormImageField'\nimport {Role} from '../domain/Person'\nimport useStore from '../hooks/useStore'\nimport {observer} from 'mobx-react'\nimport DrawerForm from './DrawerForm'\nimport useQueryValue from '../hooks/useQueryValue'\n\ninterface PersonFormDrawerProps {\n}\n\nconst PersonFormDrawer: React.FC<PersonFormDrawerProps> = () => {\n  const name = 'person'\n  const {personStore, organizationStore} = useStore()\n  const personId = useQueryValue(name)\n\n  const handleSubmit = async (values: any, personId: string) => {\n    if (personId) {\n      await personStore.update({\n        id: personId,\n        ...values\n      })\n    } else {\n      await personStore.create({\n        ...values,\n        organizationId: organizationStore.currentOrganizationId\n      })\n    }\n  }\n\n  const person = {\n    role: Role.USER,\n    ...personId ? personStore.getById(personId) : {}\n  }\n\n  return (\n      <DrawerForm\n          name={name}\n          onSubmit={handleSubmit}\n          header={<>{personId ? 'Edit' : 'Add'} member</>}\n          defaultValues={person}\n      >\n        <Stack spacing={4}>\n          <FormField name=\"name\" label=\"Name\" required>\n            <Input autoFocus={!personId} />\n          </FormField>\n\n          <FormField name=\"user.email\" label=\"Email\">\n            <Input type=\"email\" />\n          </FormField>\n\n          <FormField name=\"position\" label=\"Position\">\n            <Input />\n          </FormField>\n\n          <FormField name=\"role\" label=\"Role\">\n            <Select>\n              <option value={Role.ADMIN}>Admin</option>\n              <option value={Role.MANAGER}>Manager</option>\n              <option value={Role.USER}>User</option>\n            </Select>\n          </FormField>\n\n          <FormImageField label=\"Image\" name=\"image\" />\n        </Stack>\n      </DrawerForm>\n  )\n}\n\nexport default observer(PersonFormDrawer)","import React from 'react'\nimport {Input, Stack} from '@chakra-ui/react'\nimport FormField from './FormField'\nimport useStore from '../hooks/useStore'\nimport DrawerForm from './DrawerForm'\nimport useQueryValue from '../hooks/useQueryValue'\n\ninterface PersonDeleteDrawerProps {\n  name: string\n}\n\nconst PersonDeleteDrawer: React.FC<PersonDeleteDrawerProps> = ({name}) => {\n  const {personStore} = useStore()\n  const personId = useQueryValue(name)\n\n  if (!personId) {\n    return null\n  }\n\n  const handleSubmit = async (data: any, personId: string) => {\n    await personStore.delete(personId)\n  }\n\n  const person = personStore.getById(personId)\n\n  if (!person) {\n    return null\n  }\n\n  return (\n      <DrawerForm name={name} onSubmit={handleSubmit} header=\"Delete member\">\n        <Stack spacing={4}>\n          <FormField\n              name=\"confirmation\"\n              label={`Type \"${person.name}\" to delete`}\n              required\n              validate={(value: string) => value === person.name || 'Invalid'}\n          >\n            <Input autoFocus/>\n          </FormField>\n        </Stack>\n      </DrawerForm>\n  )\n}\n\nexport default PersonDeleteDrawer","import React, {useEffect} from 'react'\nimport useStore from '../hooks/useStore'\nimport {observer} from 'mobx-react'\nimport DataTable from '../components/DataTable'\nimport Person from '../domain/Person'\nimport Card from '../ui/Card'\nimport RoleBadge from '../components/RoleBadge'\nimport PersonUser from '../components/PersonUser'\nimport {Button, HStack, IconButton} from '@chakra-ui/react'\nimport PersonFormDrawer from '../components/PersonFormDrawer'\nimport {Link} from 'react-router-dom'\nimport {FaPen, FaTrash} from 'react-icons/fa'\nimport PersonDeleteDrawer from '../components/PersonDeleteDrawer'\n\nconst Members: React.FC = () => {\n  const {personStore} = useStore()\n\n  useEffect(() => {\n    personStore.loadCurrentOrganizationPersons()\n  }, [personStore])\n\n  return (\n      <Card>\n        <PersonFormDrawer/>\n        <PersonDeleteDrawer name=\"person.delete\"/>\n        <HStack justifyContent=\"flex-end\">\n          <Button as={Link} to=\"?person\">\n            Add member\n          </Button>\n        </HStack>\n        <DataTable<Person>\n            data={personStore.currentOrganizationPersons}\n            columns={[\n              {\n                accessor: p => p.name,\n                title: 'Name',\n                render: (name, person) => {\n                  return (\n                      <PersonUser person={person}/>\n                  )\n                }\n              },\n              {\n                accessor: p => p.user?.email,\n                title: 'Email',\n              },\n              {\n                accessor: p => p.humanReadableRole,\n                title: 'Account',\n                render: (value, item) => (\n                    <RoleBadge person={item}/>\n                )\n              },\n              {\n                accessor: () => null,\n                render: (value, item) => (\n                    item.id === personStore.currentPerson.id ? (\n                        null\n                    ) : (\n                        <HStack spacing={2} justifyContent=\"flex-end\">\n                          <IconButton as={Link} to={`?person=${item.id}`} aria-label=\"Edit\" icon={<FaPen/>}/>\n                          <IconButton as={Link} to={`?person.delete=${item.id}`} aria-label=\"Delete\" icon={<FaTrash/>}/>\n                        </HStack>\n                    )\n                )\n              },\n            ]}\n        />\n      </Card>\n  )\n}\n\nexport default observer(Members)","import React from 'react'\nimport ActiveProjects from './views/ActiveProjects'\nimport {FaBuilding, FaCalendarDay, FaHistory, FaPlay, FaUsers} from 'react-icons/fa'\nimport UpcomingProjects from './views/UpcomingProjects'\nimport EndedProjects from './views/EndedProjects'\nimport {Role} from './domain/Person'\nimport OrganizationProfile from './views/OrganizationProfile'\nimport Members from './views/Members'\n\nexport interface Route {\n  path: string\n  title: string\n  icon?: React.ReactNode,\n  component?: React.FC,\n  children?: Route[]\n  scope?: Role[]\n}\n\nconst routes: Route[] = [\n  {\n    path: '/my-projects',\n    title: 'My projects',\n    children: [\n      {\n        path: '/active-projects',\n        title: 'Active projects',\n        component: ActiveProjects,\n        icon: <FaPlay />,\n      },\n      {\n        path: '/upcoming-projects',\n        title: 'Upcoming projects',\n        component: UpcomingProjects,\n        icon: <FaCalendarDay />,\n      },\n      {\n        path: '/ended-projects',\n        title: 'History',\n        component: EndedProjects,\n        icon: <FaHistory />,\n      }\n    ]\n  },\n  {\n    path: '/profile',\n    title: 'Profile',\n    children: [\n      {\n        path: '/organization-profile',\n        title: 'Organization profile',\n        component: OrganizationProfile,\n        icon: <FaBuilding />,\n        scope: [Role.ADMIN]\n      },\n      {\n        path: '/organization-members',\n        title: 'Organization members',\n        component: Members,\n        icon: <FaUsers />,\n        scope: [Role.MANAGER, Role.ADMIN]\n      }\n    ]\n  }\n]\n\nexport default routes","import React from 'react'\nimport logoPng from './logo.png'\nimport {Link} from 'react-router-dom'\nimport {Tooltip} from '@chakra-ui/react'\n\nconst Logo: React.FC = () => {\n  return (\n      <Tooltip label=\"Pls replace me \">\n        <Link to=\"/\" style={{width: '100%'}}>\n          <img src={logoPng} width=\"100%\" alt=\"Logo\" />\n        </Link>\n      </Tooltip>\n  )\n}\n\nexport default Logo","export default \"data:image/png;base64,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\"","import React from 'react'\nimport {Grid, GridItem, HStack, VStack} from '@chakra-ui/react'\nimport Logo from './Logo'\n\nexport interface LayoutProps {\n  navigation: React.ReactNode\n  topRight?: React.ReactNode\n}\n\nconst Layout: React.FC<LayoutProps> = ({children, navigation, topRight}) => {\n  return (\n      <Grid\n          h=\"100vh\"\n          templateRows=\"auto auto 1fr auto\"\n          templateColumns=\"auto 1fr auto\"\n          gap={4}\n          bg=\"#F8F8F8\"\n      >\n        <GridItem rowSpan={4} colSpan={1} bg=\"white\" boxShadow=\"xl\" p={8}>\n          <VStack spacing={8}>\n            <Logo />\n            {navigation}\n          </VStack>\n        </GridItem>\n        <GridItem colSpan={2} />\n        <GridItem bg=\"white\" borderRadius=\"md\" boxShadow=\"lg\">\n          <HStack justify=\"flex-end\" spacing={2}>\n            {topRight}\n          </HStack>\n        </GridItem>\n        <GridItem />\n        <GridItem>{children}</GridItem>\n        <GridItem />\n      </Grid>\n  )\n}\n\nexport default Layout","import React from 'react'\nimport {Text} from '@chakra-ui/react'\n\nexport interface NavItemGroupProps {\n  title: string\n}\n\nconst NavItemGroup: React.FC<NavItemGroupProps> = ({ title, children }) => {\n  return (\n      <div>\n        <Text mt={6} color=\"gray.400\" fontSize=\"xs\" casing=\"uppercase\">{title}</Text>\n        {children}\n      </div>\n  )\n}\n\nexport default NavItemGroup","import React from 'react'\nimport {NavLink} from 'react-router-dom'\nimport {HStack, Text} from '@chakra-ui/react'\n\nexport interface NavItemProps {\n  to: string\n  title: string\n  icon?: React.ReactNode\n}\n\nconst NavItem: React.FC<NavItemProps> = ({to, title, icon}) => {\n  return (\n      <HStack\n          as={NavLink}\n          borderRadius=\"xs\"\n          activeStyle={{backgroundColor: '#E9FBFF'}}\n          to={to}\n          spacing={4}\n          py={1}\n          pl={4}\n      >\n        {icon}\n        <Text fontSize=\"sm\" pr={6}>{title}</Text>\n      </HStack>\n  )\n}\n\nexport default NavItem","import React from 'react'\nimport {Menu as ChakraMenu, MenuButton, MenuList, MenuItem} from '@chakra-ui/react'\n\ninterface UserMenuProps {\n  handle: React.ReactNode\n}\n\nconst Menu: React.FC<UserMenuProps> = ({handle, children}) => {\n  return (\n      <ChakraMenu placement=\"bottom-end\" isLazy offset={[-7, 0]}>\n        <MenuButton p={4}>\n          {handle}\n        </MenuButton>\n        <MenuList>\n          {React.Children.map(children, (child, i) => (\n              <MenuItem justifyContent=\"flex-end\" key={i}>\n                {child}\n              </MenuItem>\n          ))}\n        </MenuList>\n      </ChakraMenu>\n  )\n}\n\nexport default Menu","import React from 'react'\nimport RouterDrawer from './RouterDrawer'\nimport {DrawerBody, DrawerHeader} from '../ui/Drawer'\nimport {observer} from 'mobx-react'\nimport Notification from '../domain/Notification'\nimport ReactMarkdown from 'react-markdown'\nimport {LinkBox, Stack, Heading, LinkOverlay, Text} from '@chakra-ui/react'\nimport {formatDistanceToNow} from 'date-fns'\nimport {Link} from 'react-router-dom'\nimport useStore from '../hooks/useStore'\nimport {formatDate} from '../util/date'\n\nexport interface NotificationsDrawerProps {\n  notifications: Notification[]\n}\n\nconst NotificationsDrawer: React.FC<NotificationsDrawerProps> = ({notifications}) => {\n  const {notificationStore} = useStore()\n\n  return (\n      <RouterDrawer name=\"notifications\">\n        <DrawerHeader>Notifications</DrawerHeader>\n        <DrawerBody>\n          <Stack spacing={2}>\n            {notifications?.map(notification => {\n              const formattedDate = formatDate(notification.createdAt)\n\n              return (\n                  <div key={notification.id}>\n                    <LinkBox opacity={notification.readAt ? .6 : 1} p=\"5\" borderWidth=\"1px\" rounded=\"md\">\n                      <Text fontSize=\"xs\" color=\"gray.500\" as=\"time\" dateTime={formattedDate} title={formattedDate}>\n                        {formatDistanceToNow(notification.createdAt, { addSuffix: true })}\n                      </Text>\n                      <Heading size=\"sm\" my=\"2\">\n                        <LinkOverlay as={Link} to={notification.path} onClick={() => {\n                          notificationStore.markAsRead(notification)\n                        }}>\n                          {notification.title}\n                        </LinkOverlay>\n                      </Heading>\n                      <Text fontSize=\"xs\">\n                        <ReactMarkdown>{notification.content}</ReactMarkdown>\n                      </Text>\n                    </LinkBox>\n                  </div>\n              )\n            })}\n            {notifications.length <= 0 && 'No notifications'}\n          </Stack>\n        </DrawerBody>\n      </RouterDrawer>\n  )\n}\n\nexport default observer(NotificationsDrawer)","import React, {useEffect} from 'react'\nimport {Avatar, AvatarBadge, Tooltip} from '@chakra-ui/react'\nimport {Link} from 'react-router-dom'\nimport {FaRegBell} from 'react-icons/all'\nimport NotificationsDrawer from './NotificationsDrawer'\nimport useStore from '../hooks/useStore'\nimport {observer} from 'mobx-react'\nimport useInterval from '../hooks/useInterval'\n\nexport interface NotificationsHandleProps {\n}\n\nconst NotificationsHandle: React.FC<NotificationsHandleProps> = () => {\n  const {notificationStore} = useStore()\n  const {currentPersonNotifications: notifications, currentPersonUnreadNotificationsCount: count} = notificationStore\n  const label = count > 0 ? `${count} unread notification${count !== 1 ? 's' : ''}` : 'No unread notifications'\n\n  useEffect(() => {\n    notificationStore.loadByActivePerson()\n  }, [])\n\n  useInterval(() => {\n    notificationStore.loadByActivePerson()\n  }, 5000)\n\n  return (\n      <Tooltip label={label}>\n        <div>\n          <NotificationsDrawer notifications={notifications} />\n          <Avatar\n              size=\"sm\"\n              bg=\"white\"\n              as={Link}\n              to={`?notifications`}\n              aria-label=\"Notifications\"\n              icon={<FaRegBell fontSize=\"1.5rem\"/>}\n          >\n            {count > 0 && <AvatarBadge borderColor=\"papayawhip\" bg=\"tomato\" boxSize=\"1em\" />}\n          </Avatar>\n        </div>\n      </Tooltip>\n  )\n}\n\nexport default observer(NotificationsHandle)","import {useEffect, useRef} from 'react'\n\nexport default function useInterval(callback: () => void, delay: number | null): void {\n  const savedCallback = useRef<() => void | null>()\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback\n  })\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      if (typeof savedCallback?.current !== 'undefined') {\n        savedCallback?.current()\n      }\n    }\n\n    if (delay !== null) {\n      const id = setInterval(tick, delay)\n      return () => clearInterval(id)\n    }\n  }, [delay])\n}","import React, {useEffect} from 'react'\nimport useStore from '../hooks/useStore'\nimport Layout from '../ui/Layout'\nimport {Route as NavRoute} from '../routes'\nimport NavItemGroup from '../ui/NavItemGroup'\nimport NavItem from '../ui/NavItem'\nimport {Link, Route, Switch} from 'react-router-dom'\nimport {observer} from 'mobx-react'\nimport Menu from '../ui/Menu'\nimport PersonUser from './PersonUser'\nimport NotificationsHandle from './NotificationsHandle'\n\ninterface ConnectedLayoutProps {\n  routes: NavRoute[]\n}\n\nconst ConnectedLayout: React.FC<ConnectedLayoutProps> = ({routes}) => {\n  const {personStore} = useStore()\n  const {currentUserNonActivePersons, currentPerson} = personStore\n\n  useEffect(() => {\n    personStore.loadUserRelated()\n  }, [])\n\n  return (\n      <Layout\n          navigation={(\n              <div>\n                {routes\n                    .filter(route => currentPerson.hasPermission(route.scope))\n                    .map(route => (\n                        <NavItemGroup key={route.path} title={route.title}>\n                          {route.children\n                              ?.filter(route => currentPerson.hasPermission(route.scope))\n                              .map(subRoute => (\n                                  <NavItem\n                                      key={subRoute.path}\n                                      to={route.path + subRoute.path}\n                                      title={subRoute.title}\n                                      icon={subRoute.icon || route.icon}\n                                  />\n                              ))}\n                        </NavItemGroup>\n                    ))}\n              </div>\n          )}\n          topRight={(\n              <>\n                <NotificationsHandle />\n                <Menu handle={<PersonUser align=\"right\" person={currentPerson}/>}>\n                  {currentUserNonActivePersons.map((person) => (\n                      <PersonUser\n                          align=\"right\"\n                          key={person.id}\n                          person={person}\n                          onClick={() => personStore.selectPerson(person.id)}\n                      />\n                  ))}\n                  <Link to=\"/create-organization\">Create an organization</Link>\n                  <Link to=\"/logout\">Sign out</Link>\n                </Menu>\n              </>\n          )}\n      >\n        <Switch>\n          {routes\n              .map(route => {\n                return route.children\n                    ?.filter(route => currentPerson.hasPermission(route.scope))\n                    .map(subRoute => [route.path + subRoute.path, subRoute.component])\n              })\n              .flat()\n              .map(([path, component]: any) => (\n                  <Route key={path} path={path} component={component}/>\n              ))\n          }\n        </Switch>\n      </Layout>\n  )\n}\n\nexport default observer(ConnectedLayout)","import React, {useEffect} from 'react'\nimport {observer} from 'mobx-react'\nimport {Redirect} from 'react-router-dom'\nimport useStore from '../hooks/useStore'\n\ninterface AuthenticationGuardProps {\n  forbiddenAction?: any\n}\n\nconst AuthenticationGuard: React.FC<AuthenticationGuardProps> = ({children, forbiddenAction}) => {\n  const {accountStore} = useStore()\n  const {authenticated} = accountStore\n\n  useEffect(() => {\n    if (authenticated === null) {\n      accountStore.checkAuthentication()\n    }\n  }, [authenticated, accountStore])\n\n  if (authenticated === null) {\n    return null\n  }\n\n  if (!authenticated) {\n    return forbiddenAction\n  }\n\n  return <>{children}</>\n}\n\nAuthenticationGuard.defaultProps = {\n  forbiddenAction: <Redirect to=\"/\" />\n}\n\nexport default observer(AuthenticationGuard)","import React from 'react'\nimport {Container, Button, VStack, Text} from '@chakra-ui/react'\nimport Logo from '../ui/Logo'\nimport {Link} from 'react-router-dom'\n\nconst NoOrganization: React.FC = () => {\n  return (\n      <Container>\n        <VStack mt={4} spacing={4}>\n          <Logo/>\n          <Text>I'm glad you made an account. What would you like to do next?</Text>\n          <div>\n            <Button as={Link} to=\"/create-organization\" colorScheme=\"purple\">I'd like to create an organization</Button>\n            {' '}\n            <Button as={Link} to=\"/logout\">I'd like to leave</Button>\n          </div>\n        </VStack>\n      </Container>\n  )\n}\n\nexport default NoOrganization","import React, {useEffect} from 'react'\nimport {observer} from 'mobx-react'\nimport useStore from '../hooks/useStore'\nimport NoOrganization from '../views/NoOrganization'\n\nconst PersonGuard: React.FC = ({children}) => {\n  const {personStore} = useStore()\n\n  useEffect(() => {\n    personStore.loadUserRelated()\n  }, [personStore])\n\n  if (!personStore.currentPerson) {\n    return <NoOrganization />\n  }\n\n  return <>{children}</>\n}\n\nexport default observer(PersonGuard)","import React from 'react'\nimport {Container, Button, VStack, Text} from '@chakra-ui/react'\nimport Logo from '../ui/Logo'\nimport {Link} from 'react-router-dom'\n\nconst Home: React.FC = () => {\n  const buildInfo = process.env.REACT_APP_BUILD_DATE\n\n  return (\n      <Container>\n        <VStack mt={4} spacing={10}>\n          <Logo/>\n          <div>\n            <Button as={Link} to=\"/start\" colorScheme=\"purple\">Start</Button>\n          </div>\n          {buildInfo && (\n              <div>\n                <Text fontSize=\"xs\" mt={20}>Built at {buildInfo}</Text>\n              </div>\n          )}\n        </VStack>\n      </Container>\n  )\n}\n\nexport default Home","import React, {useEffect} from 'react'\nimport useStore from '../hooks/useStore'\nimport AuthenticationGuard from '../components/AuthenticationGuard'\n\nconst Logout: React.FC = () => {\n  const {accountStore} = useStore()\n\n  useEffect(() => {\n    accountStore.logout()\n  }, [accountStore])\n\n  return <AuthenticationGuard />\n}\n\nexport default Logout","import React, {useEffect} from 'react'\nimport AuthenticationGuard from '../components/AuthenticationGuard'\nimport {Redirect, useHistory} from 'react-router-dom'\nimport useStore from '../hooks/useStore'\nimport useServices from '../hooks/useServices'\n\nconst Start: React.FC = () => {\n  const {accountStore} = useStore()\n  const {accountService} = useServices()\n  const history = useHistory()\n\n  useEffect(() => {\n    const email = prompt('Please provide your email')\n\n    if (!email) {\n      history.replace('/')\n      return\n    }\n\n    accountStore.login(email, '1')\n        .catch(() => {\n          console.info('Login failed, creating account...')\n\n          return true\n        })\n        .then((needsRegister) => {\n          if (!needsRegister) {\n            console.info('User already exists')\n            return\n          }\n\n          return accountService.register(email, '')\n        })\n        .then(() => {\n          console.info('Account created, logging in')\n\n          return accountStore.login(email, '')\n        })\n        .then(() => {\n          history.replace('/app')\n        })\n        .catch(err => {\n          console.error(err)\n          alert('Failure')\n        })\n  })\n\n  return null\n}\n\nconst GuardedStart: React.FC = () => {\n  return (\n      <AuthenticationGuard forbiddenAction={<Start />}>\n        <Redirect to=\"/app\" />\n      </AuthenticationGuard>\n  )\n}\n\nexport default GuardedStart","import React from 'react'\nimport {Input, ScaleFade, VStack} from '@chakra-ui/react'\nimport Logo from '../ui/Logo'\nimport FormSubmitButton from './FormSubmitButton'\nimport Form from './Form'\nimport FormField from './FormField'\nimport Person from '../domain/Person'\n\nexport interface OrganizationCreateFormProps {\n  onSubmit: (data: any) => void\n  currentPerson?: Person\n}\n\nconst OrganizationCreateForm: React.FC<OrganizationCreateFormProps> = ({onSubmit, currentPerson}) => {\n  return (\n      <Form onSubmit={onSubmit}>\n        {({watch}) => {\n          const organizationName = watch('organization.name')\n\n          return (\n              <VStack spacing={8} mt={4}>\n                <div style={{width: 150}}>\n                  <Logo/>\n                </div>\n                <FormField name=\"organization.name\" required>\n                  <Input\n                      size=\"lg\"\n                      variant=\"flushed\"\n                      placeholder=\"Organization name\"\n                      autoFocus\n                  />\n                </FormField>\n\n                {organizationName && (\n                    <ScaleFade in style={{width: '100%'}}>\n                      <FormField\n                          name=\"person.name\"\n                          required\n                          defaultValue={currentPerson?.name || ''}\n                      >\n                        <Input\n                            name=\"person.name\"\n                            variant=\"flushed\"\n                            placeholder=\"Your name\"\n                        />\n                      </FormField>\n                    </ScaleFade>\n                )}\n\n                {watch('person.name') && (\n                    <ScaleFade in style={{width: '100%'}}>\n                      <FormField name=\"person.position\">\n                        <Input\n                            variant=\"flushed\"\n                            placeholder={'Your position in ' + organizationName}\n                        />\n                      </FormField>\n                    </ScaleFade>\n                )}\n\n                <FormSubmitButton>\n                  Create\n                </FormSubmitButton>\n              </VStack>\n          )\n        }}\n      </Form>\n  )\n}\n\nexport default OrganizationCreateForm","import React, {useEffect} from 'react'\nimport {Container} from '@chakra-ui/react'\nimport OrganizationCreateForm from '../components/OrganizationCreateForm'\nimport useStore from '../hooks/useStore'\nimport {useHistory} from 'react-router-dom'\nimport {Role} from '../domain/Person'\n\nconst OrganizationWizard: React.FC = () => {\n  const {organizationStore, personStore, accountStore} = useStore()\n  const history = useHistory()\n\n  useEffect(() => {\n    accountStore.checkAuthentication()\n  }, [])\n\n  const onSubmit = async ({person, organization}: any) => {\n    const savedOrganization = await organizationStore.create(organization)\n    const savedPerson = await personStore.create({\n      capacity: 1,\n      role: Role.ADMIN,\n      organizationId: savedOrganization.id,\n      userId: accountStore.authenticatedUser.id,\n      ...person,\n    })\n    personStore.selectPerson(savedPerson.id)\n    history.push('/app')\n  }\n\n  return (\n      <Container>\n        <OrganizationCreateForm onSubmit={onSubmit} currentPerson={personStore.currentPerson}/>\n      </Container>\n  )\n}\n\nexport default OrganizationWizard","import React from 'react'\nimport {Switch, Route} from 'react-router-dom'\nimport routes from './routes'\nimport ConnectedLayout from './components/ConnectedLayout'\nimport AuthenticationGuard from './components/AuthenticationGuard'\nimport PersonGuard from './components/PersonGuard'\nimport Home from './views/Home'\nimport Logout from './views/Logout'\nimport Start from './views/Start'\nimport OrganizationWizard from './views/OrganizationWizard'\n\nfunction App() {\n  return (\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route path=\"/logout\" component={Logout} />\n        <Route path=\"/start\" component={Start} />\n        <Route path=\"/create-organization\" component={OrganizationWizard} />\n        <Route path=\"*\">\n          <AuthenticationGuard>\n            <PersonGuard>\n              <ConnectedLayout routes={routes} />\n            </PersonGuard>\n          </AuthenticationGuard>\n        </Route>\n      </Switch>\n  )\n}\n\nexport default App\n","import {action, computed, makeObservable, observable} from 'mobx'\nimport {ResourceId} from '../types'\nimport AccountStore from './AccountStore'\nimport RestfulService from '../services/RestfulService'\n\nexport enum ResourceStoreStatus {\n  IDLE,\n  PENDING,\n  RESOLVED,\n  REJECTED,\n}\n\nexport default abstract class AbstractResourceStore<T extends { id: ResourceId }> {\n  protected readonly service: RestfulService<T>\n  protected readonly accountStore: AccountStore\n  @observable private byId: { [key: string]: T } = {}\n  @observable private _status: ResourceStoreStatus = ResourceStoreStatus.IDLE\n\n  protected constructor(service: RestfulService<T>, accountStore: AccountStore) {\n    this.service = service\n    this.accountStore = accountStore\n    makeObservable(this)\n  }\n\n  public async loadAll() {\n    await this.setManyEventually(this.service.getMany())\n  }\n\n  public async loadOne(id: ResourceId) {\n    await this.setOneEventually(this.service.getOne(id))\n  }\n\n  public async save(item: T | any): Promise<T> {\n    if (!item.id) {\n      return this.create(item)\n    } else {\n      return this.update(item)\n    }\n  }\n\n  public async update(item: T): Promise<T> {\n    const existingItem: T = this.getById(item.id)\n\n    this.storeItem(item)\n\n    try {\n      const promise = this.service.update(item.id, this.sanitizeBeforeSave(item))\n\n      await this.setOneEventually(promise)\n\n      return await promise\n    } catch (e) {\n      // Replace with previous on failure\n      this.storeItem(existingItem)\n\n      throw e\n    }\n  }\n\n  public async create(item: Omit<T, 'id'>): Promise<T> {\n    const promise = this.service.create(this.sanitizeBeforeSave(item))\n\n    await this.setOneEventually(promise)\n\n    return await promise\n  }\n\n  public async delete(id: ResourceId) {\n    this.setStatus(ResourceStoreStatus.PENDING)\n    try {\n      await this.service.delete(id)\n\n      delete this.byId[id.toString()]\n\n      this.setStatus(ResourceStoreStatus.RESOLVED)\n    } catch (e) {\n      this.setStatus(ResourceStoreStatus.REJECTED)\n    }\n  }\n\n  public getById(id: ResourceId): T {\n    return this.byId[id.toString()] || null\n  }\n\n  public getByIdOrLoad(id: ResourceId): T {\n    const item = this.getById(id)\n\n    if (!item) {\n      this.loadOne(id)\n    }\n\n    return item\n  }\n\n  protected getItems(): T[] {\n    return Object.values(this.byId).map(item => this.prepareForRetrieving(item)).filter(Boolean)\n  }\n\n  @computed\n  public get items(): T[] {\n    return this.getItems()\n  }\n\n  @action\n  public storeItem(...items: T[]) {\n    items.forEach(item => {\n      this.byId[item.id.toString()] = this.prepareForStoring(item)\n    })\n  }\n\n  protected prepareForStoring(item: T): T {\n    return item\n  }\n\n  protected prepareForRetrieving(item: T): T {\n    return item\n  }\n\n  protected sanitizeBeforeSave(item: T | any): T {\n    return item\n  }\n\n  @action\n  private setStatus(status: ResourceStoreStatus) {\n    this._status = status\n  }\n\n  @computed\n  public get status(): ResourceStoreStatus {\n    return this._status\n  }\n\n  protected async setManyEventually(promise: Promise<T[]>) {\n    this.setStatus(ResourceStoreStatus.PENDING)\n\n    try {\n      const items = await promise\n\n      this.storeItem(...items)\n\n      this.setStatus(ResourceStoreStatus.RESOLVED)\n    } catch (e) {\n\n      // Log user out when 401 received\n      if (e.response?.status === 401) {\n        await this.accountStore.logout()\n      }\n      this.setStatus(ResourceStoreStatus.REJECTED)\n      throw e\n    }\n  }\n\n  protected async setOneEventually(promise: Promise<T>) {\n    await this.setManyEventually(promise.then(item => [item]))\n  }\n}","import RootService from '../services'\nimport RootStore from './index'\nimport AbstractResourceStore from './AbstractResourceStore'\nimport Person from '../domain/Person'\nimport PersonService from '../services/PersonService'\nimport {action, computed, makeObservable, observable} from 'mobx'\nimport Organization from '../domain/Organization'\n\nexport default class PersonStore extends AbstractResourceStore<Person> {\n  private readonly personService: PersonService\n  private readonly rootStore: RootStore\n  @observable private selectedPersonId: string\n\n  public constructor(rootService: RootService, rootStore: RootStore) {\n    super(rootService.personService, rootStore.accountStore)\n    this.personService = rootService.personService\n    this.rootStore = rootStore\n    makeObservable(this)\n  }\n\n  public async loadUserRelated() {\n    await this.setManyEventually(this.personService.getAllRelatedToUser())\n  }\n\n  public async loadByOrganization(organizationId: string): Promise<void> {\n    await this.setManyEventually(this.personService.getAllByOrganization(organizationId))\n  }\n\n  protected prepareForStoring(item: Person): Person {\n    const extendedItem = new StoredPerson(this.rootStore).fromObject(item)\n\n    return super.prepareForStoring(extendedItem)\n  }\n\n  @computed\n  public get currentUserPersons(): Person[] {\n    const authenticatedUserId = this.accountStore.authenticatedUser?.id\n\n    if (!authenticatedUserId) {\n      return []\n    }\n\n    return this.items.filter(p => p.userId === authenticatedUserId)\n  }\n\n  @computed\n  public get currentUserNonActivePersons(): Person[] {\n    const persons = this.currentUserPersons\n\n    return persons.filter(p => p.id !== this.currentPerson.id)\n  }\n\n  @computed\n  public get currentPerson(): Person | null {\n    const selectedPerson = this.selectedPersonId && this.currentUserPersons.find(p => p.id === this.selectedPersonId)\n\n    return selectedPerson || this.currentUserPersons[0] || null\n  }\n\n  @computed\n  public get currentOrganizationPersons(): Person[] {\n    return this.getItems().filter(item => item.organizationId === this.rootStore.organizationStore.currentOrganizationId)\n  }\n\n  @action\n  public async loadCurrentOrganizationPersons(): Promise<void> {\n    await this.loadByOrganization(this.rootStore.organizationStore.currentOrganizationId)\n  }\n\n  @action\n  public selectPerson(id: string): void {\n    this.selectedPersonId = id\n  }\n}\n\nclass StoredPerson extends Person {\n  private readonly rootStore: RootStore\n\n  constructor(rootStore: RootStore) {\n    super()\n    this.rootStore = rootStore\n  }\n\n  @computed\n  get organization(): Organization {\n    if (this.organizationId && !this._organization) {\n      return this.rootStore.organizationStore.getByIdOrLoad(this.organizationId)\n    }\n\n    return this._organization\n  }\n}","import {action, makeObservable, observable} from 'mobx'\nimport AccountService from '../services/AccountService'\nimport User from '../domain/User'\n\nexport default class AccountStore {\n  private readonly accountService: AccountService\n\n  @observable public authenticatedUser: User | null = null\n  @observable public authenticated: boolean | null = null\n\n  constructor(accountService: AccountService) {\n    this.accountService = accountService\n    makeObservable(this)\n  }\n\n  public async login(email: string, password: string) {\n    await this.accountService.login(email, password)\n    await this.checkAuthentication()\n  }\n\n  public async logout() {\n    await this.accountService.logout()\n    this.setAuthenticatedUser(null)\n  }\n\n  public async checkAuthentication() {\n    const user = await this.accountService.getAccount()\n    this.setAuthenticatedUser(user)\n  }\n\n  @action\n  private setAuthenticatedUser(authenticatedUser: User) {\n    this.authenticatedUser = authenticatedUser\n    this.authenticated = !!authenticatedUser\n  }\n}","import RootService from '../services'\nimport RootStore from './index'\nimport AbstractResourceStore from './AbstractResourceStore'\nimport Project from '../domain/Project'\nimport ProjectService from '../services/ProjectService'\nimport {computed} from 'mobx'\nimport Organization from '../domain/Organization'\n\nexport default class ProjectStore extends AbstractResourceStore<Project> {\n  private readonly projectService: ProjectService\n  private readonly rootStore: RootStore\n\n  public constructor(rootService: RootService, rootStore: RootStore) {\n    super(rootService.projectService, rootStore.accountStore)\n    this.projectService = rootService.projectService\n    this.rootStore = rootStore\n  }\n\n  protected prepareForStoring(item: Project): Project {\n    return super.prepareForStoring(new StoredProject(this.rootStore).fromObject(item))\n  }\n\n  public async loadByOrganization(organizationId: string) {\n    await this.setManyEventually(this.projectService.getAllByOrganization(organizationId))\n  }\n\n  public async loadByActiveOrganization() {\n    const organizationId = this.rootStore.personStore.currentPerson?.organizationId\n\n    if (!organizationId) {\n      throw new Error('No organization selected')\n    }\n\n    return this.loadByOrganization(organizationId)\n  }\n\n  @computed\n  public get currentOrganizationProjects() {\n    const organizationId = this.rootStore.organizationStore.currentOrganizationId\n\n    if (!organizationId) {\n      return []\n    }\n\n    return this.items.filter(project => project.organizationId === organizationId)\n  }\n\n  @computed\n  public get upcomingProjects() {\n    return this.currentOrganizationProjects.filter(project => !project.hasStarted())\n  }\n\n  @computed\n  public get ongoingProjects() {\n    return this.currentOrganizationProjects.filter(project => project.isOngoing())\n  }\n\n  @computed\n  public get endedProjects() {\n    return this.currentOrganizationProjects.filter(project => project.hasStarted() && project.hasEnded())\n  }\n}\n\nclass StoredProject extends Project {\n  private readonly rootStore: RootStore\n\n  constructor(rootStore: RootStore) {\n    super()\n    this.rootStore = rootStore\n  }\n\n  @computed\n  get organization(): Organization {\n    if (this.organizationId && !this._organization) {\n      return this.rootStore.organizationStore.getByIdOrLoad(this.organizationId)\n    }\n\n    return this._organization\n  }\n}","import RootService from '../services'\nimport RootStore from './index'\nimport AbstractResourceStore from './AbstractResourceStore'\nimport Organization from '../domain/Organization'\nimport {computed} from 'mobx'\n\nexport default class OrganizationStore extends AbstractResourceStore<Organization> {\n  private readonly rootStore: RootStore\n\n  public constructor(rootService: RootService, rootStore: RootStore) {\n    super(rootService.organizationService, rootStore.accountStore)\n    this.rootStore = rootStore\n  }\n\n  @computed\n  public get currentOrganizationId(): string | null {\n    return this.rootStore.personStore.currentPerson?.organizationId\n  }\n\n  @computed\n  public get currentOrganization() {\n    return this.currentOrganizationId && this.getByIdOrLoad(this.currentOrganizationId)\n  }\n}","import RootService from '../services'\nimport RootStore from './index'\nimport AbstractResourceStore from './AbstractResourceStore'\nimport Tag from '../domain/Tag'\nimport TagService from '../services/TagService'\n\nexport default class TagStore extends AbstractResourceStore<Tag> {\n  private readonly tagService: TagService\n  private readonly rootStore: RootStore\n\n  public constructor(rootService: RootService, rootStore: RootStore) {\n    super(rootService.tagService, rootStore.accountStore)\n    this.tagService = rootService.tagService\n    this.rootStore = rootStore\n  }\n}","import RootService from '../services'\nimport RootStore from './index'\nimport AbstractResourceStore from './AbstractResourceStore'\nimport ProjectTag from '../domain/ProjectTag'\nimport ProjectTagService from '../services/ProjectTagService'\nimport {computed} from 'mobx'\nimport Project from '../domain/Project'\nimport Tag from '../domain/Tag'\n\nexport default class ProjectTagStore extends AbstractResourceStore<ProjectTag> {\n  private readonly projectTagService: ProjectTagService\n  private readonly rootStore: RootStore\n\n  public constructor(rootService: RootService, rootStore: RootStore) {\n    super(rootService.projectTagService, rootStore.accountStore)\n    this.projectTagService = rootService.projectTagService\n    this.rootStore = rootStore\n  }\n\n  public async loadByProject(projectId: string) {\n    await this.setManyEventually(this.projectTagService.getAllByProject(projectId))\n  }\n\n  protected prepareForStoring(item: ProjectTag): ProjectTag {\n    return super.prepareForStoring(new StoredProjectTag(this.rootStore).fromObject(item))\n  }\n\n  public getItemsByProject(projectId: string): ProjectTag[] {\n    return this.items.filter(i => i.projectId === projectId)\n  }\n}\n\nclass StoredProjectTag extends ProjectTag {\n  private readonly rootStore: RootStore\n\n  constructor(rootStore: RootStore) {\n    super()\n    this.rootStore = rootStore\n  }\n\n  @computed\n  get project(): Project {\n    if (this.projectId && !this._project) {\n      return this.rootStore.projectStore.getByIdOrLoad(this.projectId)\n    }\n\n    return this._project\n  }\n\n\n  @computed\n  get tag(): Tag {\n    if (this.tagId && !this._tag) {\n      return this.rootStore.tagStore.getByIdOrLoad(this.tagId)\n    }\n\n    return this._tag\n  }\n}","import RootService from '../services'\nimport RootStore from './index'\nimport AbstractResourceStore from './AbstractResourceStore'\nimport Notification from '../domain/Notification'\nimport NotificationService from '../services/NotificationService'\nimport {computed} from 'mobx'\nimport {toDate} from '../util/date'\n\nexport default class NotificationStore extends AbstractResourceStore<Notification> {\n  private readonly notificationService: NotificationService\n  public constructor(private readonly rootService: RootService, private readonly rootStore: RootStore) {\n    super(rootService.notificationService, rootStore.accountStore)\n    this.notificationService = rootService.notificationService\n  }\n\n  public async loadByPerson(personId: string): Promise<void> {\n    await this.setManyEventually(this.notificationService.getAllByPerson(personId))\n  }\n\n  public async loadByActivePerson(): Promise<void> {\n    const personId = this.rootStore.personStore.currentPerson?.id\n\n    if (!personId) {\n      throw new Error('No person selected')\n    }\n\n    return await this.loadByPerson(personId)\n  }\n\n  @computed\n  public get currentPersonNotifications(): Notification[] {\n    const personId = this.rootStore.personStore.currentPerson?.id\n\n    if (!personId) {\n      throw new Error('No person selected')\n    }\n\n    const notifications = this.getItems().filter(item => item.personId === personId)\n\n    notifications.sort((a, b) => toDate(b.createdAt).getTime() - toDate(a.createdAt).getTime())\n\n    return notifications\n  }\n\n  @computed\n  public get currentPersonUnreadNotificationsCount(): number {\n    return this.currentPersonNotifications.filter(n => !n.readAt).length\n  }\n\n  public async markAsRead(notification: Notification) {\n    notification.readAt = new Date()\n    await this.update(notification)\n  }\n}","import RootService from '../services'\nimport PersonStore from './PersonStore'\nimport AccountStore from './AccountStore'\nimport ProjectStore from './ProjectStore'\nimport OrganizationStore from './OrganizationStore'\nimport TagStore from './TagStore'\nimport ProjectTagStore from './ProjectTagStore'\nimport NotificationStore from './NotificationStore'\n\nexport default class RootStore {\n  public readonly accountStore: AccountStore\n  public readonly personStore: PersonStore\n  public readonly projectStore: ProjectStore\n  public readonly organizationStore: OrganizationStore\n  public readonly tagStore: TagStore\n  public readonly projectTagStore: ProjectTagStore\n  public readonly notificationStore: NotificationStore\n\n  public constructor(rootService: RootService) {\n    this.accountStore = new AccountStore(rootService.accountService)\n    this.personStore = new PersonStore(rootService, this)\n    this.projectStore = new ProjectStore(rootService, this)\n    this.organizationStore = new OrganizationStore(rootService, this)\n    this.tagStore = new TagStore(rootService, this)\n    this.projectTagStore = new ProjectTagStore(rootService, this)\n    this.notificationStore = new NotificationStore(rootService, this)\n  }\n}","import React from 'react'\nimport {ChakraProvider} from '@chakra-ui/react'\nimport {BrowserRouter} from 'react-router-dom'\nimport {StoreContext} from './hooks/useStore'\nimport RootStore from './store'\nimport useServices from './hooks/useServices'\n\nconst Providers: React.FC = ({children}) => {\n  const services = useServices()\n\n  return (\n      <ChakraProvider>\n        <BrowserRouter>\n          <StoreContext.Provider value={new RootStore(services)}>\n            {children}\n          </StoreContext.Provider>\n        </BrowserRouter>\n      </ChakraProvider>\n  )\n}\n\nexport default Providers","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport Providers from './Providers'\n\nReactDOM.render(\n    <React.StrictMode>\n      <Providers>\n        <App/>\n      </Providers>\n    </React.StrictMode>,\n    document.getElementById('root')\n)\n\nimport('./seed')","export default class Resource {\n  public static getName(target: object | any) {\n    return target._resourceName || target.name\n  }\n\n  public static Name(value: string) {\n    return (target: object | any): any => {\n      target._resourceName = value\n    }\n  }\n}","import {JsonIgnoreProperties, JsonProperty} from 'jackson-js'\n\n@JsonIgnoreProperties({ignoreUnknown: true})\nexport default abstract class AbstractDomain<T extends object> {\n  @JsonProperty()\n  public id: string\n\n  /**\n   * @deprecated\n   */\n  public fromObject(payload: T | object): this {\n    for (const key in payload) {\n      if (!payload.hasOwnProperty(key)) {\n        continue\n      }\n\n      const descriptor = Object.getOwnPropertyDescriptor(this, key)\n\n      if (!descriptor || (descriptor?.get && !descriptor?.set)) {\n        continue\n      }\n\n      // @ts-ignore\n      this[key] = payload[key]\n    }\n\n    return this\n  }\n}","import AbstractDomain from './AbstractDomain'\nimport {JsonProperty} from 'jackson-js'\nimport Resource from '../decorators/Resource'\n\nexport enum TagType {\n  POSITION,\n  TECHNOLOGY,\n}\n\n@Resource.Name('tags')\nexport default class Tag extends AbstractDomain<Tag> {\n  @JsonProperty() public name: string\n  @JsonProperty() public type: TagType\n}"],"sourceRoot":""}